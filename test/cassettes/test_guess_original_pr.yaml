interactions:
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
    method: GET
    uri: https://api.github.com/repos/ansible/ansible/pulls/73544
  response:
    body:
      string: "{\"url\":\"https://api.github.com/repos/ansible/ansible/pulls/73544\",\"id\":570499421,\"node_id\":\"MDExOlB1bGxSZXF1ZXN0NTcwNDk5NDIx\",\"html_url\":\"https://github.com/ansible/ansible/pull/73544\",\"diff_url\":\"https://github.com/ansible/ansible/pull/73544.diff\",\"patch_url\":\"https://github.com/ansible/ansible/pull/73544.patch\",\"issue_url\":\"https://api.github.com/repos/ansible/ansible/issues/73544\",\"number\":73544,\"state\":\"open\",\"locked\":false,\"title\":\"[stable-2.9]
        Add AlmaLinux to the family of Red Hat-like operating systems (#73541)\",\"user\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"body\":\"#####
        SUMMARY\\r\\n<!--- Describe the change below, including rationale and design
        decisions -->\\r\\nBackport of #73541 for Ansible 2.9.\\r\\n<!--- HINT: Include
        \\\"Fixes #nnn\\\" if you are fixing an existing issue -->\\r\\n\\r\\n#####
        ISSUE TYPE\\r\\n<!--- Pick one below and delete the rest -->\\r\\n- Bugfix
        Pull Request\\r\\n\\r\\n##### COMPONENT NAME\\r\\n<!--- Write the short name
        of the module, plugin, task or feature below -->\\r\\n`lib/ansible/module_utils/facts/system/distribution.py`\",\"created_at\":\"2021-02-09T18:09:43Z\",\"updated_at\":\"2021-02-19T06:57:03Z\",\"closed_at\":null,\"merged_at\":null,\"merge_commit_sha\":\"e1234321c5c296e65533aa659c2ba629cb464d15\",\"assignee\":null,\"assignees\":[],\"requested_reviewers\":[],\"requested_teams\":[],\"labels\":[{\"id\":1316917295,\"node_id\":\"MDU6TGFiZWwxMzE2OTE3Mjk1\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/affects_2.9\",\"name\":\"affects_2.9\",\"color\":\"5319e7\",\"default\":false,\"description\":\"This
        issue/PR affects Ansible v2.9\"},{\"id\":266246971,\"node_id\":\"MDU6TGFiZWwyNjYyNDY5NzE=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/backport\",\"name\":\"backport\",\"color\":\"00ff00\",\"default\":false,\"description\":\"This
        PR does not target the devel branch.\"},{\"id\":785271699,\"node_id\":\"MDU6TGFiZWw3ODUyNzE2OTk=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/bug\",\"name\":\"bug\",\"color\":\"fbca04\",\"default\":true,\"description\":\"This
        issue/PR relates to a bug.\"},{\"id\":513652538,\"node_id\":\"MDU6TGFiZWw1MTM2NTI1Mzg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/core_review\",\"name\":\"core_review\",\"color\":\"ededed\",\"default\":false,\"description\":\"In
        order to be merged, this PR must follow the core review workflow.\"},{\"id\":503572087,\"node_id\":\"MDU6TGFiZWw1MDM1NzIwODc=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/needs_triage\",\"name\":\"needs_triage\",\"color\":\"0e8a16\",\"default\":false,\"description\":\"Needs
        a first human triage before being processed.\"},{\"id\":581543918,\"node_id\":\"MDU6TGFiZWw1ODE1NDM5MTg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/stale_ci\",\"name\":\"stale_ci\",\"color\":\"fef2c0\",\"default\":false,\"description\":\"This
        PR has been tested by CI more than one week ago. Close and re-open this PR
        to get it retested.\"},{\"id\":636327968,\"node_id\":\"MDU6TGFiZWw2MzYzMjc5Njg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:community\",\"name\":\"support:community\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible community.\"},{\"id\":636352796,\"node_id\":\"MDU6TGFiZWw2MzYzNTI3OTY=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:core\",\"name\":\"support:core\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible Engineering Team.\"}],\"milestone\":null,\"draft\":false,\"commits_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73544/commits\",\"review_comments_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73544/comments\",\"review_comment_url\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/issues/73544/comments\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/f6398f0dec58100490938cfefc864669dfb3349c\",\"head\":{\"label\":\"samdoran:backport-2f5c83d-stable-2.9\",\"ref\":\"backport-2f5c83d-stable-2.9\",\"sha\":\"f6398f0dec58100490938cfefc864669dfb3349c\",\"user\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"repo\":{\"id\":70726272,\"node_id\":\"MDEwOlJlcG9zaXRvcnk3MDcyNjI3Mg==\",\"name\":\"ansible\",\"full_name\":\"samdoran/ansible\",\"private\":false,\"owner\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"html_url\":\"https://github.com/samdoran/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy. Avoid writing scripts or custom code to deploy
        and update your applications\u2014 automate in a language that approaches
        plain English, using SSH, with no agents to install on remote systems.\",\"fork\":true,\"url\":\"https://api.github.com/repos/samdoran/ansible\",\"forks_url\":\"https://api.github.com/repos/samdoran/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/samdoran/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/samdoran/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/samdoran/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/samdoran/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/samdoran/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/samdoran/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/samdoran/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/samdoran/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/samdoran/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/samdoran/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/samdoran/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/samdoran/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/samdoran/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/samdoran/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/samdoran/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/samdoran/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/samdoran/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/samdoran/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/samdoran/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/samdoran/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/samdoran/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/samdoran/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/samdoran/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/samdoran/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/samdoran/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/samdoran/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/samdoran/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/samdoran/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/samdoran/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/samdoran/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/samdoran/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/samdoran/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/samdoran/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/samdoran/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/samdoran/ansible/deployments\",\"created_at\":\"2016-10-12T17:53:34Z\",\"updated_at\":\"2020-11-19T13:40:09Z\",\"pushed_at\":\"2021-02-24T22:39:54Z\",\"git_url\":\"git://github.com/samdoran/ansible.git\",\"ssh_url\":\"git@github.com:samdoran/ansible.git\",\"clone_url\":\"https://github.com/samdoran/ansible.git\",\"svn_url\":\"https://github.com/samdoran/ansible\",\"homepage\":\"http://ansible.com/\",\"size\":187248,\"stargazers_count\":1,\"watchers_count\":1,\"language\":\"Python\",\"has_issues\":false,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":1,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":0,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":1,\"open_issues\":0,\"watchers\":1,\"default_branch\":\"devel\"}},\"base\":{\"label\":\"ansible:stable-2.9\",\"ref\":\"stable-2.9\",\"sha\":\"7a7f5a700660c9ea9028062b6714540df57910e2\",\"user\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"repo\":{\"id\":3638964,\"node_id\":\"MDEwOlJlcG9zaXRvcnkzNjM4OTY0\",\"name\":\"ansible\",\"full_name\":\"ansible/ansible\",\"private\":false,\"owner\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"html_url\":\"https://github.com/ansible/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy and maintain. Automate everything from code deployment
        to network configuration to cloud management, in a language that approaches
        plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com.\",\"fork\":false,\"url\":\"https://api.github.com/repos/ansible/ansible\",\"forks_url\":\"https://api.github.com/repos/ansible/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/ansible/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/ansible/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/ansible/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/ansible/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/ansible/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/ansible/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/ansible/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/ansible/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/ansible/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/ansible/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/ansible/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/ansible/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/ansible/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/ansible/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/ansible/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/ansible/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/ansible/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/ansible/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/ansible/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/ansible/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/ansible/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/ansible/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/ansible/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/ansible/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/ansible/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/ansible/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/ansible/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/ansible/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/ansible/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/ansible/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/ansible/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/ansible/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/ansible/ansible/deployments\",\"created_at\":\"2012-03-06T14:58:02Z\",\"updated_at\":\"2021-02-25T00:16:06Z\",\"pushed_at\":\"2021-02-25T00:21:00Z\",\"git_url\":\"git://github.com/ansible/ansible.git\",\"ssh_url\":\"org-1507452@github.com:ansible/ansible.git\",\"clone_url\":\"https://github.com/ansible/ansible.git\",\"svn_url\":\"https://github.com/ansible/ansible\",\"homepage\":\"https://www.ansible.com/\",\"size\":194935,\"stargazers_count\":47012,\"watchers_count\":47012,\"language\":\"Python\",\"has_issues\":true,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":20304,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":1887,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":20304,\"open_issues\":1887,\"watchers\":47012,\"default_branch\":\"devel\"}},\"_links\":{\"self\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73544\"},\"html\":{\"href\":\"https://github.com/ansible/ansible/pull/73544\"},\"issue\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73544\"},\"comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73544/comments\"},\"review_comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73544/comments\"},\"review_comment\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\"},\"commits\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73544/commits\"},\"statuses\":{\"href\":\"https://api.github.com/repos/ansible/ansible/statuses/f6398f0dec58100490938cfefc864669dfb3349c\"}},\"author_association\":\"MEMBER\",\"auto_merge\":null,\"active_lock_reason\":null,\"merged\":false,\"mergeable\":true,\"rebaseable\":true,\"mergeable_state\":\"clean\",\"merged_by\":null,\"comments\":0,\"review_comments\":0,\"maintainer_can_modify\":true,\"commits\":1,\"additions\":57,\"deletions\":1,\"changed_files\":3}"
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Access-Control-Expose-Headers:
      - ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes,
        X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
      Cache-Control:
      - private, max-age=60, s-maxage=60
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - default-src 'none'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:53 GMT
      Etag:
      - W/"1e311f24cf6177465f9c07fcb2c4538228db1b0c01f146c3e683364dfc931d95"
      Last-Modified:
      - Fri, 19 Feb 2021 06:57:03 GMT
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept, Authorization, Cookie, X-GitHub-OTP
      - Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes:
      - ''
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Media-Type:
      - github.cloak-preview, github.groot-preview; format=json
      X-GitHub-Request-Id:
      - 818A:149F:8B015C:F056F5:6037144D
      X-OAuth-Scopes:
      - repo, workflow
      X-RateLimit-Limit:
      - '5000'
      X-RateLimit-Remaining:
      - '4203'
      X-RateLimit-Reset:
      - '1614224282'
      X-XSS-Protection:
      - 1; mode=block
      x-ratelimit-used:
      - '797'
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/ansible/ansible/pulls/73544
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Host:
      - github.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://github.com/ansible/ansible/pull/73544.diff
  response:
    body: {}
    headers:
      Cache-Control:
      - no-cache
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com online.visualstudio.com/api/v1/locations;
        font-src github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/html; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:54 GMT
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Location:
      - https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73544.diff
      Referrer-Policy:
      - no-referrer-when-downgrade
      Server:
      - GitHub.com
      Set-Cookie:
      - logged_in=no; domain=.github.com; path=/; expires=Fri, 25 Feb 2022 03:06:54
        GMT; secure; HttpOnly; SameSite=Lax
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5A0:5807:887C55:A3B77D:6037144D
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 302
      message: Found
    url: https://github.com/ansible/ansible/pull/73544.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Host:
      - patch-diff.githubusercontent.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73544.diff
  response:
    body:
      string: "diff --git a/changelogs/fragments/support_almalinux.yml b/changelogs/fragments/support_almalinux.yml\nnew
        file mode 100644\nindex 0000000000000..4dbc040a62f1e\n--- /dev/null\n+++ b/changelogs/fragments/support_almalinux.yml\n@@
        -0,0 +1,2 @@\n+bugfixes:\n+  - add AlmaLinux to fact gathering (https://github.com/ansible/ansible/pull/73458)\ndiff
        --git a/lib/ansible/module_utils/facts/system/distribution.py b/lib/ansible/module_utils/facts/system/distribution.py\nindex
        57691dbf91125..09b5a5fd173df 100644\n--- a/lib/ansible/module_utils/facts/system/distribution.py\n+++
        b/lib/ansible/module_utils/facts/system/distribution.py\n@@ -466,7 +466,8
        @@ class Distribution(object):\n     # keep keys in sync with Conditionals
        page of docs\n     OS_FAMILY_MAP = {'RedHat': ['RedHat', 'Fedora', 'CentOS',
        'Scientific', 'SLC',\n                                 'Ascendos', 'CloudLinux',
        'PSBM', 'OracleLinux', 'OVS',\n-                                'OEL', 'Amazon',
        'Virtuozzo', 'XenServer', 'Alibaba'],\n+                                'OEL',
        'Amazon', 'Virtuozzo', 'XenServer', 'Alibaba',\n+                                'AlmaLinux'],\n
        \                     'Debian': ['Debian', 'Ubuntu', 'Raspbian', 'Neon', 'KDE
        neon',\n                                 'Linux Mint', 'SteamOS', 'Devuan',
        'Kali', 'Cumulus Linux'],\n                      'Suse': ['SuSE', 'SLES',
        'SLED', 'openSUSE', 'openSUSE Tumbleweed',\ndiff --git a/test/units/module_utils/facts/system/distribution/fixtures/almalinux_8_3_beta.json
        b/test/units/module_utils/facts/system/distribution/fixtures/almalinux_8_3_beta.json\nnew
        file mode 100644\nindex 0000000000000..2d8df50bf1275\n--- /dev/null\n+++ b/test/units/module_utils/facts/system/distribution/fixtures/almalinux_8_3_beta.json\n@@
        -0,0 +1,53 @@\n+{\n+    \"name\": \"AlmaLinux 8.3\",\n+    \"distro\": {\n+
        \       \"codename\": \"Purple Manul\",\n+        \"id\": \"almalinux\",\n+
        \       \"name\": \"AlmaLinux\",\n+        \"version\": \"8.3\",\n+        \"version_best\":
        \"8.3\",\n+        \"lsb_release_info\": {\n+            \"lsb_version\":
        \":core-4.1-amd64:core-4.1-noarch\",\n+            \"distributor_id\": \"AlmaLinux\",\n+
        \           \"description\": \"AlmaLinux release 8.3 Beta (Purple Manul)\",\n+
        \           \"release\": \"8.3\",\n+            \"codename\": \"PurpleManul\"\n+
        \       },\n+        \"os_release_info\": {\n+            \"name\": \"AlmaLinux\",\n+
        \           \"version\": \"8.3 (Purple Manul)\",\n+            \"id\": \"almalinux\",\n+
        \           \"id_like\": \"rhel centos fedora\",\n+            \"version_id\":
        \"8.3\",\n+            \"platform_id\": \"platform:el8\",\n+            \"pretty_name\":
        \"AlmaLinux 8.3 Beta (Purple Manul)\",\n+            \"ansi_color\": \"0;34\",\n+
        \           \"cpe_name\": \"cpe:/o:almalinux:almalinux:8.3:beta\",\n+            \"home_url\":
        \"https://almalinux.org/\",\n+            \"bug_report_url\": \"https://bugs.almalinux.org/\",\n+
        \           \"almalinux_mantisbt_project\": \"AlmaLinux-8\",\n+            \"almalinux_mantisbt_project_version\":
        \"8\",\n+            \"codename\": \"Purple Manul\"\n+        }\n+    },\n+
        \   \"input\": {\n+        \"/etc/centos-release\": \"AlmaLinux release 8.3
        Beta (Purple Manul)\\n\",\n+        \"/etc/redhat-release\": \"AlmaLinux release
        8.3 Beta (Purple Manul)\\n\",\n+        \"/etc/system-release\": \"AlmaLinux
        release 8.3 Beta (Purple Manul)\\n\",\n+        \"/etc/os-release\": \"NAME=\\\"AlmaLinux\\\"\\nVERSION=\\\"8.3
        (Purple Manul)\\\"\\nID=\\\"almalinux\\\"\\nID_LIKE=\\\"rhel centos fedora\\\"\\nVERSION_ID=\\\"8.3\\\"\\nPLATFORM_ID=\\\"platform:el8\\\"\\nPRETTY_NAME=\\\"AlmaLinux
        8.3 Beta (Purple Manul)\\\"\\nANSI_COLOR=\\\"0;34\\\"\\nCPE_NAME=\\\"cpe:/o:almalinux:almalinux:8.3:beta\\\"\\nHOME_URL=\\\"https://almalinux.org/\\\"\\nBUG_REPORT_URL=\\\"https://bugs.almalinux.org/\\\"\\n\\nALMALINUX_MANTISBT_PROJECT=\\\"AlmaLinux-8\\\"
        \                       \\nALMALINUX_MANTISBT_PROJECT_VERSION=\\\"8\\\"                       \\n\\n\",\n+
        \       \"/usr/lib/os-release\": \"NAME=\\\"AlmaLinux\\\"\\nVERSION=\\\"8.3
        (Purple Manul)\\\"\\nID=\\\"almalinux\\\"\\nID_LIKE=\\\"rhel centos fedora\\\"\\nVERSION_ID=\\\"8.3\\\"\\nPLATFORM_ID=\\\"platform:el8\\\"\\nPRETTY_NAME=\\\"AlmaLinux
        8.3 Beta (Purple Manul)\\\"\\nANSI_COLOR=\\\"0;34\\\"\\nCPE_NAME=\\\"cpe:/o:almalinux:almalinux:8.3:beta\\\"\\nHOME_URL=\\\"https://almalinux.org/\\\"\\nBUG_REPORT_URL=\\\"https://bugs.almalinux.org/\\\"\\n\\nALMALINUX_MANTISBT_PROJECT=\\\"AlmaLinux-8\\\"
        \                       \\nALMALINUX_MANTISBT_PROJECT_VERSION=\\\"8\\\"                       \\n\\n\"\n+
        \   },\n+    \"platform.dist\": [\n+        \"almalinux\",\n+        \"8.3\",\n+
        \       \"Purple Manul\"\n+    ],\n+    \"result\": {\n+        \"distribution\":
        \"AlmaLinux\",\n+        \"distribution_version\": \"8.3\",\n+        \"distribution_release\":
        \"Purple Manul\",\n+        \"distribution_major_version\": \"8\",\n+        \"os_family\":
        \"RedHat\"\n+    },\n+    \"platform.release\": \"4.18.0-240.el8.x86_64\"\n+}\n"
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com; font-src
        github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/plain; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:54 GMT
      Etag:
      - W/"54cc29f53348690ec8e9464582b2d634"
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Set-Cookie:
      - logged_in=no; domain=.github.com; path=/; expires=Fri, 25 Feb 2022 03:06:54
        GMT; secure; HttpOnly; SameSite=Lax
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5A2:7E2A:A71C07:D06A14:6037144E
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 200
      message: OK
    url: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73544.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Cookie:
      - logged_in=no
    method: GET
    uri: https://api.github.com/repos/ansible/ansible/pulls/73541
  response:
    body:
      string: "{\"url\":\"https://api.github.com/repos/ansible/ansible/pulls/73541\",\"id\":570476127,\"node_id\":\"MDExOlB1bGxSZXF1ZXN0NTcwNDc2MTI3\",\"html_url\":\"https://github.com/ansible/ansible/pull/73541\",\"diff_url\":\"https://github.com/ansible/ansible/pull/73541.diff\",\"patch_url\":\"https://github.com/ansible/ansible/pull/73541.patch\",\"issue_url\":\"https://api.github.com/repos/ansible/ansible/issues/73541\",\"number\":73541,\"state\":\"closed\",\"locked\":false,\"title\":\"Add
        AlmaLinux to the family of Red Hat-like operating systems\",\"user\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"body\":\"#####
        SUMMARY\\r\\n<!--- Describe the change below, including rationale and design
        decisions -->\\r\\nReplaces #73458\\r\\n<!--- HINT: Include \\\"Fixes #nnn\\\"
        if you are fixing an existing issue -->\\r\\n\\r\\n##### ISSUE TYPE\\r\\n<!---
        Pick one below and delete the rest -->\\r\\n- Bugfix Pull Request\\r\\n\\r\\n#####
        COMPONENT NAME\\r\\n<!--- Write the short name of the module, plugin, task
        or feature below -->\\r\\n`lib/ansible/module_utils/facts/system/distribution.py`\",\"created_at\":\"2021-02-09T17:35:47Z\",\"updated_at\":\"2021-02-11T18:59:55Z\",\"closed_at\":\"2021-02-09T18:04:39Z\",\"merged_at\":\"2021-02-09T18:04:39Z\",\"merge_commit_sha\":\"2f5c83dfb1855342389436e72d64cf7afe9698e6\",\"assignee\":null,\"assignees\":[],\"requested_reviewers\":[],\"requested_teams\":[],\"labels\":[{\"id\":1742671738,\"node_id\":\"MDU6TGFiZWwxNzQyNjcxNzM4\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/affects_2.11\",\"name\":\"affects_2.11\",\"color\":\"5319e7\",\"default\":false,\"description\":\"\"},{\"id\":785271699,\"node_id\":\"MDU6TGFiZWw3ODUyNzE2OTk=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/bug\",\"name\":\"bug\",\"color\":\"fbca04\",\"default\":true,\"description\":\"This
        issue/PR relates to a bug.\"},{\"id\":513652538,\"node_id\":\"MDU6TGFiZWw1MTM2NTI1Mzg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/core_review\",\"name\":\"core_review\",\"color\":\"ededed\",\"default\":false,\"description\":\"In
        order to be merged, this PR must follow the core review workflow.\"},{\"id\":636327968,\"node_id\":\"MDU6TGFiZWw2MzYzMjc5Njg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:community\",\"name\":\"support:community\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible community.\"},{\"id\":636352796,\"node_id\":\"MDU6TGFiZWw2MzYzNTI3OTY=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:core\",\"name\":\"support:core\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible Engineering Team.\"}],\"milestone\":null,\"draft\":false,\"commits_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73541/commits\",\"review_comments_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73541/comments\",\"review_comment_url\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/issues/73541/comments\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/3ea9b87e7ee0c0dcb807a22bf4584732d90ed881\",\"head\":{\"label\":\"samdoran:add-alma-linux\",\"ref\":\"add-alma-linux\",\"sha\":\"3ea9b87e7ee0c0dcb807a22bf4584732d90ed881\",\"user\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"repo\":{\"id\":70726272,\"node_id\":\"MDEwOlJlcG9zaXRvcnk3MDcyNjI3Mg==\",\"name\":\"ansible\",\"full_name\":\"samdoran/ansible\",\"private\":false,\"owner\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"html_url\":\"https://github.com/samdoran/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy. Avoid writing scripts or custom code to deploy
        and update your applications\u2014 automate in a language that approaches
        plain English, using SSH, with no agents to install on remote systems.\",\"fork\":true,\"url\":\"https://api.github.com/repos/samdoran/ansible\",\"forks_url\":\"https://api.github.com/repos/samdoran/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/samdoran/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/samdoran/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/samdoran/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/samdoran/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/samdoran/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/samdoran/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/samdoran/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/samdoran/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/samdoran/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/samdoran/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/samdoran/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/samdoran/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/samdoran/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/samdoran/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/samdoran/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/samdoran/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/samdoran/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/samdoran/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/samdoran/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/samdoran/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/samdoran/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/samdoran/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/samdoran/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/samdoran/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/samdoran/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/samdoran/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/samdoran/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/samdoran/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/samdoran/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/samdoran/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/samdoran/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/samdoran/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/samdoran/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/samdoran/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/samdoran/ansible/deployments\",\"created_at\":\"2016-10-12T17:53:34Z\",\"updated_at\":\"2020-11-19T13:40:09Z\",\"pushed_at\":\"2021-02-24T22:39:54Z\",\"git_url\":\"git://github.com/samdoran/ansible.git\",\"ssh_url\":\"git@github.com:samdoran/ansible.git\",\"clone_url\":\"https://github.com/samdoran/ansible.git\",\"svn_url\":\"https://github.com/samdoran/ansible\",\"homepage\":\"http://ansible.com/\",\"size\":187248,\"stargazers_count\":1,\"watchers_count\":1,\"language\":\"Python\",\"has_issues\":false,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":1,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":0,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":1,\"open_issues\":0,\"watchers\":1,\"default_branch\":\"devel\"}},\"base\":{\"label\":\"ansible:devel\",\"ref\":\"devel\",\"sha\":\"ca448f7c350fae8080dcfec648342d2fc8837da0\",\"user\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"repo\":{\"id\":3638964,\"node_id\":\"MDEwOlJlcG9zaXRvcnkzNjM4OTY0\",\"name\":\"ansible\",\"full_name\":\"ansible/ansible\",\"private\":false,\"owner\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"html_url\":\"https://github.com/ansible/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy and maintain. Automate everything from code deployment
        to network configuration to cloud management, in a language that approaches
        plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com.\",\"fork\":false,\"url\":\"https://api.github.com/repos/ansible/ansible\",\"forks_url\":\"https://api.github.com/repos/ansible/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/ansible/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/ansible/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/ansible/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/ansible/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/ansible/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/ansible/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/ansible/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/ansible/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/ansible/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/ansible/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/ansible/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/ansible/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/ansible/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/ansible/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/ansible/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/ansible/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/ansible/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/ansible/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/ansible/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/ansible/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/ansible/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/ansible/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/ansible/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/ansible/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/ansible/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/ansible/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/ansible/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/ansible/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/ansible/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/ansible/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/ansible/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/ansible/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/ansible/ansible/deployments\",\"created_at\":\"2012-03-06T14:58:02Z\",\"updated_at\":\"2021-02-25T00:16:06Z\",\"pushed_at\":\"2021-02-25T00:21:00Z\",\"git_url\":\"git://github.com/ansible/ansible.git\",\"ssh_url\":\"org-1507452@github.com:ansible/ansible.git\",\"clone_url\":\"https://github.com/ansible/ansible.git\",\"svn_url\":\"https://github.com/ansible/ansible\",\"homepage\":\"https://www.ansible.com/\",\"size\":194935,\"stargazers_count\":47012,\"watchers_count\":47012,\"language\":\"Python\",\"has_issues\":true,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":20304,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":1887,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":20304,\"open_issues\":1887,\"watchers\":47012,\"default_branch\":\"devel\"}},\"_links\":{\"self\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73541\"},\"html\":{\"href\":\"https://github.com/ansible/ansible/pull/73541\"},\"issue\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73541\"},\"comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73541/comments\"},\"review_comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73541/comments\"},\"review_comment\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\"},\"commits\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73541/commits\"},\"statuses\":{\"href\":\"https://api.github.com/repos/ansible/ansible/statuses/3ea9b87e7ee0c0dcb807a22bf4584732d90ed881\"}},\"author_association\":\"MEMBER\",\"auto_merge\":null,\"active_lock_reason\":null,\"merged\":true,\"mergeable\":null,\"rebaseable\":null,\"mergeable_state\":\"unknown\",\"merged_by\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"comments\":0,\"review_comments\":0,\"maintainer_can_modify\":false,\"commits\":4,\"additions\":56,\"deletions\":1,\"changed_files\":3}"
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Access-Control-Expose-Headers:
      - ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes,
        X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
      Cache-Control:
      - private, max-age=60, s-maxage=60
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - default-src 'none'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:54 GMT
      Etag:
      - W/"cc7f0d2436a5943022f45da4b999e7ece747f0da8323122aeb756ddcecf1a7d5"
      Last-Modified:
      - Thu, 11 Feb 2021 18:59:55 GMT
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept, Authorization, Cookie, X-GitHub-OTP
      - Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes:
      - ''
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Media-Type:
      - github.cloak-preview, github.groot-preview; format=json
      X-GitHub-Request-Id:
      - 818A:149F:8B019E:F05716:6037144D
      X-OAuth-Scopes:
      - repo, workflow
      X-RateLimit-Limit:
      - '5000'
      X-RateLimit-Remaining:
      - '4202'
      X-RateLimit-Reset:
      - '1614224282'
      X-XSS-Protection:
      - 1; mode=block
      x-ratelimit-used:
      - '798'
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/ansible/ansible/pulls/73541
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Cookie:
      - logged_in=no
      Host:
      - github.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://github.com/ansible/ansible/pull/73541.diff
  response:
    body: {}
    headers:
      Cache-Control:
      - no-cache
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com online.visualstudio.com/api/v1/locations;
        font-src github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/html; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:54 GMT
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Location:
      - https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73541.diff
      Referrer-Policy:
      - no-referrer-when-downgrade
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5A4:560E:BD048D:DD9834:6037144E
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 302
      message: Found
    url: https://github.com/ansible/ansible/pull/73541.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Host:
      - patch-diff.githubusercontent.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73541.diff
  response:
    body:
      string: "diff --git a/changelogs/fragments/support_almalinux.yml b/changelogs/fragments/support_almalinux.yml\nnew
        file mode 100644\nindex 0000000000000..4dbc040a62f1e\n--- /dev/null\n+++ b/changelogs/fragments/support_almalinux.yml\n@@
        -0,0 +1,2 @@\n+bugfixes:\n+  - add AlmaLinux to fact gathering (https://github.com/ansible/ansible/pull/73458)\ndiff
        --git a/lib/ansible/module_utils/facts/system/distribution.py b/lib/ansible/module_utils/facts/system/distribution.py\nindex
        a31aa197f573e..fd49b3a6fbd06 100644\n--- a/lib/ansible/module_utils/facts/system/distribution.py\n+++
        b/lib/ansible/module_utils/facts/system/distribution.py\n@@ -464,7 +464,7
        @@ class Distribution(object):\n     OS_FAMILY_MAP = {'RedHat': ['RedHat',
        'Fedora', 'CentOS', 'Scientific', 'SLC',\n                                 'Ascendos',
        'CloudLinux', 'PSBM', 'OracleLinux', 'OVS',\n                                 'OEL',
        'Amazon', 'Virtuozzo', 'XenServer', 'Alibaba',\n-                                'EulerOS',
        'openEuler'],\n+                                'EulerOS', 'openEuler', 'AlmaLinux'],\n
        \                     'Debian': ['Debian', 'Ubuntu', 'Raspbian', 'Neon', 'KDE
        neon',\n                                 'Linux Mint', 'SteamOS', 'Devuan',
        'Kali', 'Cumulus Linux',\n                                 'Pop!_OS', 'Parrot',
        'Pardus GNU/Linux'],\ndiff --git a/test/units/module_utils/facts/system/distribution/fixtures/almalinux_8_3_beta.json
        b/test/units/module_utils/facts/system/distribution/fixtures/almalinux_8_3_beta.json\nnew
        file mode 100644\nindex 0000000000000..2d8df50bf1275\n--- /dev/null\n+++ b/test/units/module_utils/facts/system/distribution/fixtures/almalinux_8_3_beta.json\n@@
        -0,0 +1,53 @@\n+{\n+    \"name\": \"AlmaLinux 8.3\",\n+    \"distro\": {\n+
        \       \"codename\": \"Purple Manul\",\n+        \"id\": \"almalinux\",\n+
        \       \"name\": \"AlmaLinux\",\n+        \"version\": \"8.3\",\n+        \"version_best\":
        \"8.3\",\n+        \"lsb_release_info\": {\n+            \"lsb_version\":
        \":core-4.1-amd64:core-4.1-noarch\",\n+            \"distributor_id\": \"AlmaLinux\",\n+
        \           \"description\": \"AlmaLinux release 8.3 Beta (Purple Manul)\",\n+
        \           \"release\": \"8.3\",\n+            \"codename\": \"PurpleManul\"\n+
        \       },\n+        \"os_release_info\": {\n+            \"name\": \"AlmaLinux\",\n+
        \           \"version\": \"8.3 (Purple Manul)\",\n+            \"id\": \"almalinux\",\n+
        \           \"id_like\": \"rhel centos fedora\",\n+            \"version_id\":
        \"8.3\",\n+            \"platform_id\": \"platform:el8\",\n+            \"pretty_name\":
        \"AlmaLinux 8.3 Beta (Purple Manul)\",\n+            \"ansi_color\": \"0;34\",\n+
        \           \"cpe_name\": \"cpe:/o:almalinux:almalinux:8.3:beta\",\n+            \"home_url\":
        \"https://almalinux.org/\",\n+            \"bug_report_url\": \"https://bugs.almalinux.org/\",\n+
        \           \"almalinux_mantisbt_project\": \"AlmaLinux-8\",\n+            \"almalinux_mantisbt_project_version\":
        \"8\",\n+            \"codename\": \"Purple Manul\"\n+        }\n+    },\n+
        \   \"input\": {\n+        \"/etc/centos-release\": \"AlmaLinux release 8.3
        Beta (Purple Manul)\\n\",\n+        \"/etc/redhat-release\": \"AlmaLinux release
        8.3 Beta (Purple Manul)\\n\",\n+        \"/etc/system-release\": \"AlmaLinux
        release 8.3 Beta (Purple Manul)\\n\",\n+        \"/etc/os-release\": \"NAME=\\\"AlmaLinux\\\"\\nVERSION=\\\"8.3
        (Purple Manul)\\\"\\nID=\\\"almalinux\\\"\\nID_LIKE=\\\"rhel centos fedora\\\"\\nVERSION_ID=\\\"8.3\\\"\\nPLATFORM_ID=\\\"platform:el8\\\"\\nPRETTY_NAME=\\\"AlmaLinux
        8.3 Beta (Purple Manul)\\\"\\nANSI_COLOR=\\\"0;34\\\"\\nCPE_NAME=\\\"cpe:/o:almalinux:almalinux:8.3:beta\\\"\\nHOME_URL=\\\"https://almalinux.org/\\\"\\nBUG_REPORT_URL=\\\"https://bugs.almalinux.org/\\\"\\n\\nALMALINUX_MANTISBT_PROJECT=\\\"AlmaLinux-8\\\"
        \                       \\nALMALINUX_MANTISBT_PROJECT_VERSION=\\\"8\\\"                       \\n\\n\",\n+
        \       \"/usr/lib/os-release\": \"NAME=\\\"AlmaLinux\\\"\\nVERSION=\\\"8.3
        (Purple Manul)\\\"\\nID=\\\"almalinux\\\"\\nID_LIKE=\\\"rhel centos fedora\\\"\\nVERSION_ID=\\\"8.3\\\"\\nPLATFORM_ID=\\\"platform:el8\\\"\\nPRETTY_NAME=\\\"AlmaLinux
        8.3 Beta (Purple Manul)\\\"\\nANSI_COLOR=\\\"0;34\\\"\\nCPE_NAME=\\\"cpe:/o:almalinux:almalinux:8.3:beta\\\"\\nHOME_URL=\\\"https://almalinux.org/\\\"\\nBUG_REPORT_URL=\\\"https://bugs.almalinux.org/\\\"\\n\\nALMALINUX_MANTISBT_PROJECT=\\\"AlmaLinux-8\\\"
        \                       \\nALMALINUX_MANTISBT_PROJECT_VERSION=\\\"8\\\"                       \\n\\n\"\n+
        \   },\n+    \"platform.dist\": [\n+        \"almalinux\",\n+        \"8.3\",\n+
        \       \"Purple Manul\"\n+    ],\n+    \"result\": {\n+        \"distribution\":
        \"AlmaLinux\",\n+        \"distribution_version\": \"8.3\",\n+        \"distribution_release\":
        \"Purple Manul\",\n+        \"distribution_major_version\": \"8\",\n+        \"os_family\":
        \"RedHat\"\n+    },\n+    \"platform.release\": \"4.18.0-240.el8.x86_64\"\n+}\n"
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com; font-src
        github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/plain; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:54 GMT
      Etag:
      - W/"04014d3dc76f848ff6231b038782447d"
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Set-Cookie:
      - logged_in=no; domain=.github.com; path=/; expires=Fri, 25 Feb 2022 03:06:54
        GMT; secure; HttpOnly; SameSite=Lax
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5A2:7E2A:A71C77:D06A33:6037144E
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 200
      message: OK
    url: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73541.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Cookie:
      - logged_in=no
    method: GET
    uri: https://api.github.com/repos/ansible/ansible/pulls/73541
  response:
    body:
      string: "{\"url\":\"https://api.github.com/repos/ansible/ansible/pulls/73541\",\"id\":570476127,\"node_id\":\"MDExOlB1bGxSZXF1ZXN0NTcwNDc2MTI3\",\"html_url\":\"https://github.com/ansible/ansible/pull/73541\",\"diff_url\":\"https://github.com/ansible/ansible/pull/73541.diff\",\"patch_url\":\"https://github.com/ansible/ansible/pull/73541.patch\",\"issue_url\":\"https://api.github.com/repos/ansible/ansible/issues/73541\",\"number\":73541,\"state\":\"closed\",\"locked\":false,\"title\":\"Add
        AlmaLinux to the family of Red Hat-like operating systems\",\"user\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"body\":\"#####
        SUMMARY\\r\\n<!--- Describe the change below, including rationale and design
        decisions -->\\r\\nReplaces #73458\\r\\n<!--- HINT: Include \\\"Fixes #nnn\\\"
        if you are fixing an existing issue -->\\r\\n\\r\\n##### ISSUE TYPE\\r\\n<!---
        Pick one below and delete the rest -->\\r\\n- Bugfix Pull Request\\r\\n\\r\\n#####
        COMPONENT NAME\\r\\n<!--- Write the short name of the module, plugin, task
        or feature below -->\\r\\n`lib/ansible/module_utils/facts/system/distribution.py`\",\"created_at\":\"2021-02-09T17:35:47Z\",\"updated_at\":\"2021-02-11T18:59:55Z\",\"closed_at\":\"2021-02-09T18:04:39Z\",\"merged_at\":\"2021-02-09T18:04:39Z\",\"merge_commit_sha\":\"2f5c83dfb1855342389436e72d64cf7afe9698e6\",\"assignee\":null,\"assignees\":[],\"requested_reviewers\":[],\"requested_teams\":[],\"labels\":[{\"id\":1742671738,\"node_id\":\"MDU6TGFiZWwxNzQyNjcxNzM4\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/affects_2.11\",\"name\":\"affects_2.11\",\"color\":\"5319e7\",\"default\":false,\"description\":\"\"},{\"id\":785271699,\"node_id\":\"MDU6TGFiZWw3ODUyNzE2OTk=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/bug\",\"name\":\"bug\",\"color\":\"fbca04\",\"default\":true,\"description\":\"This
        issue/PR relates to a bug.\"},{\"id\":513652538,\"node_id\":\"MDU6TGFiZWw1MTM2NTI1Mzg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/core_review\",\"name\":\"core_review\",\"color\":\"ededed\",\"default\":false,\"description\":\"In
        order to be merged, this PR must follow the core review workflow.\"},{\"id\":636327968,\"node_id\":\"MDU6TGFiZWw2MzYzMjc5Njg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:community\",\"name\":\"support:community\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible community.\"},{\"id\":636352796,\"node_id\":\"MDU6TGFiZWw2MzYzNTI3OTY=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:core\",\"name\":\"support:core\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible Engineering Team.\"}],\"milestone\":null,\"draft\":false,\"commits_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73541/commits\",\"review_comments_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73541/comments\",\"review_comment_url\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/issues/73541/comments\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/3ea9b87e7ee0c0dcb807a22bf4584732d90ed881\",\"head\":{\"label\":\"samdoran:add-alma-linux\",\"ref\":\"add-alma-linux\",\"sha\":\"3ea9b87e7ee0c0dcb807a22bf4584732d90ed881\",\"user\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"repo\":{\"id\":70726272,\"node_id\":\"MDEwOlJlcG9zaXRvcnk3MDcyNjI3Mg==\",\"name\":\"ansible\",\"full_name\":\"samdoran/ansible\",\"private\":false,\"owner\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"html_url\":\"https://github.com/samdoran/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy. Avoid writing scripts or custom code to deploy
        and update your applications\u2014 automate in a language that approaches
        plain English, using SSH, with no agents to install on remote systems.\",\"fork\":true,\"url\":\"https://api.github.com/repos/samdoran/ansible\",\"forks_url\":\"https://api.github.com/repos/samdoran/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/samdoran/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/samdoran/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/samdoran/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/samdoran/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/samdoran/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/samdoran/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/samdoran/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/samdoran/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/samdoran/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/samdoran/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/samdoran/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/samdoran/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/samdoran/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/samdoran/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/samdoran/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/samdoran/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/samdoran/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/samdoran/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/samdoran/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/samdoran/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/samdoran/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/samdoran/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/samdoran/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/samdoran/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/samdoran/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/samdoran/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/samdoran/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/samdoran/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/samdoran/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/samdoran/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/samdoran/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/samdoran/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/samdoran/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/samdoran/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/samdoran/ansible/deployments\",\"created_at\":\"2016-10-12T17:53:34Z\",\"updated_at\":\"2020-11-19T13:40:09Z\",\"pushed_at\":\"2021-02-24T22:39:54Z\",\"git_url\":\"git://github.com/samdoran/ansible.git\",\"ssh_url\":\"git@github.com:samdoran/ansible.git\",\"clone_url\":\"https://github.com/samdoran/ansible.git\",\"svn_url\":\"https://github.com/samdoran/ansible\",\"homepage\":\"http://ansible.com/\",\"size\":187248,\"stargazers_count\":1,\"watchers_count\":1,\"language\":\"Python\",\"has_issues\":false,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":1,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":0,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":1,\"open_issues\":0,\"watchers\":1,\"default_branch\":\"devel\"}},\"base\":{\"label\":\"ansible:devel\",\"ref\":\"devel\",\"sha\":\"ca448f7c350fae8080dcfec648342d2fc8837da0\",\"user\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"repo\":{\"id\":3638964,\"node_id\":\"MDEwOlJlcG9zaXRvcnkzNjM4OTY0\",\"name\":\"ansible\",\"full_name\":\"ansible/ansible\",\"private\":false,\"owner\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"html_url\":\"https://github.com/ansible/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy and maintain. Automate everything from code deployment
        to network configuration to cloud management, in a language that approaches
        plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com.\",\"fork\":false,\"url\":\"https://api.github.com/repos/ansible/ansible\",\"forks_url\":\"https://api.github.com/repos/ansible/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/ansible/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/ansible/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/ansible/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/ansible/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/ansible/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/ansible/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/ansible/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/ansible/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/ansible/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/ansible/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/ansible/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/ansible/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/ansible/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/ansible/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/ansible/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/ansible/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/ansible/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/ansible/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/ansible/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/ansible/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/ansible/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/ansible/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/ansible/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/ansible/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/ansible/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/ansible/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/ansible/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/ansible/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/ansible/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/ansible/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/ansible/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/ansible/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/ansible/ansible/deployments\",\"created_at\":\"2012-03-06T14:58:02Z\",\"updated_at\":\"2021-02-25T00:16:06Z\",\"pushed_at\":\"2021-02-25T00:21:00Z\",\"git_url\":\"git://github.com/ansible/ansible.git\",\"ssh_url\":\"org-1507452@github.com:ansible/ansible.git\",\"clone_url\":\"https://github.com/ansible/ansible.git\",\"svn_url\":\"https://github.com/ansible/ansible\",\"homepage\":\"https://www.ansible.com/\",\"size\":194935,\"stargazers_count\":47012,\"watchers_count\":47012,\"language\":\"Python\",\"has_issues\":true,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":20304,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":1887,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":20304,\"open_issues\":1887,\"watchers\":47012,\"default_branch\":\"devel\"}},\"_links\":{\"self\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73541\"},\"html\":{\"href\":\"https://github.com/ansible/ansible/pull/73541\"},\"issue\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73541\"},\"comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73541/comments\"},\"review_comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73541/comments\"},\"review_comment\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\"},\"commits\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73541/commits\"},\"statuses\":{\"href\":\"https://api.github.com/repos/ansible/ansible/statuses/3ea9b87e7ee0c0dcb807a22bf4584732d90ed881\"}},\"author_association\":\"MEMBER\",\"auto_merge\":null,\"active_lock_reason\":null,\"merged\":true,\"mergeable\":null,\"rebaseable\":null,\"mergeable_state\":\"unknown\",\"merged_by\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"comments\":0,\"review_comments\":0,\"maintainer_can_modify\":false,\"commits\":4,\"additions\":56,\"deletions\":1,\"changed_files\":3}"
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Access-Control-Expose-Headers:
      - ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes,
        X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
      Cache-Control:
      - private, max-age=60, s-maxage=60
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - default-src 'none'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:55 GMT
      Etag:
      - W/"cc7f0d2436a5943022f45da4b999e7ece747f0da8323122aeb756ddcecf1a7d5"
      Last-Modified:
      - Thu, 11 Feb 2021 18:59:55 GMT
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept, Authorization, Cookie, X-GitHub-OTP
      - Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes:
      - ''
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Media-Type:
      - github.cloak-preview, github.groot-preview; format=json
      X-GitHub-Request-Id:
      - 818A:149F:8B01E0:F0577D:6037144E
      X-OAuth-Scopes:
      - repo, workflow
      X-RateLimit-Limit:
      - '5000'
      X-RateLimit-Remaining:
      - '4201'
      X-RateLimit-Reset:
      - '1614224282'
      X-XSS-Protection:
      - 1; mode=block
      x-ratelimit-used:
      - '799'
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/ansible/ansible/pulls/73541
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Cookie:
      - logged_in=no
      Host:
      - github.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://github.com/ansible/ansible/pull/73541.diff
  response:
    body: {}
    headers:
      Cache-Control:
      - no-cache
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com online.visualstudio.com/api/v1/locations;
        font-src github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/html; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:55 GMT
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Location:
      - https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73541.diff
      Referrer-Policy:
      - no-referrer-when-downgrade
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5A6:17E7:94D4D9:B6680A:6037144F
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 302
      message: Found
    url: https://github.com/ansible/ansible/pull/73541.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Host:
      - patch-diff.githubusercontent.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73541.diff
  response:
    body:
      string: "diff --git a/changelogs/fragments/support_almalinux.yml b/changelogs/fragments/support_almalinux.yml\nnew
        file mode 100644\nindex 0000000000000..4dbc040a62f1e\n--- /dev/null\n+++ b/changelogs/fragments/support_almalinux.yml\n@@
        -0,0 +1,2 @@\n+bugfixes:\n+  - add AlmaLinux to fact gathering (https://github.com/ansible/ansible/pull/73458)\ndiff
        --git a/lib/ansible/module_utils/facts/system/distribution.py b/lib/ansible/module_utils/facts/system/distribution.py\nindex
        a31aa197f573e..fd49b3a6fbd06 100644\n--- a/lib/ansible/module_utils/facts/system/distribution.py\n+++
        b/lib/ansible/module_utils/facts/system/distribution.py\n@@ -464,7 +464,7
        @@ class Distribution(object):\n     OS_FAMILY_MAP = {'RedHat': ['RedHat',
        'Fedora', 'CentOS', 'Scientific', 'SLC',\n                                 'Ascendos',
        'CloudLinux', 'PSBM', 'OracleLinux', 'OVS',\n                                 'OEL',
        'Amazon', 'Virtuozzo', 'XenServer', 'Alibaba',\n-                                'EulerOS',
        'openEuler'],\n+                                'EulerOS', 'openEuler', 'AlmaLinux'],\n
        \                     'Debian': ['Debian', 'Ubuntu', 'Raspbian', 'Neon', 'KDE
        neon',\n                                 'Linux Mint', 'SteamOS', 'Devuan',
        'Kali', 'Cumulus Linux',\n                                 'Pop!_OS', 'Parrot',
        'Pardus GNU/Linux'],\ndiff --git a/test/units/module_utils/facts/system/distribution/fixtures/almalinux_8_3_beta.json
        b/test/units/module_utils/facts/system/distribution/fixtures/almalinux_8_3_beta.json\nnew
        file mode 100644\nindex 0000000000000..2d8df50bf1275\n--- /dev/null\n+++ b/test/units/module_utils/facts/system/distribution/fixtures/almalinux_8_3_beta.json\n@@
        -0,0 +1,53 @@\n+{\n+    \"name\": \"AlmaLinux 8.3\",\n+    \"distro\": {\n+
        \       \"codename\": \"Purple Manul\",\n+        \"id\": \"almalinux\",\n+
        \       \"name\": \"AlmaLinux\",\n+        \"version\": \"8.3\",\n+        \"version_best\":
        \"8.3\",\n+        \"lsb_release_info\": {\n+            \"lsb_version\":
        \":core-4.1-amd64:core-4.1-noarch\",\n+            \"distributor_id\": \"AlmaLinux\",\n+
        \           \"description\": \"AlmaLinux release 8.3 Beta (Purple Manul)\",\n+
        \           \"release\": \"8.3\",\n+            \"codename\": \"PurpleManul\"\n+
        \       },\n+        \"os_release_info\": {\n+            \"name\": \"AlmaLinux\",\n+
        \           \"version\": \"8.3 (Purple Manul)\",\n+            \"id\": \"almalinux\",\n+
        \           \"id_like\": \"rhel centos fedora\",\n+            \"version_id\":
        \"8.3\",\n+            \"platform_id\": \"platform:el8\",\n+            \"pretty_name\":
        \"AlmaLinux 8.3 Beta (Purple Manul)\",\n+            \"ansi_color\": \"0;34\",\n+
        \           \"cpe_name\": \"cpe:/o:almalinux:almalinux:8.3:beta\",\n+            \"home_url\":
        \"https://almalinux.org/\",\n+            \"bug_report_url\": \"https://bugs.almalinux.org/\",\n+
        \           \"almalinux_mantisbt_project\": \"AlmaLinux-8\",\n+            \"almalinux_mantisbt_project_version\":
        \"8\",\n+            \"codename\": \"Purple Manul\"\n+        }\n+    },\n+
        \   \"input\": {\n+        \"/etc/centos-release\": \"AlmaLinux release 8.3
        Beta (Purple Manul)\\n\",\n+        \"/etc/redhat-release\": \"AlmaLinux release
        8.3 Beta (Purple Manul)\\n\",\n+        \"/etc/system-release\": \"AlmaLinux
        release 8.3 Beta (Purple Manul)\\n\",\n+        \"/etc/os-release\": \"NAME=\\\"AlmaLinux\\\"\\nVERSION=\\\"8.3
        (Purple Manul)\\\"\\nID=\\\"almalinux\\\"\\nID_LIKE=\\\"rhel centos fedora\\\"\\nVERSION_ID=\\\"8.3\\\"\\nPLATFORM_ID=\\\"platform:el8\\\"\\nPRETTY_NAME=\\\"AlmaLinux
        8.3 Beta (Purple Manul)\\\"\\nANSI_COLOR=\\\"0;34\\\"\\nCPE_NAME=\\\"cpe:/o:almalinux:almalinux:8.3:beta\\\"\\nHOME_URL=\\\"https://almalinux.org/\\\"\\nBUG_REPORT_URL=\\\"https://bugs.almalinux.org/\\\"\\n\\nALMALINUX_MANTISBT_PROJECT=\\\"AlmaLinux-8\\\"
        \                       \\nALMALINUX_MANTISBT_PROJECT_VERSION=\\\"8\\\"                       \\n\\n\",\n+
        \       \"/usr/lib/os-release\": \"NAME=\\\"AlmaLinux\\\"\\nVERSION=\\\"8.3
        (Purple Manul)\\\"\\nID=\\\"almalinux\\\"\\nID_LIKE=\\\"rhel centos fedora\\\"\\nVERSION_ID=\\\"8.3\\\"\\nPLATFORM_ID=\\\"platform:el8\\\"\\nPRETTY_NAME=\\\"AlmaLinux
        8.3 Beta (Purple Manul)\\\"\\nANSI_COLOR=\\\"0;34\\\"\\nCPE_NAME=\\\"cpe:/o:almalinux:almalinux:8.3:beta\\\"\\nHOME_URL=\\\"https://almalinux.org/\\\"\\nBUG_REPORT_URL=\\\"https://bugs.almalinux.org/\\\"\\n\\nALMALINUX_MANTISBT_PROJECT=\\\"AlmaLinux-8\\\"
        \                       \\nALMALINUX_MANTISBT_PROJECT_VERSION=\\\"8\\\"                       \\n\\n\"\n+
        \   },\n+    \"platform.dist\": [\n+        \"almalinux\",\n+        \"8.3\",\n+
        \       \"Purple Manul\"\n+    ],\n+    \"result\": {\n+        \"distribution\":
        \"AlmaLinux\",\n+        \"distribution_version\": \"8.3\",\n+        \"distribution_release\":
        \"Purple Manul\",\n+        \"distribution_major_version\": \"8\",\n+        \"os_family\":
        \"RedHat\"\n+    },\n+    \"platform.release\": \"4.18.0-240.el8.x86_64\"\n+}\n"
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com; font-src
        github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/plain; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:55 GMT
      Etag:
      - W/"04014d3dc76f848ff6231b038782447d"
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Set-Cookie:
      - logged_in=no; domain=.github.com; path=/; expires=Fri, 25 Feb 2022 03:06:55
        GMT; secure; HttpOnly; SameSite=Lax
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5A2:7E2A:A71CF3:D06ACB:6037144E
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 200
      message: OK
    url: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73541.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Cookie:
      - logged_in=no
    method: GET
    uri: https://api.github.com/repos/ansible/ansible/pulls/73493
  response:
    body:
      string: "{\"url\":\"https://api.github.com/repos/ansible/ansible/pulls/73493\",\"id\":567978006,\"node_id\":\"MDExOlB1bGxSZXF1ZXN0NTY3OTc4MDA2\",\"html_url\":\"https://github.com/ansible/ansible/pull/73493\",\"diff_url\":\"https://github.com/ansible/ansible/pull/73493.diff\",\"patch_url\":\"https://github.com/ansible/ansible/pull/73493.patch\",\"issue_url\":\"https://api.github.com/repos/ansible/ansible/issues/73493\",\"number\":73493,\"state\":\"closed\",\"locked\":false,\"title\":\"no_log
        mask suboption fallback values and defaults CVE-2021-20228 - 2.9\",\"user\":{\"login\":\"jborean93\",\"id\":8462645,\"node_id\":\"MDQ6VXNlcjg0NjI2NDU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/8462645?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/jborean93\",\"html_url\":\"https://github.com/jborean93\",\"followers_url\":\"https://api.github.com/users/jborean93/followers\",\"following_url\":\"https://api.github.com/users/jborean93/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/jborean93/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/jborean93/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/jborean93/subscriptions\",\"organizations_url\":\"https://api.github.com/users/jborean93/orgs\",\"repos_url\":\"https://api.github.com/users/jborean93/repos\",\"events_url\":\"https://api.github.com/users/jborean93/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/jborean93/received_events\",\"type\":\"User\",\"site_admin\":false},\"body\":\"(cherry
        picked from commit 0cdc410dce6658e93c06fa27e0100ddbb11e7015)\\r\\n\\r\\n#####
        SUMMARY\\r\\nBackport of https://github.com/ansible/ansible/pull/73487\\r\\n\\r\\n#####
        ISSUE TYPE\\r\\n- Bugfix Pull Request\\r\\n\\r\\n##### COMPONENT NAME\\r\\nbasic.py\",\"created_at\":\"2021-02-04T23:20:43Z\",\"updated_at\":\"2021-02-17T22:45:20Z\",\"closed_at\":\"2021-02-07T06:07:57Z\",\"merged_at\":\"2021-02-07T06:07:57Z\",\"merge_commit_sha\":\"49ebd509df9de1c1fc1bcee00e79a835dd00662c\",\"assignee\":null,\"assignees\":[],\"requested_reviewers\":[],\"requested_teams\":[],\"labels\":[{\"id\":1316917295,\"node_id\":\"MDU6TGFiZWwxMzE2OTE3Mjk1\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/affects_2.9\",\"name\":\"affects_2.9\",\"color\":\"5319e7\",\"default\":false,\"description\":\"This
        issue/PR affects Ansible v2.9\"},{\"id\":266246971,\"node_id\":\"MDU6TGFiZWwyNjYyNDY5NzE=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/backport\",\"name\":\"backport\",\"color\":\"00ff00\",\"default\":false,\"description\":\"This
        PR does not target the devel branch.\"},{\"id\":785271699,\"node_id\":\"MDU6TGFiZWw3ODUyNzE2OTk=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/bug\",\"name\":\"bug\",\"color\":\"fbca04\",\"default\":true,\"description\":\"This
        issue/PR relates to a bug.\"},{\"id\":513652538,\"node_id\":\"MDU6TGFiZWw1MTM2NTI1Mzg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/core_review\",\"name\":\"core_review\",\"color\":\"ededed\",\"default\":false,\"description\":\"In
        order to be merged, this PR must follow the core review workflow.\"},{\"id\":636327968,\"node_id\":\"MDU6TGFiZWw2MzYzMjc5Njg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:community\",\"name\":\"support:community\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible community.\"},{\"id\":636352796,\"node_id\":\"MDU6TGFiZWw2MzYzNTI3OTY=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:core\",\"name\":\"support:core\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible Engineering Team.\"}],\"milestone\":null,\"draft\":false,\"commits_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73493/commits\",\"review_comments_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73493/comments\",\"review_comment_url\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/issues/73493/comments\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/c9fbf167d46985737f6c39069bebb2156a4f8f00\",\"head\":{\"label\":\"jborean93:nolog-suboptions-2.9\",\"ref\":\"nolog-suboptions-2.9\",\"sha\":\"c9fbf167d46985737f6c39069bebb2156a4f8f00\",\"user\":{\"login\":\"jborean93\",\"id\":8462645,\"node_id\":\"MDQ6VXNlcjg0NjI2NDU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/8462645?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/jborean93\",\"html_url\":\"https://github.com/jborean93\",\"followers_url\":\"https://api.github.com/users/jborean93/followers\",\"following_url\":\"https://api.github.com/users/jborean93/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/jborean93/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/jborean93/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/jborean93/subscriptions\",\"organizations_url\":\"https://api.github.com/users/jborean93/orgs\",\"repos_url\":\"https://api.github.com/users/jborean93/repos\",\"events_url\":\"https://api.github.com/users/jborean93/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/jborean93/received_events\",\"type\":\"User\",\"site_admin\":false},\"repo\":{\"id\":72729201,\"node_id\":\"MDEwOlJlcG9zaXRvcnk3MjcyOTIwMQ==\",\"name\":\"ansible\",\"full_name\":\"jborean93/ansible\",\"private\":false,\"owner\":{\"login\":\"jborean93\",\"id\":8462645,\"node_id\":\"MDQ6VXNlcjg0NjI2NDU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/8462645?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/jborean93\",\"html_url\":\"https://github.com/jborean93\",\"followers_url\":\"https://api.github.com/users/jborean93/followers\",\"following_url\":\"https://api.github.com/users/jborean93/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/jborean93/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/jborean93/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/jborean93/subscriptions\",\"organizations_url\":\"https://api.github.com/users/jborean93/orgs\",\"repos_url\":\"https://api.github.com/users/jborean93/repos\",\"events_url\":\"https://api.github.com/users/jborean93/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/jborean93/received_events\",\"type\":\"User\",\"site_admin\":false},\"html_url\":\"https://github.com/jborean93/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy. Avoid writing scripts or custom code to deploy
        and update your applications\u2014 automate in a language that approaches
        plain English, using SSH, with no agents to install on remote systems.\",\"fork\":true,\"url\":\"https://api.github.com/repos/jborean93/ansible\",\"forks_url\":\"https://api.github.com/repos/jborean93/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/jborean93/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/jborean93/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/jborean93/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/jborean93/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/jborean93/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/jborean93/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/jborean93/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/jborean93/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/jborean93/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/jborean93/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/jborean93/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/jborean93/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/jborean93/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/jborean93/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/jborean93/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/jborean93/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/jborean93/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/jborean93/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/jborean93/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/jborean93/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/jborean93/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/jborean93/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/jborean93/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/jborean93/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/jborean93/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/jborean93/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/jborean93/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/jborean93/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/jborean93/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/jborean93/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/jborean93/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/jborean93/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/jborean93/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/jborean93/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/jborean93/ansible/deployments\",\"created_at\":\"2016-11-03T09:27:23Z\",\"updated_at\":\"2021-02-05T00:08:31Z\",\"pushed_at\":\"2021-02-07T23:58:10Z\",\"git_url\":\"git://github.com/jborean93/ansible.git\",\"ssh_url\":\"git@github.com:jborean93/ansible.git\",\"clone_url\":\"https://github.com/jborean93/ansible.git\",\"svn_url\":\"https://github.com/jborean93/ansible\",\"homepage\":\"http://ansible.com/\",\"size\":173668,\"stargazers_count\":0,\"watchers_count\":0,\"language\":\"Python\",\"has_issues\":false,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":0,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":0,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":0,\"open_issues\":0,\"watchers\":0,\"default_branch\":\"devel\"}},\"base\":{\"label\":\"ansible:stable-2.9\",\"ref\":\"stable-2.9\",\"sha\":\"e9838486bd6b7becf9dac0a94852aa320b4479e4\",\"user\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"repo\":{\"id\":3638964,\"node_id\":\"MDEwOlJlcG9zaXRvcnkzNjM4OTY0\",\"name\":\"ansible\",\"full_name\":\"ansible/ansible\",\"private\":false,\"owner\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"html_url\":\"https://github.com/ansible/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy and maintain. Automate everything from code deployment
        to network configuration to cloud management, in a language that approaches
        plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com.\",\"fork\":false,\"url\":\"https://api.github.com/repos/ansible/ansible\",\"forks_url\":\"https://api.github.com/repos/ansible/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/ansible/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/ansible/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/ansible/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/ansible/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/ansible/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/ansible/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/ansible/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/ansible/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/ansible/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/ansible/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/ansible/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/ansible/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/ansible/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/ansible/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/ansible/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/ansible/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/ansible/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/ansible/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/ansible/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/ansible/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/ansible/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/ansible/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/ansible/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/ansible/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/ansible/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/ansible/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/ansible/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/ansible/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/ansible/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/ansible/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/ansible/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/ansible/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/ansible/ansible/deployments\",\"created_at\":\"2012-03-06T14:58:02Z\",\"updated_at\":\"2021-02-25T00:16:06Z\",\"pushed_at\":\"2021-02-25T00:21:00Z\",\"git_url\":\"git://github.com/ansible/ansible.git\",\"ssh_url\":\"org-1507452@github.com:ansible/ansible.git\",\"clone_url\":\"https://github.com/ansible/ansible.git\",\"svn_url\":\"https://github.com/ansible/ansible\",\"homepage\":\"https://www.ansible.com/\",\"size\":194935,\"stargazers_count\":47012,\"watchers_count\":47012,\"language\":\"Python\",\"has_issues\":true,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":20304,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":1887,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":20304,\"open_issues\":1887,\"watchers\":47012,\"default_branch\":\"devel\"}},\"_links\":{\"self\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73493\"},\"html\":{\"href\":\"https://github.com/ansible/ansible/pull/73493\"},\"issue\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73493\"},\"comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73493/comments\"},\"review_comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73493/comments\"},\"review_comment\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\"},\"commits\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73493/commits\"},\"statuses\":{\"href\":\"https://api.github.com/repos/ansible/ansible/statuses/c9fbf167d46985737f6c39069bebb2156a4f8f00\"}},\"author_association\":\"MEMBER\",\"auto_merge\":null,\"active_lock_reason\":null,\"merged\":true,\"mergeable\":null,\"rebaseable\":null,\"mergeable_state\":\"unknown\",\"merged_by\":{\"login\":\"relrod\",\"id\":43930,\"node_id\":\"MDQ6VXNlcjQzOTMw\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/43930?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/relrod\",\"html_url\":\"https://github.com/relrod\",\"followers_url\":\"https://api.github.com/users/relrod/followers\",\"following_url\":\"https://api.github.com/users/relrod/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/relrod/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/relrod/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/relrod/subscriptions\",\"organizations_url\":\"https://api.github.com/users/relrod/orgs\",\"repos_url\":\"https://api.github.com/users/relrod/repos\",\"events_url\":\"https://api.github.com/users/relrod/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/relrod/received_events\",\"type\":\"User\",\"site_admin\":false},\"comments\":3,\"review_comments\":0,\"maintainer_can_modify\":false,\"commits\":1,\"additions\":125,\"deletions\":11,\"changed_files\":7}"
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Access-Control-Expose-Headers:
      - ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes,
        X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
      Cache-Control:
      - private, max-age=60, s-maxage=60
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - default-src 'none'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:55 GMT
      Etag:
      - W/"87e1f4e1ff7cf5f59516d8e927dbcba58f3dda32a96b3fab5395d07d143c3f42"
      Last-Modified:
      - Wed, 17 Feb 2021 22:45:20 GMT
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept, Authorization, Cookie, X-GitHub-OTP
      - Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes:
      - ''
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Media-Type:
      - github.cloak-preview, github.groot-preview; format=json
      X-GitHub-Request-Id:
      - 818A:149F:8B0210:F057E2:6037144F
      X-OAuth-Scopes:
      - repo, workflow
      X-RateLimit-Limit:
      - '5000'
      X-RateLimit-Remaining:
      - '4200'
      X-RateLimit-Reset:
      - '1614224282'
      X-XSS-Protection:
      - 1; mode=block
      x-ratelimit-used:
      - '800'
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/ansible/ansible/pulls/73493
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Cookie:
      - logged_in=no
      Host:
      - github.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://github.com/ansible/ansible/pull/73493.diff
  response:
    body: {}
    headers:
      Cache-Control:
      - no-cache
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com online.visualstudio.com/api/v1/locations;
        font-src github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/html; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:56 GMT
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Location:
      - https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73493.diff
      Referrer-Policy:
      - no-referrer-when-downgrade
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5A8:56AD:8E5270:B2E516:6037144F
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 302
      message: Found
    url: https://github.com/ansible/ansible/pull/73493.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Host:
      - patch-diff.githubusercontent.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73493.diff
  response:
    body:
      string: "diff --git a/changelogs/fragments/no_log-fallback.yml b/changelogs/fragments/no_log-fallback.yml\nnew
        file mode 100644\nindex 0000000000000..6947531358576\n--- /dev/null\n+++ b/changelogs/fragments/no_log-fallback.yml\n@@
        -0,0 +1,2 @@\n+security_fixes:\n+  - '**security issue** - Mask default and
        fallback values for ``no_log`` module options (CVE-2021-20228)'\ndiff --git
        a/lib/ansible/module_utils/basic.py b/lib/ansible/module_utils/basic.py\nindex
        63715d3be5cd0..adb95e9706a77 100644\n--- a/lib/ansible/module_utils/basic.py\n+++
        b/lib/ansible/module_utils/basic.py\n@@ -725,6 +725,9 @@ def __init__(self,
        argument_spec, bypass_checks=False, no_log=False,\n                 if k not
        in self.argument_spec:\n                     self.argument_spec[k] = v\n \n+
        \       # Save parameter values that should never be logged\n+        self.no_log_values
        = set()\n+\n         self._load_params()\n         self._set_fallbacks()\n
        \n@@ -736,8 +739,6 @@ def __init__(self, argument_spec, bypass_checks=False,
        no_log=False,\n             print('\\n{\"failed\": true, \"msg\": \"Module
        alias error: %s\"}' % to_native(e))\n             sys.exit(1)\n \n-        #
        Save parameter values that should never be logged\n-        self.no_log_values
        = set()\n         self._handle_no_log_values()\n \n         # check the locale
        as set by the current environment, and reset to\n@@ -1926,14 +1927,15 @@ def
        _set_defaults(self, pre=True, spec=None, param=None):\n             param
        = self.params\n         for (k, v) in spec.items():\n             default
        = v.get('default', None)\n-            if pre is True:\n-                #
        this prevents setting defaults on required items\n-                if default
        is not None and k not in param:\n-                    param[k] = default\n-
        \           else:\n-                # make sure things without a default still
        get set None\n-                if k not in param:\n-                    param[k]
        = default\n+\n+            # This prevents setting defaults on required items
        on the 1st run,\n+            # otherwise will set things without a default
        to None on the 2nd.\n+            if k not in param and (default is not None
        or not pre):\n+                # Make sure any default value for no_log fields
        are masked.\n+                if v.get('no_log', False) and default:\n+                    self.no_log_values.add(default)\n+\n+
        \               param[k] = default\n \n     def _set_fallbacks(self, spec=None,
        param=None):\n         if spec is None:\n@@ -1953,9 +1955,13 @@ def _set_fallbacks(self,
        spec=None, param=None):\n                     else:\n                         fallback_args
        = item\n                 try:\n-                    param[k] = fallback_strategy(*fallback_args,
        **fallback_kwargs)\n+                    fallback_value = fallback_strategy(*fallback_args,
        **fallback_kwargs)\n                 except AnsibleFallbackNotFound:\n                     continue\n+
        \               else:\n+                    if v.get('no_log', False) and
        fallback_value:\n+                        self.no_log_values.add(fallback_value)\n+
        \                   param[k] = fallback_value\n \n     def _load_params(self):\n
        \        ''' read the input and set the params attribute.\ndiff --git a/test/integration/targets/module_utils/callback/pure_json.py
        b/test/integration/targets/module_utils/callback/pure_json.py\nnew file mode
        100644\nindex 0000000000000..1723d7bbe869b\n--- /dev/null\n+++ b/test/integration/targets/module_utils/callback/pure_json.py\n@@
        -0,0 +1,31 @@\n+# (c) 2021 Ansible Project\n+# GNU General Public License
        v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n+\n+from
        __future__ import (absolute_import, division, print_function)\n+__metaclass__
        = type\n+\n+DOCUMENTATION = '''\n+    name: pure_json\n+    type: stdout\n+
        \   short_description: only outputs the module results as json\n+'''\n+\n+import
        json\n+\n+from ansible.plugins.callback import CallbackBase\n+\n+\n+class
        CallbackModule(CallbackBase):\n+\n+    CALLBACK_VERSION = 2.0\n+    CALLBACK_TYPE
        = 'stdout'\n+    CALLBACK_NAME = 'pure_json'\n+\n+    def v2_runner_on_failed(self,
        result, ignore_errors=False):\n+        self._display.display(json.dumps(result._result))\n+\n+
        \   def v2_runner_on_ok(self, result):\n+        self._display.display(json.dumps(result._result))\n+\n+
        \   def v2_runner_on_skipped(self, result):\n+        self._display.display(json.dumps(result._result))\ndiff
        --git a/test/integration/targets/module_utils/library/test_no_log.py b/test/integration/targets/module_utils/library/test_no_log.py\nnew
        file mode 100644\nindex 0000000000000..770e0b3a17e0c\n--- /dev/null\n+++ b/test/integration/targets/module_utils/library/test_no_log.py\n@@
        -0,0 +1,35 @@\n+#!/usr/bin/python\n+# (c) 2021 Ansible Project\n+# GNU General
        Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n+\n+from
        __future__ import absolute_import, division, print_function\n+__metaclass__
        = type\n+\n+\n+from ansible.module_utils.basic import AnsibleModule, env_fallback\n+\n+\n+def
        main():\n+    module = AnsibleModule(\n+        argument_spec=dict(\n+            explicit_pass=dict(type='str',
        no_log=True),\n+            fallback_pass=dict(type='str', no_log=True, fallback=(env_fallback,
        ['SECRET_ENV'])),\n+            default_pass=dict(type='str', no_log=True,
        default='zyx'),\n+            normal=dict(type='str', default='plaintext'),\n+
        \           suboption=dict(\n+                type='dict',\n+                options=dict(\n+
        \                   explicit_sub_pass=dict(type='str', no_log=True),\n+                    fallback_sub_pass=dict(type='str',
        no_log=True, fallback=(env_fallback, ['SECRET_SUB_ENV'])),\n+                    default_sub_pass=dict(type='str',
        no_log=True, default='xvu'),\n+                    normal=dict(type='str',
        default='plaintext'),\n+                ),\n+            ),\n+        ),\n+
        \   )\n+\n+    module.exit_json(changed=False)\n+\n+\n+if __name__ == '__main__':\n+
        \   main()\ndiff --git a/test/integration/targets/module_utils/module_utils_test_no_log.yml
        b/test/integration/targets/module_utils/module_utils_test_no_log.yml\nnew
        file mode 100644\nindex 0000000000000..bad2efd495db2\n--- /dev/null\n+++ b/test/integration/targets/module_utils/module_utils_test_no_log.yml\n@@
        -0,0 +1,9 @@\n+# This is called by module_utils_vvvvv.yml with a custom callback\n+-
        hosts: testhost\n+  gather_facts: no\n+  tasks:\n+    - name: Check no_log
        invocation results\n+      test_no_log:\n+        explicit_pass: abc\n+        suboption:\n+
        \         explicit_sub_pass: def\ndiff --git a/test/integration/targets/module_utils/module_utils_vvvvv.yml
        b/test/integration/targets/module_utils/module_utils_vvvvv.yml\nnew file mode
        100644\nindex 0000000000000..1fd91d252f9a8\n--- /dev/null\n+++ b/test/integration/targets/module_utils/module_utils_vvvvv.yml\n@@
        -0,0 +1,27 @@\n+- hosts: testhost\n+  gather_facts: no\n+  tasks:\n+  # Invocation
        usually is output with 3vs or more, our callback plugin displays it anyway\n+
        \ - name: Check no_log invocation results\n+    command: ansible-playbook
        -i {{ inventory_file }} module_utils_test_no_log.yml\n+    environment:\n+
        \     ANSIBLE_CALLBACK_PLUGINS: callback\n+      ANSIBLE_STDOUT_CALLBACK:
        pure_json\n+      SECRET_ENV: ghi\n+      SECRET_SUB_ENV: jkl\n+    register:
        no_log_invocation\n+\n+  - set_fact:\n+      no_log_invocation: '{{ no_log_invocation.stdout
        | trim | from_json }}'\n+\n+  - name: check no log values from fallback or
        default are masked\n+    assert:\n+      that:\n+      - no_log_invocation.invocation.module_args.default_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.explicit_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.fallback_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.normal
        == 'plaintext'\n+      - no_log_invocation.invocation.module_args.suboption.default_sub_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.suboption.explicit_sub_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.suboption.fallback_sub_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.suboption.normal
        == 'plaintext'\ndiff --git a/test/integration/targets/module_utils/runme.sh
        b/test/integration/targets/module_utils/runme.sh\nindex efbb7f8208ca1..6adb84560bf4d
        100755\n--- a/test/integration/targets/module_utils/runme.sh\n+++ b/test/integration/targets/module_utils/runme.sh\n@@
        -2,5 +2,9 @@\n \n set -eux\n \n+# Keep the -vvvvv here. This acts as a test
        for testing that higher verbosity\n+# doesn't traceback with unicode in the
        custom module_utils directory path.\n+ansible-playbook module_utils_vvvvv.yml
        -i ../../inventory -vvvvv \"$@\"\n+\n ansible-playbook module_utils_test.yml
        -i ../../inventory -v \"$@\"\n ANSIBLE_MODULE_UTILS=other_mu_dir ansible-playbook
        module_utils_envvar.yml -i ../../inventory -v \"$@\"\n"
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com; font-src
        github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/plain; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:56 GMT
      Etag:
      - W/"466a4986aaedde4f7368fcf6b2d17092"
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Set-Cookie:
      - logged_in=no; domain=.github.com; path=/; expires=Fri, 25 Feb 2022 03:06:56
        GMT; secure; HttpOnly; SameSite=Lax
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5A2:7E2A:A71DE7:D06B4A:6037144F
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 200
      message: OK
    url: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73493.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Cookie:
      - logged_in=no
    method: GET
    uri: https://api.github.com/search/commits?per_page=100&q=hash:0cdc410dce6658e93c06fa27e0100ddbb11e7015+org:ansible+org:ansible-collections+is:public
  response:
    body:
      string: '{"total_count":1,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/ansible/ansible/commits/0cdc410dce6658e93c06fa27e0100ddbb11e7015","sha":"0cdc410dce6658e93c06fa27e0100ddbb11e7015","node_id":"MDY6Q29tbWl0MzYzODk2NDowY2RjNDEwZGNlNjY1OGU5M2MwNmZhMjdlMDEwMGRkYmIxMWU3MDE1","html_url":"https://github.com/ansible/ansible/commit/0cdc410dce6658e93c06fa27e0100ddbb11e7015","comments_url":"https://api.github.com/repos/ansible/ansible/commits/0cdc410dce6658e93c06fa27e0100ddbb11e7015/comments","commit":{"url":"https://api.github.com/repos/ansible/ansible/git/commits/0cdc410dce6658e93c06fa27e0100ddbb11e7015","author":{"date":"2021-02-05T09:11:55.000+10:00","name":"Jordan
        Borean","email":"jborean93@gmail.com"},"committer":{"date":"2021-02-05T09:11:55.000+10:00","name":"GitHub","email":"noreply@github.com"},"message":"no_log
        mask suboption fallback values and defaults CVE-2021-20228 (#73487)\n\n* no_log
        mask suboption fallback values and defaults\r\n\r\n* Added changelog\r\n\r\n*
        Remove lambda expression","tree":{"url":"https://api.github.com/repos/ansible/ansible/git/trees/50a5f0359f1d4e459e29e89c8aea127f881fb4b0","sha":"50a5f0359f1d4e459e29e89c8aea127f881fb4b0"},"comment_count":0},"author":{"login":"jborean93","id":8462645,"node_id":"MDQ6VXNlcjg0NjI2NDU=","avatar_url":"https://avatars.githubusercontent.com/u/8462645?v=4","gravatar_id":"","url":"https://api.github.com/users/jborean93","html_url":"https://github.com/jborean93","followers_url":"https://api.github.com/users/jborean93/followers","following_url":"https://api.github.com/users/jborean93/following{/other_user}","gists_url":"https://api.github.com/users/jborean93/gists{/gist_id}","starred_url":"https://api.github.com/users/jborean93/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jborean93/subscriptions","organizations_url":"https://api.github.com/users/jborean93/orgs","repos_url":"https://api.github.com/users/jborean93/repos","events_url":"https://api.github.com/users/jborean93/events{/privacy}","received_events_url":"https://api.github.com/users/jborean93/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"url":"https://api.github.com/repos/ansible/ansible/commits/4315e1880742eedc5b65fdc51fdc6a94afa61bd1","html_url":"https://github.com/ansible/ansible/commit/4315e1880742eedc5b65fdc51fdc6a94afa61bd1","sha":"4315e1880742eedc5b65fdc51fdc6a94afa61bd1"}],"repository":{"id":3638964,"node_id":"MDEwOlJlcG9zaXRvcnkzNjM4OTY0","name":"ansible","full_name":"ansible/ansible","private":false,"owner":{"login":"ansible","id":1507452,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/1507452?v=4","gravatar_id":"","url":"https://api.github.com/users/ansible","html_url":"https://github.com/ansible","followers_url":"https://api.github.com/users/ansible/followers","following_url":"https://api.github.com/users/ansible/following{/other_user}","gists_url":"https://api.github.com/users/ansible/gists{/gist_id}","starred_url":"https://api.github.com/users/ansible/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ansible/subscriptions","organizations_url":"https://api.github.com/users/ansible/orgs","repos_url":"https://api.github.com/users/ansible/repos","events_url":"https://api.github.com/users/ansible/events{/privacy}","received_events_url":"https://api.github.com/users/ansible/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/ansible/ansible","description":"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy and maintain. Automate everything from code deployment
        to network configuration to cloud management, in a language that approaches
        plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com.","fork":false,"url":"https://api.github.com/repos/ansible/ansible","forks_url":"https://api.github.com/repos/ansible/ansible/forks","keys_url":"https://api.github.com/repos/ansible/ansible/keys{/key_id}","collaborators_url":"https://api.github.com/repos/ansible/ansible/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/ansible/ansible/teams","hooks_url":"https://api.github.com/repos/ansible/ansible/hooks","issue_events_url":"https://api.github.com/repos/ansible/ansible/issues/events{/number}","events_url":"https://api.github.com/repos/ansible/ansible/events","assignees_url":"https://api.github.com/repos/ansible/ansible/assignees{/user}","branches_url":"https://api.github.com/repos/ansible/ansible/branches{/branch}","tags_url":"https://api.github.com/repos/ansible/ansible/tags","blobs_url":"https://api.github.com/repos/ansible/ansible/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/ansible/ansible/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/ansible/ansible/git/refs{/sha}","trees_url":"https://api.github.com/repos/ansible/ansible/git/trees{/sha}","statuses_url":"https://api.github.com/repos/ansible/ansible/statuses/{sha}","languages_url":"https://api.github.com/repos/ansible/ansible/languages","stargazers_url":"https://api.github.com/repos/ansible/ansible/stargazers","contributors_url":"https://api.github.com/repos/ansible/ansible/contributors","subscribers_url":"https://api.github.com/repos/ansible/ansible/subscribers","subscription_url":"https://api.github.com/repos/ansible/ansible/subscription","commits_url":"https://api.github.com/repos/ansible/ansible/commits{/sha}","git_commits_url":"https://api.github.com/repos/ansible/ansible/git/commits{/sha}","comments_url":"https://api.github.com/repos/ansible/ansible/comments{/number}","issue_comment_url":"https://api.github.com/repos/ansible/ansible/issues/comments{/number}","contents_url":"https://api.github.com/repos/ansible/ansible/contents/{+path}","compare_url":"https://api.github.com/repos/ansible/ansible/compare/{base}...{head}","merges_url":"https://api.github.com/repos/ansible/ansible/merges","archive_url":"https://api.github.com/repos/ansible/ansible/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/ansible/ansible/downloads","issues_url":"https://api.github.com/repos/ansible/ansible/issues{/number}","pulls_url":"https://api.github.com/repos/ansible/ansible/pulls{/number}","milestones_url":"https://api.github.com/repos/ansible/ansible/milestones{/number}","notifications_url":"https://api.github.com/repos/ansible/ansible/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/ansible/ansible/labels{/name}","releases_url":"https://api.github.com/repos/ansible/ansible/releases{/id}","deployments_url":"https://api.github.com/repos/ansible/ansible/deployments"},"score":1.0}]}'
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Access-Control-Expose-Headers:
      - ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes,
        X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
      Cache-Control:
      - no-cache
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - default-src 'none'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:56 GMT
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept, Authorization, Cookie, X-GitHub-OTP
      - Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes:
      - ''
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Media-Type:
      - github.cloak-preview, github.groot-preview; format=json
      X-GitHub-Request-Id:
      - 818A:149F:8B0290:F0587A:6037144F
      X-OAuth-Scopes:
      - repo, workflow
      X-RateLimit-Limit:
      - '30'
      X-RateLimit-Remaining:
      - '28'
      X-RateLimit-Reset:
      - '1614222472'
      X-XSS-Protection:
      - 1; mode=block
      x-ratelimit-used:
      - '2'
    status:
      code: 200
      message: OK
    url: https://api.github.com/search/commits?per_page=100&q=hash:0cdc410dce6658e93c06fa27e0100ddbb11e7015+org:ansible+org:ansible-collections+is:public
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Cookie:
      - logged_in=no
    method: GET
    uri: https://api.github.com/repos/ansible/ansible/commits/0cdc410dce6658e93c06fa27e0100ddbb11e7015/pulls?per_page=100
  response:
    body:
      string: "[{\"url\":\"https://api.github.com/repos/ansible/ansible/pulls/73487\",\"id\":567890636,\"node_id\":\"MDExOlB1bGxSZXF1ZXN0NTY3ODkwNjM2\",\"html_url\":\"https://github.com/ansible/ansible/pull/73487\",\"diff_url\":\"https://github.com/ansible/ansible/pull/73487.diff\",\"patch_url\":\"https://github.com/ansible/ansible/pull/73487.patch\",\"issue_url\":\"https://api.github.com/repos/ansible/ansible/issues/73487\",\"number\":73487,\"state\":\"closed\",\"locked\":false,\"title\":\"no_log
        mask suboption fallback values and defaults CVE-2021-20228\",\"user\":{\"login\":\"jborean93\",\"id\":8462645,\"node_id\":\"MDQ6VXNlcjg0NjI2NDU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/8462645?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/jborean93\",\"html_url\":\"https://github.com/jborean93\",\"followers_url\":\"https://api.github.com/users/jborean93/followers\",\"following_url\":\"https://api.github.com/users/jborean93/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/jborean93/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/jborean93/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/jborean93/subscriptions\",\"organizations_url\":\"https://api.github.com/users/jborean93/orgs\",\"repos_url\":\"https://api.github.com/users/jborean93/repos\",\"events_url\":\"https://api.github.com/users/jborean93/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/jborean93/received_events\",\"type\":\"User\",\"site_admin\":false},\"body\":\"#####
        SUMMARY\\r\\nMake sure default and fallback values for `no_log` fields are
        masked in the module output.\\r\\n\\r\\nCVE-2021-20228\\r\\n\\r\\n##### ISSUE
        TYPE\\r\\n- Bugfix Pull Request\\r\\n\\r\\n##### COMPONENT NAME\\r\\nbasic.py\",\"created_at\":\"2021-02-04T20:17:58Z\",\"updated_at\":\"2021-02-08T07:51:08Z\",\"closed_at\":\"2021-02-04T23:11:56Z\",\"merged_at\":\"2021-02-04T23:11:56Z\",\"merge_commit_sha\":\"0cdc410dce6658e93c06fa27e0100ddbb11e7015\",\"assignee\":null,\"assignees\":[],\"requested_reviewers\":[],\"requested_teams\":[],\"labels\":[{\"id\":1742671738,\"node_id\":\"MDU6TGFiZWwxNzQyNjcxNzM4\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/affects_2.11\",\"name\":\"affects_2.11\",\"color\":\"5319e7\",\"default\":false,\"description\":\"\"},{\"id\":785271699,\"node_id\":\"MDU6TGFiZWw3ODUyNzE2OTk=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/bug\",\"name\":\"bug\",\"color\":\"fbca04\",\"default\":true,\"description\":\"This
        issue/PR relates to a bug.\"},{\"id\":1285191701,\"node_id\":\"MDU6TGFiZWwxMjg1MTkxNzAx\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/collection\",\"name\":\"collection\",\"color\":\"b60205\",\"default\":false,\"description\":\"Related
        to Ansible Collections work\"},{\"id\":1991487163,\"node_id\":\"MDU6TGFiZWwxOTkxNDg3MTYz\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/collection:amazon.aws\",\"name\":\"collection:amazon.aws\",\"color\":\"ededed\",\"default\":false,\"description\":null},{\"id\":513652538,\"node_id\":\"MDU6TGFiZWw1MTM2NTI1Mzg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/core_review\",\"name\":\"core_review\",\"color\":\"ededed\",\"default\":false,\"description\":\"In
        order to be merged, this PR must follow the core review workflow.\"},{\"id\":636327968,\"node_id\":\"MDU6TGFiZWw2MzYzMjc5Njg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:community\",\"name\":\"support:community\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible community.\"},{\"id\":636352796,\"node_id\":\"MDU6TGFiZWw2MzYzNTI3OTY=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:core\",\"name\":\"support:core\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible Engineering Team.\"}],\"milestone\":null,\"draft\":false,\"commits_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73487/commits\",\"review_comments_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73487/comments\",\"review_comment_url\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/issues/73487/comments\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/fb53dc23950f22857e2b6c6c6e9771dd980c9be9\",\"head\":{\"label\":\"jborean93:nolog-suboptions\",\"ref\":\"nolog-suboptions\",\"sha\":\"fb53dc23950f22857e2b6c6c6e9771dd980c9be9\",\"user\":{\"login\":\"jborean93\",\"id\":8462645,\"node_id\":\"MDQ6VXNlcjg0NjI2NDU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/8462645?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/jborean93\",\"html_url\":\"https://github.com/jborean93\",\"followers_url\":\"https://api.github.com/users/jborean93/followers\",\"following_url\":\"https://api.github.com/users/jborean93/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/jborean93/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/jborean93/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/jborean93/subscriptions\",\"organizations_url\":\"https://api.github.com/users/jborean93/orgs\",\"repos_url\":\"https://api.github.com/users/jborean93/repos\",\"events_url\":\"https://api.github.com/users/jborean93/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/jborean93/received_events\",\"type\":\"User\",\"site_admin\":false},\"repo\":{\"id\":72729201,\"node_id\":\"MDEwOlJlcG9zaXRvcnk3MjcyOTIwMQ==\",\"name\":\"ansible\",\"full_name\":\"jborean93/ansible\",\"private\":false,\"owner\":{\"login\":\"jborean93\",\"id\":8462645,\"node_id\":\"MDQ6VXNlcjg0NjI2NDU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/8462645?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/jborean93\",\"html_url\":\"https://github.com/jborean93\",\"followers_url\":\"https://api.github.com/users/jborean93/followers\",\"following_url\":\"https://api.github.com/users/jborean93/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/jborean93/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/jborean93/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/jborean93/subscriptions\",\"organizations_url\":\"https://api.github.com/users/jborean93/orgs\",\"repos_url\":\"https://api.github.com/users/jborean93/repos\",\"events_url\":\"https://api.github.com/users/jborean93/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/jborean93/received_events\",\"type\":\"User\",\"site_admin\":false},\"html_url\":\"https://github.com/jborean93/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy. Avoid writing scripts or custom code to deploy
        and update your applications\u2014 automate in a language that approaches
        plain English, using SSH, with no agents to install on remote systems.\",\"fork\":true,\"url\":\"https://api.github.com/repos/jborean93/ansible\",\"forks_url\":\"https://api.github.com/repos/jborean93/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/jborean93/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/jborean93/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/jborean93/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/jborean93/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/jborean93/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/jborean93/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/jborean93/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/jborean93/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/jborean93/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/jborean93/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/jborean93/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/jborean93/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/jborean93/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/jborean93/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/jborean93/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/jborean93/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/jborean93/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/jborean93/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/jborean93/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/jborean93/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/jborean93/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/jborean93/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/jborean93/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/jborean93/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/jborean93/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/jborean93/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/jborean93/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/jborean93/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/jborean93/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/jborean93/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/jborean93/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/jborean93/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/jborean93/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/jborean93/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/jborean93/ansible/deployments\",\"created_at\":\"2016-11-03T09:27:23Z\",\"updated_at\":\"2021-02-05T00:08:31Z\",\"pushed_at\":\"2021-02-07T23:58:10Z\",\"git_url\":\"git://github.com/jborean93/ansible.git\",\"ssh_url\":\"git@github.com:jborean93/ansible.git\",\"clone_url\":\"https://github.com/jborean93/ansible.git\",\"svn_url\":\"https://github.com/jborean93/ansible\",\"homepage\":\"http://ansible.com/\",\"size\":173668,\"stargazers_count\":0,\"watchers_count\":0,\"language\":\"Python\",\"has_issues\":false,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":0,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":0,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":0,\"open_issues\":0,\"watchers\":0,\"default_branch\":\"devel\"}},\"base\":{\"label\":\"ansible:devel\",\"ref\":\"devel\",\"sha\":\"7fb7d138fb1f5e3977d800cd2a56c60a101713ee\",\"user\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"repo\":{\"id\":3638964,\"node_id\":\"MDEwOlJlcG9zaXRvcnkzNjM4OTY0\",\"name\":\"ansible\",\"full_name\":\"ansible/ansible\",\"private\":false,\"owner\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"html_url\":\"https://github.com/ansible/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy and maintain. Automate everything from code deployment
        to network configuration to cloud management, in a language that approaches
        plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com.\",\"fork\":false,\"url\":\"https://api.github.com/repos/ansible/ansible\",\"forks_url\":\"https://api.github.com/repos/ansible/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/ansible/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/ansible/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/ansible/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/ansible/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/ansible/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/ansible/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/ansible/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/ansible/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/ansible/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/ansible/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/ansible/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/ansible/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/ansible/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/ansible/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/ansible/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/ansible/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/ansible/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/ansible/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/ansible/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/ansible/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/ansible/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/ansible/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/ansible/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/ansible/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/ansible/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/ansible/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/ansible/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/ansible/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/ansible/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/ansible/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/ansible/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/ansible/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/ansible/ansible/deployments\",\"created_at\":\"2012-03-06T14:58:02Z\",\"updated_at\":\"2021-02-25T00:16:06Z\",\"pushed_at\":\"2021-02-25T00:21:00Z\",\"git_url\":\"git://github.com/ansible/ansible.git\",\"ssh_url\":\"org-1507452@github.com:ansible/ansible.git\",\"clone_url\":\"https://github.com/ansible/ansible.git\",\"svn_url\":\"https://github.com/ansible/ansible\",\"homepage\":\"https://www.ansible.com/\",\"size\":194935,\"stargazers_count\":47012,\"watchers_count\":47012,\"language\":\"Python\",\"has_issues\":true,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":20304,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":1887,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":20304,\"open_issues\":1887,\"watchers\":47012,\"default_branch\":\"devel\"}},\"_links\":{\"self\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73487\"},\"html\":{\"href\":\"https://github.com/ansible/ansible/pull/73487\"},\"issue\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73487\"},\"comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73487/comments\"},\"review_comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73487/comments\"},\"review_comment\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\"},\"commits\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73487/commits\"},\"statuses\":{\"href\":\"https://api.github.com/repos/ansible/ansible/statuses/fb53dc23950f22857e2b6c6c6e9771dd980c9be9\"}},\"author_association\":\"MEMBER\",\"auto_merge\":null,\"active_lock_reason\":null}]"
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Access-Control-Expose-Headers:
      - ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes,
        X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
      Cache-Control:
      - private, max-age=60, s-maxage=60
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - default-src 'none'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:56 GMT
      Etag:
      - W/"8c8d731efacfdd65c73b778d041968cb5853a9d54e83b86e2a2c08e37341d825"
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept, Authorization, Cookie, X-GitHub-OTP
      - Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes:
      - ''
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Media-Type:
      - github.cloak-preview, github.groot-preview; format=json
      X-GitHub-Request-Id:
      - 818A:149F:8B02AC:F058F4:60371450
      X-OAuth-Scopes:
      - repo, workflow
      X-RateLimit-Limit:
      - '5000'
      X-RateLimit-Remaining:
      - '4199'
      X-RateLimit-Reset:
      - '1614224282'
      X-XSS-Protection:
      - 1; mode=block
      x-ratelimit-used:
      - '801'
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/ansible/ansible/commits/0cdc410dce6658e93c06fa27e0100ddbb11e7015/pulls?per_page=100
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Cookie:
      - logged_in=no
    method: GET
    uri: https://api.github.com/repos/ansible/ansible/pulls/73487
  response:
    body:
      string: "{\"url\":\"https://api.github.com/repos/ansible/ansible/pulls/73487\",\"id\":567890636,\"node_id\":\"MDExOlB1bGxSZXF1ZXN0NTY3ODkwNjM2\",\"html_url\":\"https://github.com/ansible/ansible/pull/73487\",\"diff_url\":\"https://github.com/ansible/ansible/pull/73487.diff\",\"patch_url\":\"https://github.com/ansible/ansible/pull/73487.patch\",\"issue_url\":\"https://api.github.com/repos/ansible/ansible/issues/73487\",\"number\":73487,\"state\":\"closed\",\"locked\":false,\"title\":\"no_log
        mask suboption fallback values and defaults CVE-2021-20228\",\"user\":{\"login\":\"jborean93\",\"id\":8462645,\"node_id\":\"MDQ6VXNlcjg0NjI2NDU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/8462645?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/jborean93\",\"html_url\":\"https://github.com/jborean93\",\"followers_url\":\"https://api.github.com/users/jborean93/followers\",\"following_url\":\"https://api.github.com/users/jborean93/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/jborean93/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/jborean93/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/jborean93/subscriptions\",\"organizations_url\":\"https://api.github.com/users/jborean93/orgs\",\"repos_url\":\"https://api.github.com/users/jborean93/repos\",\"events_url\":\"https://api.github.com/users/jborean93/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/jborean93/received_events\",\"type\":\"User\",\"site_admin\":false},\"body\":\"#####
        SUMMARY\\r\\nMake sure default and fallback values for `no_log` fields are
        masked in the module output.\\r\\n\\r\\nCVE-2021-20228\\r\\n\\r\\n##### ISSUE
        TYPE\\r\\n- Bugfix Pull Request\\r\\n\\r\\n##### COMPONENT NAME\\r\\nbasic.py\",\"created_at\":\"2021-02-04T20:17:58Z\",\"updated_at\":\"2021-02-08T07:51:08Z\",\"closed_at\":\"2021-02-04T23:11:56Z\",\"merged_at\":\"2021-02-04T23:11:56Z\",\"merge_commit_sha\":\"0cdc410dce6658e93c06fa27e0100ddbb11e7015\",\"assignee\":null,\"assignees\":[],\"requested_reviewers\":[],\"requested_teams\":[],\"labels\":[{\"id\":1742671738,\"node_id\":\"MDU6TGFiZWwxNzQyNjcxNzM4\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/affects_2.11\",\"name\":\"affects_2.11\",\"color\":\"5319e7\",\"default\":false,\"description\":\"\"},{\"id\":785271699,\"node_id\":\"MDU6TGFiZWw3ODUyNzE2OTk=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/bug\",\"name\":\"bug\",\"color\":\"fbca04\",\"default\":true,\"description\":\"This
        issue/PR relates to a bug.\"},{\"id\":1285191701,\"node_id\":\"MDU6TGFiZWwxMjg1MTkxNzAx\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/collection\",\"name\":\"collection\",\"color\":\"b60205\",\"default\":false,\"description\":\"Related
        to Ansible Collections work\"},{\"id\":1991487163,\"node_id\":\"MDU6TGFiZWwxOTkxNDg3MTYz\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/collection:amazon.aws\",\"name\":\"collection:amazon.aws\",\"color\":\"ededed\",\"default\":false,\"description\":null},{\"id\":513652538,\"node_id\":\"MDU6TGFiZWw1MTM2NTI1Mzg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/core_review\",\"name\":\"core_review\",\"color\":\"ededed\",\"default\":false,\"description\":\"In
        order to be merged, this PR must follow the core review workflow.\"},{\"id\":636327968,\"node_id\":\"MDU6TGFiZWw2MzYzMjc5Njg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:community\",\"name\":\"support:community\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible community.\"},{\"id\":636352796,\"node_id\":\"MDU6TGFiZWw2MzYzNTI3OTY=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:core\",\"name\":\"support:core\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible Engineering Team.\"}],\"milestone\":null,\"draft\":false,\"commits_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73487/commits\",\"review_comments_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73487/comments\",\"review_comment_url\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/issues/73487/comments\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/fb53dc23950f22857e2b6c6c6e9771dd980c9be9\",\"head\":{\"label\":\"jborean93:nolog-suboptions\",\"ref\":\"nolog-suboptions\",\"sha\":\"fb53dc23950f22857e2b6c6c6e9771dd980c9be9\",\"user\":{\"login\":\"jborean93\",\"id\":8462645,\"node_id\":\"MDQ6VXNlcjg0NjI2NDU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/8462645?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/jborean93\",\"html_url\":\"https://github.com/jborean93\",\"followers_url\":\"https://api.github.com/users/jborean93/followers\",\"following_url\":\"https://api.github.com/users/jborean93/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/jborean93/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/jborean93/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/jborean93/subscriptions\",\"organizations_url\":\"https://api.github.com/users/jborean93/orgs\",\"repos_url\":\"https://api.github.com/users/jborean93/repos\",\"events_url\":\"https://api.github.com/users/jborean93/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/jborean93/received_events\",\"type\":\"User\",\"site_admin\":false},\"repo\":{\"id\":72729201,\"node_id\":\"MDEwOlJlcG9zaXRvcnk3MjcyOTIwMQ==\",\"name\":\"ansible\",\"full_name\":\"jborean93/ansible\",\"private\":false,\"owner\":{\"login\":\"jborean93\",\"id\":8462645,\"node_id\":\"MDQ6VXNlcjg0NjI2NDU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/8462645?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/jborean93\",\"html_url\":\"https://github.com/jborean93\",\"followers_url\":\"https://api.github.com/users/jborean93/followers\",\"following_url\":\"https://api.github.com/users/jborean93/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/jborean93/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/jborean93/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/jborean93/subscriptions\",\"organizations_url\":\"https://api.github.com/users/jborean93/orgs\",\"repos_url\":\"https://api.github.com/users/jborean93/repos\",\"events_url\":\"https://api.github.com/users/jborean93/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/jborean93/received_events\",\"type\":\"User\",\"site_admin\":false},\"html_url\":\"https://github.com/jborean93/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy. Avoid writing scripts or custom code to deploy
        and update your applications\u2014 automate in a language that approaches
        plain English, using SSH, with no agents to install on remote systems.\",\"fork\":true,\"url\":\"https://api.github.com/repos/jborean93/ansible\",\"forks_url\":\"https://api.github.com/repos/jborean93/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/jborean93/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/jborean93/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/jborean93/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/jborean93/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/jborean93/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/jborean93/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/jborean93/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/jborean93/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/jborean93/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/jborean93/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/jborean93/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/jborean93/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/jborean93/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/jborean93/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/jborean93/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/jborean93/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/jborean93/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/jborean93/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/jborean93/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/jborean93/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/jborean93/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/jborean93/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/jborean93/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/jborean93/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/jborean93/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/jborean93/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/jborean93/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/jborean93/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/jborean93/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/jborean93/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/jborean93/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/jborean93/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/jborean93/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/jborean93/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/jborean93/ansible/deployments\",\"created_at\":\"2016-11-03T09:27:23Z\",\"updated_at\":\"2021-02-05T00:08:31Z\",\"pushed_at\":\"2021-02-07T23:58:10Z\",\"git_url\":\"git://github.com/jborean93/ansible.git\",\"ssh_url\":\"git@github.com:jborean93/ansible.git\",\"clone_url\":\"https://github.com/jborean93/ansible.git\",\"svn_url\":\"https://github.com/jborean93/ansible\",\"homepage\":\"http://ansible.com/\",\"size\":173668,\"stargazers_count\":0,\"watchers_count\":0,\"language\":\"Python\",\"has_issues\":false,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":0,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":0,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":0,\"open_issues\":0,\"watchers\":0,\"default_branch\":\"devel\"}},\"base\":{\"label\":\"ansible:devel\",\"ref\":\"devel\",\"sha\":\"7fb7d138fb1f5e3977d800cd2a56c60a101713ee\",\"user\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"repo\":{\"id\":3638964,\"node_id\":\"MDEwOlJlcG9zaXRvcnkzNjM4OTY0\",\"name\":\"ansible\",\"full_name\":\"ansible/ansible\",\"private\":false,\"owner\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"html_url\":\"https://github.com/ansible/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy and maintain. Automate everything from code deployment
        to network configuration to cloud management, in a language that approaches
        plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com.\",\"fork\":false,\"url\":\"https://api.github.com/repos/ansible/ansible\",\"forks_url\":\"https://api.github.com/repos/ansible/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/ansible/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/ansible/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/ansible/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/ansible/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/ansible/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/ansible/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/ansible/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/ansible/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/ansible/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/ansible/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/ansible/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/ansible/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/ansible/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/ansible/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/ansible/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/ansible/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/ansible/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/ansible/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/ansible/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/ansible/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/ansible/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/ansible/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/ansible/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/ansible/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/ansible/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/ansible/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/ansible/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/ansible/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/ansible/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/ansible/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/ansible/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/ansible/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/ansible/ansible/deployments\",\"created_at\":\"2012-03-06T14:58:02Z\",\"updated_at\":\"2021-02-25T00:16:06Z\",\"pushed_at\":\"2021-02-25T00:21:00Z\",\"git_url\":\"git://github.com/ansible/ansible.git\",\"ssh_url\":\"org-1507452@github.com:ansible/ansible.git\",\"clone_url\":\"https://github.com/ansible/ansible.git\",\"svn_url\":\"https://github.com/ansible/ansible\",\"homepage\":\"https://www.ansible.com/\",\"size\":194935,\"stargazers_count\":47012,\"watchers_count\":47012,\"language\":\"Python\",\"has_issues\":true,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":20304,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":1887,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":20304,\"open_issues\":1887,\"watchers\":47012,\"default_branch\":\"devel\"}},\"_links\":{\"self\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73487\"},\"html\":{\"href\":\"https://github.com/ansible/ansible/pull/73487\"},\"issue\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73487\"},\"comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73487/comments\"},\"review_comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73487/comments\"},\"review_comment\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\"},\"commits\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73487/commits\"},\"statuses\":{\"href\":\"https://api.github.com/repos/ansible/ansible/statuses/fb53dc23950f22857e2b6c6c6e9771dd980c9be9\"}},\"author_association\":\"MEMBER\",\"auto_merge\":null,\"active_lock_reason\":null,\"merged\":true,\"mergeable\":null,\"rebaseable\":null,\"mergeable_state\":\"unknown\",\"merged_by\":{\"login\":\"jborean93\",\"id\":8462645,\"node_id\":\"MDQ6VXNlcjg0NjI2NDU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/8462645?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/jborean93\",\"html_url\":\"https://github.com/jborean93\",\"followers_url\":\"https://api.github.com/users/jborean93/followers\",\"following_url\":\"https://api.github.com/users/jborean93/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/jborean93/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/jborean93/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/jborean93/subscriptions\",\"organizations_url\":\"https://api.github.com/users/jborean93/orgs\",\"repos_url\":\"https://api.github.com/users/jborean93/repos\",\"events_url\":\"https://api.github.com/users/jborean93/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/jborean93/received_events\",\"type\":\"User\",\"site_admin\":false},\"comments\":5,\"review_comments\":0,\"maintainer_can_modify\":false,\"commits\":3,\"additions\":119,\"deletions\":11,\"changed_files\":6}"
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Access-Control-Expose-Headers:
      - ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes,
        X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
      Cache-Control:
      - private, max-age=60, s-maxage=60
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - default-src 'none'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:06:57 GMT
      Etag:
      - W/"fd55c771add2241212c68f52ace475cd427eab92575eacc8e277eb7eb23e2731"
      Last-Modified:
      - Wed, 10 Feb 2021 04:46:45 GMT
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept, Authorization, Cookie, X-GitHub-OTP
      - Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes:
      - ''
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Media-Type:
      - github.cloak-preview, github.groot-preview; format=json
      X-GitHub-Request-Id:
      - 818A:149F:8B02D1:F0592B:60371450
      X-OAuth-Scopes:
      - repo, workflow
      X-RateLimit-Limit:
      - '5000'
      X-RateLimit-Remaining:
      - '4198'
      X-RateLimit-Reset:
      - '1614224282'
      X-XSS-Protection:
      - 1; mode=block
      x-ratelimit-used:
      - '802'
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/ansible/ansible/pulls/73487
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Cookie:
      - logged_in=no
      Host:
      - github.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://github.com/ansible/ansible/pull/73487.diff
  response:
    body: {}
    headers:
      Cache-Control:
      - no-cache
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com online.visualstudio.com/api/v1/locations;
        font-src github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/html; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:07:01 GMT
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Location:
      - https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73487.diff
      Referrer-Policy:
      - no-referrer-when-downgrade
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5AA:0248:87239:C52B6:60371454
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 302
      message: Found
    url: https://github.com/ansible/ansible/pull/73487.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Host:
      - patch-diff.githubusercontent.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73487.diff
  response:
    body:
      string: "diff --git a/changelogs/fragments/no_log-fallback.yml b/changelogs/fragments/no_log-fallback.yml\nnew
        file mode 100644\nindex 0000000000000..6947531358576\n--- /dev/null\n+++ b/changelogs/fragments/no_log-fallback.yml\n@@
        -0,0 +1,2 @@\n+security_fixes:\n+  - '**security issue** - Mask default and
        fallback values for ``no_log`` module options (CVE-2021-20228)'\ndiff --git
        a/lib/ansible/module_utils/basic.py b/lib/ansible/module_utils/basic.py\nindex
        6c756a909e2f2..9cc8daa9fe496 100644\n--- a/lib/ansible/module_utils/basic.py\n+++
        b/lib/ansible/module_utils/basic.py\n@@ -713,6 +713,9 @@ def __init__(self,
        argument_spec, bypass_checks=False, no_log=False,\n                 if k not
        in self.argument_spec:\n                     self.argument_spec[k] = v\n \n+
        \       # Save parameter values that should never be logged\n+        self.no_log_values
        = set()\n+\n         self._load_params()\n         self._set_fallbacks()\n
        \n@@ -724,8 +727,6 @@ def __init__(self, argument_spec, bypass_checks=False,
        no_log=False,\n             print('\\n{\"failed\": true, \"msg\": \"Module
        alias error: %s\"}' % to_native(e))\n             sys.exit(1)\n \n-        #
        Save parameter values that should never be logged\n-        self.no_log_values
        = set()\n         self._handle_no_log_values()\n \n         # check the locale
        as set by the current environment, and reset to\n@@ -1930,14 +1931,15 @@ def
        _set_defaults(self, pre=True, spec=None, param=None):\n             param
        = self.params\n         for (k, v) in spec.items():\n             default
        = v.get('default', None)\n-            if pre is True:\n-                #
        this prevents setting defaults on required items\n-                if default
        is not None and k not in param:\n-                    param[k] = default\n-
        \           else:\n-                # make sure things without a default still
        get set None\n-                if k not in param:\n-                    param[k]
        = default\n+\n+            # This prevents setting defaults on required items
        on the 1st run,\n+            # otherwise will set things without a default
        to None on the 2nd.\n+            if k not in param and (default is not None
        or not pre):\n+                # Make sure any default value for no_log fields
        are masked.\n+                if v.get('no_log', False) and default:\n+                    self.no_log_values.add(default)\n+\n+
        \               param[k] = default\n \n     def _set_fallbacks(self, spec=None,
        param=None):\n         if spec is None:\n@@ -1957,9 +1959,13 @@ def _set_fallbacks(self,
        spec=None, param=None):\n                     else:\n                         fallback_args
        = item\n                 try:\n-                    param[k] = fallback_strategy(*fallback_args,
        **fallback_kwargs)\n+                    fallback_value = fallback_strategy(*fallback_args,
        **fallback_kwargs)\n                 except AnsibleFallbackNotFound:\n                     continue\n+
        \               else:\n+                    if v.get('no_log', False) and
        fallback_value:\n+                        self.no_log_values.add(fallback_value)\n+
        \                   param[k] = fallback_value\n \n     def _load_params(self):\n
        \        ''' read the input and set the params attribute.\ndiff --git a/test/integration/targets/module_utils/callback/pure_json.py
        b/test/integration/targets/module_utils/callback/pure_json.py\nnew file mode
        100644\nindex 0000000000000..1723d7bbe869b\n--- /dev/null\n+++ b/test/integration/targets/module_utils/callback/pure_json.py\n@@
        -0,0 +1,31 @@\n+# (c) 2021 Ansible Project\n+# GNU General Public License
        v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n+\n+from
        __future__ import (absolute_import, division, print_function)\n+__metaclass__
        = type\n+\n+DOCUMENTATION = '''\n+    name: pure_json\n+    type: stdout\n+
        \   short_description: only outputs the module results as json\n+'''\n+\n+import
        json\n+\n+from ansible.plugins.callback import CallbackBase\n+\n+\n+class
        CallbackModule(CallbackBase):\n+\n+    CALLBACK_VERSION = 2.0\n+    CALLBACK_TYPE
        = 'stdout'\n+    CALLBACK_NAME = 'pure_json'\n+\n+    def v2_runner_on_failed(self,
        result, ignore_errors=False):\n+        self._display.display(json.dumps(result._result))\n+\n+
        \   def v2_runner_on_ok(self, result):\n+        self._display.display(json.dumps(result._result))\n+\n+
        \   def v2_runner_on_skipped(self, result):\n+        self._display.display(json.dumps(result._result))\ndiff
        --git a/test/integration/targets/module_utils/library/test_no_log.py b/test/integration/targets/module_utils/library/test_no_log.py\nnew
        file mode 100644\nindex 0000000000000..770e0b3a17e0c\n--- /dev/null\n+++ b/test/integration/targets/module_utils/library/test_no_log.py\n@@
        -0,0 +1,35 @@\n+#!/usr/bin/python\n+# (c) 2021 Ansible Project\n+# GNU General
        Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n+\n+from
        __future__ import absolute_import, division, print_function\n+__metaclass__
        = type\n+\n+\n+from ansible.module_utils.basic import AnsibleModule, env_fallback\n+\n+\n+def
        main():\n+    module = AnsibleModule(\n+        argument_spec=dict(\n+            explicit_pass=dict(type='str',
        no_log=True),\n+            fallback_pass=dict(type='str', no_log=True, fallback=(env_fallback,
        ['SECRET_ENV'])),\n+            default_pass=dict(type='str', no_log=True,
        default='zyx'),\n+            normal=dict(type='str', default='plaintext'),\n+
        \           suboption=dict(\n+                type='dict',\n+                options=dict(\n+
        \                   explicit_sub_pass=dict(type='str', no_log=True),\n+                    fallback_sub_pass=dict(type='str',
        no_log=True, fallback=(env_fallback, ['SECRET_SUB_ENV'])),\n+                    default_sub_pass=dict(type='str',
        no_log=True, default='xvu'),\n+                    normal=dict(type='str',
        default='plaintext'),\n+                ),\n+            ),\n+        ),\n+
        \   )\n+\n+    module.exit_json(changed=False)\n+\n+\n+if __name__ == '__main__':\n+
        \   main()\ndiff --git a/test/integration/targets/module_utils/module_utils_test_no_log.yml
        b/test/integration/targets/module_utils/module_utils_test_no_log.yml\nnew
        file mode 100644\nindex 0000000000000..bad2efd495db2\n--- /dev/null\n+++ b/test/integration/targets/module_utils/module_utils_test_no_log.yml\n@@
        -0,0 +1,9 @@\n+# This is called by module_utils_vvvvv.yml with a custom callback\n+-
        hosts: testhost\n+  gather_facts: no\n+  tasks:\n+    - name: Check no_log
        invocation results\n+      test_no_log:\n+        explicit_pass: abc\n+        suboption:\n+
        \         explicit_sub_pass: def\ndiff --git a/test/integration/targets/module_utils/module_utils_vvvvv.yml
        b/test/integration/targets/module_utils/module_utils_vvvvv.yml\nindex 1fe9624f7b48f..6a9f92013c50e
        100644\n--- a/test/integration/targets/module_utils/module_utils_vvvvv.yml\n+++
        b/test/integration/targets/module_utils/module_utils_vvvvv.yml\n@@ -3,3 +3,28
        @@\n   tasks:\n   - name: Use a specially crafted module to see if things
        were imported correctly\n     test:\n+\n+  # Invocation usually is output
        with 3vs or more, our callback plugin displays it anyway\n+  - name: Check
        no_log invocation results\n+    command: ansible-playbook -i {{ inventory_file
        }} module_utils_test_no_log.yml\n+    environment:\n+      ANSIBLE_CALLBACK_PLUGINS:
        callback\n+      ANSIBLE_STDOUT_CALLBACK: pure_json\n+      SECRET_ENV: ghi\n+
        \     SECRET_SUB_ENV: jkl\n+    register: no_log_invocation\n+\n+  - set_fact:\n+
        \     no_log_invocation: '{{ no_log_invocation.stdout | trim | from_json }}'\n+\n+
        \ - name: check no log values from fallback or default are masked\n+    assert:\n+
        \     that:\n+      - no_log_invocation.invocation.module_args.default_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.explicit_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.fallback_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.normal
        == 'plaintext'\n+      - no_log_invocation.invocation.module_args.suboption.default_sub_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.suboption.explicit_sub_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.suboption.fallback_sub_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.suboption.normal
        == 'plaintext'\n"
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com; font-src
        github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/plain; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:07:01 GMT
      Etag:
      - W/"0687d3ebbec1ca07d0b0dd032415ee3e"
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Set-Cookie:
      - logged_in=no; domain=.github.com; path=/; expires=Fri, 25 Feb 2022 03:07:01
        GMT; secure; HttpOnly; SameSite=Lax
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5A2:7E2A:A72261:D06C87:60371450
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 200
      message: OK
    url: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73487.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Cookie:
      - logged_in=no
    method: GET
    uri: https://api.github.com/repos/ansible/ansible/pulls/73487
  response:
    body:
      string: "{\"url\":\"https://api.github.com/repos/ansible/ansible/pulls/73487\",\"id\":567890636,\"node_id\":\"MDExOlB1bGxSZXF1ZXN0NTY3ODkwNjM2\",\"html_url\":\"https://github.com/ansible/ansible/pull/73487\",\"diff_url\":\"https://github.com/ansible/ansible/pull/73487.diff\",\"patch_url\":\"https://github.com/ansible/ansible/pull/73487.patch\",\"issue_url\":\"https://api.github.com/repos/ansible/ansible/issues/73487\",\"number\":73487,\"state\":\"closed\",\"locked\":false,\"title\":\"no_log
        mask suboption fallback values and defaults CVE-2021-20228\",\"user\":{\"login\":\"jborean93\",\"id\":8462645,\"node_id\":\"MDQ6VXNlcjg0NjI2NDU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/8462645?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/jborean93\",\"html_url\":\"https://github.com/jborean93\",\"followers_url\":\"https://api.github.com/users/jborean93/followers\",\"following_url\":\"https://api.github.com/users/jborean93/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/jborean93/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/jborean93/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/jborean93/subscriptions\",\"organizations_url\":\"https://api.github.com/users/jborean93/orgs\",\"repos_url\":\"https://api.github.com/users/jborean93/repos\",\"events_url\":\"https://api.github.com/users/jborean93/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/jborean93/received_events\",\"type\":\"User\",\"site_admin\":false},\"body\":\"#####
        SUMMARY\\r\\nMake sure default and fallback values for `no_log` fields are
        masked in the module output.\\r\\n\\r\\nCVE-2021-20228\\r\\n\\r\\n##### ISSUE
        TYPE\\r\\n- Bugfix Pull Request\\r\\n\\r\\n##### COMPONENT NAME\\r\\nbasic.py\",\"created_at\":\"2021-02-04T20:17:58Z\",\"updated_at\":\"2021-02-08T07:51:08Z\",\"closed_at\":\"2021-02-04T23:11:56Z\",\"merged_at\":\"2021-02-04T23:11:56Z\",\"merge_commit_sha\":\"0cdc410dce6658e93c06fa27e0100ddbb11e7015\",\"assignee\":null,\"assignees\":[],\"requested_reviewers\":[],\"requested_teams\":[],\"labels\":[{\"id\":1742671738,\"node_id\":\"MDU6TGFiZWwxNzQyNjcxNzM4\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/affects_2.11\",\"name\":\"affects_2.11\",\"color\":\"5319e7\",\"default\":false,\"description\":\"\"},{\"id\":785271699,\"node_id\":\"MDU6TGFiZWw3ODUyNzE2OTk=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/bug\",\"name\":\"bug\",\"color\":\"fbca04\",\"default\":true,\"description\":\"This
        issue/PR relates to a bug.\"},{\"id\":1285191701,\"node_id\":\"MDU6TGFiZWwxMjg1MTkxNzAx\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/collection\",\"name\":\"collection\",\"color\":\"b60205\",\"default\":false,\"description\":\"Related
        to Ansible Collections work\"},{\"id\":1991487163,\"node_id\":\"MDU6TGFiZWwxOTkxNDg3MTYz\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/collection:amazon.aws\",\"name\":\"collection:amazon.aws\",\"color\":\"ededed\",\"default\":false,\"description\":null},{\"id\":513652538,\"node_id\":\"MDU6TGFiZWw1MTM2NTI1Mzg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/core_review\",\"name\":\"core_review\",\"color\":\"ededed\",\"default\":false,\"description\":\"In
        order to be merged, this PR must follow the core review workflow.\"},{\"id\":636327968,\"node_id\":\"MDU6TGFiZWw2MzYzMjc5Njg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:community\",\"name\":\"support:community\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible community.\"},{\"id\":636352796,\"node_id\":\"MDU6TGFiZWw2MzYzNTI3OTY=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:core\",\"name\":\"support:core\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible Engineering Team.\"}],\"milestone\":null,\"draft\":false,\"commits_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73487/commits\",\"review_comments_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73487/comments\",\"review_comment_url\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/issues/73487/comments\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/fb53dc23950f22857e2b6c6c6e9771dd980c9be9\",\"head\":{\"label\":\"jborean93:nolog-suboptions\",\"ref\":\"nolog-suboptions\",\"sha\":\"fb53dc23950f22857e2b6c6c6e9771dd980c9be9\",\"user\":{\"login\":\"jborean93\",\"id\":8462645,\"node_id\":\"MDQ6VXNlcjg0NjI2NDU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/8462645?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/jborean93\",\"html_url\":\"https://github.com/jborean93\",\"followers_url\":\"https://api.github.com/users/jborean93/followers\",\"following_url\":\"https://api.github.com/users/jborean93/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/jborean93/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/jborean93/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/jborean93/subscriptions\",\"organizations_url\":\"https://api.github.com/users/jborean93/orgs\",\"repos_url\":\"https://api.github.com/users/jborean93/repos\",\"events_url\":\"https://api.github.com/users/jborean93/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/jborean93/received_events\",\"type\":\"User\",\"site_admin\":false},\"repo\":{\"id\":72729201,\"node_id\":\"MDEwOlJlcG9zaXRvcnk3MjcyOTIwMQ==\",\"name\":\"ansible\",\"full_name\":\"jborean93/ansible\",\"private\":false,\"owner\":{\"login\":\"jborean93\",\"id\":8462645,\"node_id\":\"MDQ6VXNlcjg0NjI2NDU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/8462645?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/jborean93\",\"html_url\":\"https://github.com/jborean93\",\"followers_url\":\"https://api.github.com/users/jborean93/followers\",\"following_url\":\"https://api.github.com/users/jborean93/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/jborean93/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/jborean93/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/jborean93/subscriptions\",\"organizations_url\":\"https://api.github.com/users/jborean93/orgs\",\"repos_url\":\"https://api.github.com/users/jborean93/repos\",\"events_url\":\"https://api.github.com/users/jborean93/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/jborean93/received_events\",\"type\":\"User\",\"site_admin\":false},\"html_url\":\"https://github.com/jborean93/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy. Avoid writing scripts or custom code to deploy
        and update your applications\u2014 automate in a language that approaches
        plain English, using SSH, with no agents to install on remote systems.\",\"fork\":true,\"url\":\"https://api.github.com/repos/jborean93/ansible\",\"forks_url\":\"https://api.github.com/repos/jborean93/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/jborean93/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/jborean93/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/jborean93/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/jborean93/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/jborean93/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/jborean93/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/jborean93/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/jborean93/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/jborean93/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/jborean93/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/jborean93/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/jborean93/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/jborean93/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/jborean93/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/jborean93/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/jborean93/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/jborean93/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/jborean93/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/jborean93/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/jborean93/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/jborean93/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/jborean93/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/jborean93/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/jborean93/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/jborean93/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/jborean93/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/jborean93/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/jborean93/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/jborean93/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/jborean93/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/jborean93/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/jborean93/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/jborean93/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/jborean93/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/jborean93/ansible/deployments\",\"created_at\":\"2016-11-03T09:27:23Z\",\"updated_at\":\"2021-02-05T00:08:31Z\",\"pushed_at\":\"2021-02-07T23:58:10Z\",\"git_url\":\"git://github.com/jborean93/ansible.git\",\"ssh_url\":\"git@github.com:jborean93/ansible.git\",\"clone_url\":\"https://github.com/jborean93/ansible.git\",\"svn_url\":\"https://github.com/jborean93/ansible\",\"homepage\":\"http://ansible.com/\",\"size\":173668,\"stargazers_count\":0,\"watchers_count\":0,\"language\":\"Python\",\"has_issues\":false,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":0,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":0,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":0,\"open_issues\":0,\"watchers\":0,\"default_branch\":\"devel\"}},\"base\":{\"label\":\"ansible:devel\",\"ref\":\"devel\",\"sha\":\"7fb7d138fb1f5e3977d800cd2a56c60a101713ee\",\"user\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"repo\":{\"id\":3638964,\"node_id\":\"MDEwOlJlcG9zaXRvcnkzNjM4OTY0\",\"name\":\"ansible\",\"full_name\":\"ansible/ansible\",\"private\":false,\"owner\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"html_url\":\"https://github.com/ansible/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy and maintain. Automate everything from code deployment
        to network configuration to cloud management, in a language that approaches
        plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com.\",\"fork\":false,\"url\":\"https://api.github.com/repos/ansible/ansible\",\"forks_url\":\"https://api.github.com/repos/ansible/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/ansible/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/ansible/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/ansible/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/ansible/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/ansible/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/ansible/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/ansible/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/ansible/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/ansible/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/ansible/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/ansible/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/ansible/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/ansible/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/ansible/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/ansible/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/ansible/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/ansible/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/ansible/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/ansible/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/ansible/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/ansible/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/ansible/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/ansible/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/ansible/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/ansible/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/ansible/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/ansible/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/ansible/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/ansible/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/ansible/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/ansible/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/ansible/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/ansible/ansible/deployments\",\"created_at\":\"2012-03-06T14:58:02Z\",\"updated_at\":\"2021-02-25T00:16:06Z\",\"pushed_at\":\"2021-02-25T00:21:00Z\",\"git_url\":\"git://github.com/ansible/ansible.git\",\"ssh_url\":\"org-1507452@github.com:ansible/ansible.git\",\"clone_url\":\"https://github.com/ansible/ansible.git\",\"svn_url\":\"https://github.com/ansible/ansible\",\"homepage\":\"https://www.ansible.com/\",\"size\":194935,\"stargazers_count\":47012,\"watchers_count\":47012,\"language\":\"Python\",\"has_issues\":true,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":20304,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":1887,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":20304,\"open_issues\":1887,\"watchers\":47012,\"default_branch\":\"devel\"}},\"_links\":{\"self\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73487\"},\"html\":{\"href\":\"https://github.com/ansible/ansible/pull/73487\"},\"issue\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73487\"},\"comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73487/comments\"},\"review_comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73487/comments\"},\"review_comment\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\"},\"commits\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73487/commits\"},\"statuses\":{\"href\":\"https://api.github.com/repos/ansible/ansible/statuses/fb53dc23950f22857e2b6c6c6e9771dd980c9be9\"}},\"author_association\":\"MEMBER\",\"auto_merge\":null,\"active_lock_reason\":null,\"merged\":true,\"mergeable\":null,\"rebaseable\":null,\"mergeable_state\":\"unknown\",\"merged_by\":{\"login\":\"jborean93\",\"id\":8462645,\"node_id\":\"MDQ6VXNlcjg0NjI2NDU=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/8462645?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/jborean93\",\"html_url\":\"https://github.com/jborean93\",\"followers_url\":\"https://api.github.com/users/jborean93/followers\",\"following_url\":\"https://api.github.com/users/jborean93/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/jborean93/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/jborean93/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/jborean93/subscriptions\",\"organizations_url\":\"https://api.github.com/users/jborean93/orgs\",\"repos_url\":\"https://api.github.com/users/jborean93/repos\",\"events_url\":\"https://api.github.com/users/jborean93/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/jborean93/received_events\",\"type\":\"User\",\"site_admin\":false},\"comments\":5,\"review_comments\":0,\"maintainer_can_modify\":false,\"commits\":3,\"additions\":119,\"deletions\":11,\"changed_files\":6}"
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Access-Control-Expose-Headers:
      - ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes,
        X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
      Cache-Control:
      - private, max-age=60, s-maxage=60
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - default-src 'none'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:07:01 GMT
      Etag:
      - W/"fd55c771add2241212c68f52ace475cd427eab92575eacc8e277eb7eb23e2731"
      Last-Modified:
      - Wed, 10 Feb 2021 04:46:45 GMT
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept, Authorization, Cookie, X-GitHub-OTP
      - Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes:
      - ''
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Media-Type:
      - github.cloak-preview, github.groot-preview; format=json
      X-GitHub-Request-Id:
      - 818A:149F:8B0548:F05968:60371451
      X-OAuth-Scopes:
      - repo, workflow
      X-RateLimit-Limit:
      - '5000'
      X-RateLimit-Remaining:
      - '4197'
      X-RateLimit-Reset:
      - '1614224282'
      X-XSS-Protection:
      - 1; mode=block
      x-ratelimit-used:
      - '803'
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/ansible/ansible/pulls/73487
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Cookie:
      - logged_in=no
      Host:
      - github.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://github.com/ansible/ansible/pull/73487.diff
  response:
    body: {}
    headers:
      Cache-Control:
      - no-cache
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com online.visualstudio.com/api/v1/locations;
        font-src github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/html; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:07:01 GMT
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Location:
      - https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73487.diff
      Referrer-Policy:
      - no-referrer-when-downgrade
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5AA:0248:8723D:C52B8:60371455
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 302
      message: Found
    url: https://github.com/ansible/ansible/pull/73487.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Host:
      - patch-diff.githubusercontent.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73487.diff
  response:
    body:
      string: "diff --git a/changelogs/fragments/no_log-fallback.yml b/changelogs/fragments/no_log-fallback.yml\nnew
        file mode 100644\nindex 0000000000000..6947531358576\n--- /dev/null\n+++ b/changelogs/fragments/no_log-fallback.yml\n@@
        -0,0 +1,2 @@\n+security_fixes:\n+  - '**security issue** - Mask default and
        fallback values for ``no_log`` module options (CVE-2021-20228)'\ndiff --git
        a/lib/ansible/module_utils/basic.py b/lib/ansible/module_utils/basic.py\nindex
        6c756a909e2f2..9cc8daa9fe496 100644\n--- a/lib/ansible/module_utils/basic.py\n+++
        b/lib/ansible/module_utils/basic.py\n@@ -713,6 +713,9 @@ def __init__(self,
        argument_spec, bypass_checks=False, no_log=False,\n                 if k not
        in self.argument_spec:\n                     self.argument_spec[k] = v\n \n+
        \       # Save parameter values that should never be logged\n+        self.no_log_values
        = set()\n+\n         self._load_params()\n         self._set_fallbacks()\n
        \n@@ -724,8 +727,6 @@ def __init__(self, argument_spec, bypass_checks=False,
        no_log=False,\n             print('\\n{\"failed\": true, \"msg\": \"Module
        alias error: %s\"}' % to_native(e))\n             sys.exit(1)\n \n-        #
        Save parameter values that should never be logged\n-        self.no_log_values
        = set()\n         self._handle_no_log_values()\n \n         # check the locale
        as set by the current environment, and reset to\n@@ -1930,14 +1931,15 @@ def
        _set_defaults(self, pre=True, spec=None, param=None):\n             param
        = self.params\n         for (k, v) in spec.items():\n             default
        = v.get('default', None)\n-            if pre is True:\n-                #
        this prevents setting defaults on required items\n-                if default
        is not None and k not in param:\n-                    param[k] = default\n-
        \           else:\n-                # make sure things without a default still
        get set None\n-                if k not in param:\n-                    param[k]
        = default\n+\n+            # This prevents setting defaults on required items
        on the 1st run,\n+            # otherwise will set things without a default
        to None on the 2nd.\n+            if k not in param and (default is not None
        or not pre):\n+                # Make sure any default value for no_log fields
        are masked.\n+                if v.get('no_log', False) and default:\n+                    self.no_log_values.add(default)\n+\n+
        \               param[k] = default\n \n     def _set_fallbacks(self, spec=None,
        param=None):\n         if spec is None:\n@@ -1957,9 +1959,13 @@ def _set_fallbacks(self,
        spec=None, param=None):\n                     else:\n                         fallback_args
        = item\n                 try:\n-                    param[k] = fallback_strategy(*fallback_args,
        **fallback_kwargs)\n+                    fallback_value = fallback_strategy(*fallback_args,
        **fallback_kwargs)\n                 except AnsibleFallbackNotFound:\n                     continue\n+
        \               else:\n+                    if v.get('no_log', False) and
        fallback_value:\n+                        self.no_log_values.add(fallback_value)\n+
        \                   param[k] = fallback_value\n \n     def _load_params(self):\n
        \        ''' read the input and set the params attribute.\ndiff --git a/test/integration/targets/module_utils/callback/pure_json.py
        b/test/integration/targets/module_utils/callback/pure_json.py\nnew file mode
        100644\nindex 0000000000000..1723d7bbe869b\n--- /dev/null\n+++ b/test/integration/targets/module_utils/callback/pure_json.py\n@@
        -0,0 +1,31 @@\n+# (c) 2021 Ansible Project\n+# GNU General Public License
        v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n+\n+from
        __future__ import (absolute_import, division, print_function)\n+__metaclass__
        = type\n+\n+DOCUMENTATION = '''\n+    name: pure_json\n+    type: stdout\n+
        \   short_description: only outputs the module results as json\n+'''\n+\n+import
        json\n+\n+from ansible.plugins.callback import CallbackBase\n+\n+\n+class
        CallbackModule(CallbackBase):\n+\n+    CALLBACK_VERSION = 2.0\n+    CALLBACK_TYPE
        = 'stdout'\n+    CALLBACK_NAME = 'pure_json'\n+\n+    def v2_runner_on_failed(self,
        result, ignore_errors=False):\n+        self._display.display(json.dumps(result._result))\n+\n+
        \   def v2_runner_on_ok(self, result):\n+        self._display.display(json.dumps(result._result))\n+\n+
        \   def v2_runner_on_skipped(self, result):\n+        self._display.display(json.dumps(result._result))\ndiff
        --git a/test/integration/targets/module_utils/library/test_no_log.py b/test/integration/targets/module_utils/library/test_no_log.py\nnew
        file mode 100644\nindex 0000000000000..770e0b3a17e0c\n--- /dev/null\n+++ b/test/integration/targets/module_utils/library/test_no_log.py\n@@
        -0,0 +1,35 @@\n+#!/usr/bin/python\n+# (c) 2021 Ansible Project\n+# GNU General
        Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n+\n+from
        __future__ import absolute_import, division, print_function\n+__metaclass__
        = type\n+\n+\n+from ansible.module_utils.basic import AnsibleModule, env_fallback\n+\n+\n+def
        main():\n+    module = AnsibleModule(\n+        argument_spec=dict(\n+            explicit_pass=dict(type='str',
        no_log=True),\n+            fallback_pass=dict(type='str', no_log=True, fallback=(env_fallback,
        ['SECRET_ENV'])),\n+            default_pass=dict(type='str', no_log=True,
        default='zyx'),\n+            normal=dict(type='str', default='plaintext'),\n+
        \           suboption=dict(\n+                type='dict',\n+                options=dict(\n+
        \                   explicit_sub_pass=dict(type='str', no_log=True),\n+                    fallback_sub_pass=dict(type='str',
        no_log=True, fallback=(env_fallback, ['SECRET_SUB_ENV'])),\n+                    default_sub_pass=dict(type='str',
        no_log=True, default='xvu'),\n+                    normal=dict(type='str',
        default='plaintext'),\n+                ),\n+            ),\n+        ),\n+
        \   )\n+\n+    module.exit_json(changed=False)\n+\n+\n+if __name__ == '__main__':\n+
        \   main()\ndiff --git a/test/integration/targets/module_utils/module_utils_test_no_log.yml
        b/test/integration/targets/module_utils/module_utils_test_no_log.yml\nnew
        file mode 100644\nindex 0000000000000..bad2efd495db2\n--- /dev/null\n+++ b/test/integration/targets/module_utils/module_utils_test_no_log.yml\n@@
        -0,0 +1,9 @@\n+# This is called by module_utils_vvvvv.yml with a custom callback\n+-
        hosts: testhost\n+  gather_facts: no\n+  tasks:\n+    - name: Check no_log
        invocation results\n+      test_no_log:\n+        explicit_pass: abc\n+        suboption:\n+
        \         explicit_sub_pass: def\ndiff --git a/test/integration/targets/module_utils/module_utils_vvvvv.yml
        b/test/integration/targets/module_utils/module_utils_vvvvv.yml\nindex 1fe9624f7b48f..6a9f92013c50e
        100644\n--- a/test/integration/targets/module_utils/module_utils_vvvvv.yml\n+++
        b/test/integration/targets/module_utils/module_utils_vvvvv.yml\n@@ -3,3 +3,28
        @@\n   tasks:\n   - name: Use a specially crafted module to see if things
        were imported correctly\n     test:\n+\n+  # Invocation usually is output
        with 3vs or more, our callback plugin displays it anyway\n+  - name: Check
        no_log invocation results\n+    command: ansible-playbook -i {{ inventory_file
        }} module_utils_test_no_log.yml\n+    environment:\n+      ANSIBLE_CALLBACK_PLUGINS:
        callback\n+      ANSIBLE_STDOUT_CALLBACK: pure_json\n+      SECRET_ENV: ghi\n+
        \     SECRET_SUB_ENV: jkl\n+    register: no_log_invocation\n+\n+  - set_fact:\n+
        \     no_log_invocation: '{{ no_log_invocation.stdout | trim | from_json }}'\n+\n+
        \ - name: check no log values from fallback or default are masked\n+    assert:\n+
        \     that:\n+      - no_log_invocation.invocation.module_args.default_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.explicit_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.fallback_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.normal
        == 'plaintext'\n+      - no_log_invocation.invocation.module_args.suboption.default_sub_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.suboption.explicit_sub_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.suboption.fallback_sub_pass
        == 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER'\n+      - no_log_invocation.invocation.module_args.suboption.normal
        == 'plaintext'\n"
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com; font-src
        github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/plain; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:07:01 GMT
      Etag:
      - W/"0687d3ebbec1ca07d0b0dd032415ee3e"
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Set-Cookie:
      - logged_in=no; domain=.github.com; path=/; expires=Fri, 25 Feb 2022 03:07:01
        GMT; secure; HttpOnly; SameSite=Lax
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5A2:7E2A:A722DB:D071C4:60371455
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 200
      message: OK
    url: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73487.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Cookie:
      - logged_in=no
    method: GET
    uri: https://api.github.com/repos/ansible/ansible/pulls/73067
  response:
    body:
      string: "{\"url\":\"https://api.github.com/repos/ansible/ansible/pulls/73067\",\"id\":545812921,\"node_id\":\"MDExOlB1bGxSZXF1ZXN0NTQ1ODEyOTIx\",\"html_url\":\"https://github.com/ansible/ansible/pull/73067\",\"diff_url\":\"https://github.com/ansible/ansible/pull/73067.diff\",\"patch_url\":\"https://github.com/ansible/ansible/pull/73067.patch\",\"issue_url\":\"https://api.github.com/repos/ansible/ansible/issues/73067\",\"number\":73067,\"state\":\"closed\",\"locked\":true,\"title\":\"[2.9]
        docker_image: check output of load_image and react upon\",\"user\":{\"login\":\"felixfontein\",\"id\":5781356,\"node_id\":\"MDQ6VXNlcjU3ODEzNTY=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/5781356?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/felixfontein\",\"html_url\":\"https://github.com/felixfontein\",\"followers_url\":\"https://api.github.com/users/felixfontein/followers\",\"following_url\":\"https://api.github.com/users/felixfontein/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/felixfontein/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/felixfontein/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/felixfontein/subscriptions\",\"organizations_url\":\"https://api.github.com/users/felixfontein/orgs\",\"repos_url\":\"https://api.github.com/users/felixfontein/repos\",\"events_url\":\"https://api.github.com/users/felixfontein/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/felixfontein/received_events\",\"type\":\"User\",\"site_admin\":false},\"body\":\"#####
        SUMMARY\\r\\nBackport of ansible-collections/community.docker#55 to stable-2.9.\\r\\n\\r\\n#####
        ISSUE TYPE\\r\\n- Bugfix Pull Request\\r\\n\\r\\n##### COMPONENT NAME\\r\\ndocker_image\\r\\n\",\"created_at\":\"2020-12-27T14:14:02Z\",\"updated_at\":\"2021-02-07T14:00:07Z\",\"closed_at\":\"2021-01-10T22:12:26Z\",\"merged_at\":\"2021-01-10T22:12:26Z\",\"merge_commit_sha\":\"77ae0819f969f0700b9d849ec4a9720a259cee55\",\"assignee\":null,\"assignees\":[],\"requested_reviewers\":[],\"requested_teams\":[],\"labels\":[{\"id\":1316917295,\"node_id\":\"MDU6TGFiZWwxMzE2OTE3Mjk1\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/affects_2.9\",\"name\":\"affects_2.9\",\"color\":\"5319e7\",\"default\":false,\"description\":\"This
        issue/PR affects Ansible v2.9\"},{\"id\":266246971,\"node_id\":\"MDU6TGFiZWwyNjYyNDY5NzE=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/backport\",\"name\":\"backport\",\"color\":\"00ff00\",\"default\":false,\"description\":\"This
        PR does not target the devel branch.\"},{\"id\":785271699,\"node_id\":\"MDU6TGFiZWw3ODUyNzE2OTk=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/bug\",\"name\":\"bug\",\"color\":\"fbca04\",\"default\":true,\"description\":\"This
        issue/PR relates to a bug.\"},{\"id\":61528803,\"node_id\":\"MDU6TGFiZWw2MTUyODgwMw==\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/cloud\",\"name\":\"cloud\",\"color\":\"4071a5\",\"default\":false,\"description\":\"\"},{\"id\":1285191701,\"node_id\":\"MDU6TGFiZWwxMjg1MTkxNzAx\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/collection\",\"name\":\"collection\",\"color\":\"b60205\",\"default\":false,\"description\":\"Related
        to Ansible Collections work\"},{\"id\":1932404776,\"node_id\":\"MDU6TGFiZWwxOTMyNDA0Nzc2\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/collection:community.general\",\"name\":\"collection:community.general\",\"color\":\"ededed\",\"default\":false,\"description\":null},{\"id\":513652538,\"node_id\":\"MDU6TGFiZWw1MTM2NTI1Mzg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/core_review\",\"name\":\"core_review\",\"color\":\"ededed\",\"default\":false,\"description\":\"In
        order to be merged, this PR must follow the core review workflow.\"},{\"id\":500715204,\"node_id\":\"MDU6TGFiZWw1MDA3MTUyMDQ=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/docker\",\"name\":\"docker\",\"color\":\"c5def5\",\"default\":false,\"description\":null},{\"id\":496359346,\"node_id\":\"MDU6TGFiZWw0OTYzNTkzNDY=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/module\",\"name\":\"module\",\"color\":\"1d76db\",\"default\":false,\"description\":\"This
        issue/PR relates to a module.\"},{\"id\":581543918,\"node_id\":\"MDU6TGFiZWw1ODE1NDM5MTg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/stale_ci\",\"name\":\"stale_ci\",\"color\":\"fef2c0\",\"default\":false,\"description\":\"This
        PR has been tested by CI more than one week ago. Close and re-open this PR
        to get it retested.\"},{\"id\":636327968,\"node_id\":\"MDU6TGFiZWw2MzYzMjc5Njg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:community\",\"name\":\"support:community\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible community.\"},{\"id\":636352796,\"node_id\":\"MDU6TGFiZWw2MzYzNTI3OTY=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:core\",\"name\":\"support:core\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible Engineering Team.\"},{\"id\":468273802,\"node_id\":\"MDU6TGFiZWw0NjgyNzM4MDI=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/test\",\"name\":\"test\",\"color\":\"0e8a16\",\"default\":false,\"description\":\"This
        PR relates to tests.\"}],\"milestone\":null,\"draft\":false,\"commits_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73067/commits\",\"review_comments_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73067/comments\",\"review_comment_url\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/issues/73067/comments\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/f6d7ff5715b25b0c434b55ee0d3b194f255e1e5a\",\"head\":{\"label\":\"felixfontein:backport/2.9/community.docker-55\",\"ref\":\"backport/2.9/community.docker-55\",\"sha\":\"f6d7ff5715b25b0c434b55ee0d3b194f255e1e5a\",\"user\":{\"login\":\"felixfontein\",\"id\":5781356,\"node_id\":\"MDQ6VXNlcjU3ODEzNTY=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/5781356?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/felixfontein\",\"html_url\":\"https://github.com/felixfontein\",\"followers_url\":\"https://api.github.com/users/felixfontein/followers\",\"following_url\":\"https://api.github.com/users/felixfontein/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/felixfontein/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/felixfontein/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/felixfontein/subscriptions\",\"organizations_url\":\"https://api.github.com/users/felixfontein/orgs\",\"repos_url\":\"https://api.github.com/users/felixfontein/repos\",\"events_url\":\"https://api.github.com/users/felixfontein/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/felixfontein/received_events\",\"type\":\"User\",\"site_admin\":false},\"repo\":{\"id\":51219776,\"node_id\":\"MDEwOlJlcG9zaXRvcnk1MTIxOTc3Ng==\",\"name\":\"ansible\",\"full_name\":\"felixfontein/ansible\",\"private\":false,\"owner\":{\"login\":\"felixfontein\",\"id\":5781356,\"node_id\":\"MDQ6VXNlcjU3ODEzNTY=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/5781356?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/felixfontein\",\"html_url\":\"https://github.com/felixfontein\",\"followers_url\":\"https://api.github.com/users/felixfontein/followers\",\"following_url\":\"https://api.github.com/users/felixfontein/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/felixfontein/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/felixfontein/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/felixfontein/subscriptions\",\"organizations_url\":\"https://api.github.com/users/felixfontein/orgs\",\"repos_url\":\"https://api.github.com/users/felixfontein/repos\",\"events_url\":\"https://api.github.com/users/felixfontein/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/felixfontein/received_events\",\"type\":\"User\",\"site_admin\":false},\"html_url\":\"https://github.com/felixfontein/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy. Avoid writing scripts or custom code to deploy
        and update your applications\u2014 automate in a language that approaches
        plain English, using SSH, with no agents to install on remote systems.\",\"fork\":true,\"url\":\"https://api.github.com/repos/felixfontein/ansible\",\"forks_url\":\"https://api.github.com/repos/felixfontein/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/felixfontein/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/felixfontein/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/felixfontein/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/felixfontein/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/felixfontein/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/felixfontein/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/felixfontein/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/felixfontein/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/felixfontein/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/felixfontein/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/felixfontein/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/felixfontein/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/felixfontein/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/felixfontein/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/felixfontein/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/felixfontein/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/felixfontein/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/felixfontein/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/felixfontein/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/felixfontein/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/felixfontein/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/felixfontein/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/felixfontein/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/felixfontein/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/felixfontein/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/felixfontein/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/felixfontein/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/felixfontein/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/felixfontein/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/felixfontein/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/felixfontein/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/felixfontein/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/felixfontein/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/felixfontein/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/felixfontein/ansible/deployments\",\"created_at\":\"2016-02-06T20:16:02Z\",\"updated_at\":\"2021-02-24T18:55:35Z\",\"pushed_at\":\"2021-02-24T18:55:09Z\",\"git_url\":\"git://github.com/felixfontein/ansible.git\",\"ssh_url\":\"git@github.com:felixfontein/ansible.git\",\"clone_url\":\"https://github.com/felixfontein/ansible.git\",\"svn_url\":\"https://github.com/felixfontein/ansible\",\"homepage\":\"http://ansible.com/\",\"size\":168950,\"stargazers_count\":1,\"watchers_count\":1,\"language\":\"Python\",\"has_issues\":false,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":0,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":0,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":0,\"open_issues\":0,\"watchers\":1,\"default_branch\":\"devel\"}},\"base\":{\"label\":\"ansible:stable-2.9\",\"ref\":\"stable-2.9\",\"sha\":\"17effffad639c6edb99b5893b23483c52edb35ae\",\"user\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"repo\":{\"id\":3638964,\"node_id\":\"MDEwOlJlcG9zaXRvcnkzNjM4OTY0\",\"name\":\"ansible\",\"full_name\":\"ansible/ansible\",\"private\":false,\"owner\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"html_url\":\"https://github.com/ansible/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy and maintain. Automate everything from code deployment
        to network configuration to cloud management, in a language that approaches
        plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com.\",\"fork\":false,\"url\":\"https://api.github.com/repos/ansible/ansible\",\"forks_url\":\"https://api.github.com/repos/ansible/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/ansible/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/ansible/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/ansible/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/ansible/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/ansible/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/ansible/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/ansible/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/ansible/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/ansible/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/ansible/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/ansible/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/ansible/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/ansible/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/ansible/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/ansible/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/ansible/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/ansible/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/ansible/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/ansible/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/ansible/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/ansible/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/ansible/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/ansible/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/ansible/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/ansible/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/ansible/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/ansible/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/ansible/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/ansible/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/ansible/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/ansible/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/ansible/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/ansible/ansible/deployments\",\"created_at\":\"2012-03-06T14:58:02Z\",\"updated_at\":\"2021-02-25T00:16:06Z\",\"pushed_at\":\"2021-02-25T00:21:00Z\",\"git_url\":\"git://github.com/ansible/ansible.git\",\"ssh_url\":\"org-1507452@github.com:ansible/ansible.git\",\"clone_url\":\"https://github.com/ansible/ansible.git\",\"svn_url\":\"https://github.com/ansible/ansible\",\"homepage\":\"https://www.ansible.com/\",\"size\":194935,\"stargazers_count\":47012,\"watchers_count\":47012,\"language\":\"Python\",\"has_issues\":true,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":20304,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":1887,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":20304,\"open_issues\":1887,\"watchers\":47012,\"default_branch\":\"devel\"}},\"_links\":{\"self\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73067\"},\"html\":{\"href\":\"https://github.com/ansible/ansible/pull/73067\"},\"issue\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73067\"},\"comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73067/comments\"},\"review_comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73067/comments\"},\"review_comment\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\"},\"commits\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73067/commits\"},\"statuses\":{\"href\":\"https://api.github.com/repos/ansible/ansible/statuses/f6d7ff5715b25b0c434b55ee0d3b194f255e1e5a\"}},\"author_association\":\"MEMBER\",\"auto_merge\":null,\"active_lock_reason\":null,\"merged\":true,\"mergeable\":null,\"rebaseable\":null,\"mergeable_state\":\"unknown\",\"merged_by\":{\"login\":\"relrod\",\"id\":43930,\"node_id\":\"MDQ6VXNlcjQzOTMw\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/43930?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/relrod\",\"html_url\":\"https://github.com/relrod\",\"followers_url\":\"https://api.github.com/users/relrod/followers\",\"following_url\":\"https://api.github.com/users/relrod/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/relrod/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/relrod/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/relrod/subscriptions\",\"organizations_url\":\"https://api.github.com/users/relrod/orgs\",\"repos_url\":\"https://api.github.com/users/relrod/repos\",\"events_url\":\"https://api.github.com/users/relrod/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/relrod/received_events\",\"type\":\"User\",\"site_admin\":false},\"comments\":1,\"review_comments\":0,\"maintainer_can_modify\":false,\"commits\":1,\"additions\":62,\"deletions\":5,\"changed_files\":3}"
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Access-Control-Expose-Headers:
      - ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes,
        X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
      Cache-Control:
      - private, max-age=60, s-maxage=60
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - default-src 'none'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:07:02 GMT
      Etag:
      - W/"62ad6b8acdc865d633880ea1fe86f4d7f0bb1b21866dcaf1b39e3215fb9b83a0"
      Last-Modified:
      - Wed, 10 Feb 2021 19:50:21 GMT
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept, Authorization, Cookie, X-GitHub-OTP
      - Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes:
      - ''
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Media-Type:
      - github.cloak-preview, github.groot-preview; format=json
      X-GitHub-Request-Id:
      - 818A:149F:8B05C1:F05D72:60371455
      X-OAuth-Scopes:
      - repo, workflow
      X-RateLimit-Limit:
      - '5000'
      X-RateLimit-Remaining:
      - '4196'
      X-RateLimit-Reset:
      - '1614224282'
      X-XSS-Protection:
      - 1; mode=block
      x-ratelimit-used:
      - '804'
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/ansible/ansible/pulls/73067
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Cookie:
      - logged_in=no
      Host:
      - github.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://github.com/ansible/ansible/pull/73067.diff
  response:
    body: {}
    headers:
      Cache-Control:
      - no-cache
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com online.visualstudio.com/api/v1/locations;
        font-src github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/html; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:07:02 GMT
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Location:
      - https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73067.diff
      Referrer-Policy:
      - no-referrer-when-downgrade
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5AC:24DB:6687FD:7F950D:60371456
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 302
      message: Found
    url: https://github.com/ansible/ansible/pull/73067.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Host:
      - patch-diff.githubusercontent.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73067.diff
  response:
    body:
      string: "diff --git a/changelogs/fragments/community.docker-55-docker_image-loading.yml
        b/changelogs/fragments/community.docker-55-docker_image-loading.yml\nnew file
        mode 100644\nindex 0000000000000..c7694f0594b3c\n--- /dev/null\n+++ b/changelogs/fragments/community.docker-55-docker_image-loading.yml\n@@
        -0,0 +1,3 @@\n+bugfixes:\n+- \"docker_image - report error when loading a
        broken archive that contains no image (https://github.com/ansible-collections/community.docker/issues/46,
        https://github.com/ansible-collections/community.docker/pull/55).\"\n+- \"docker_image
        - report error when the loaded archive does not contain the specified image
        (https://github.com/ansible-collections/community.docker/issues/41, https://github.com/ansible-collections/community.docker/pull/55).\"\ndiff
        --git a/lib/ansible/modules/cloud/docker/docker_image.py b/lib/ansible/modules/cloud/docker/docker_image.py\nindex
        363a66505fd65..f3323d3fd6342 100644\n--- a/lib/ansible/modules/cloud/docker/docker_image.py\n+++
        b/lib/ansible/modules/cloud/docker/docker_image.py\n@@ -786,17 +786,45 @@
        def load_image(self):\n \n         :return: image dict\n         '''\n+        #
        Load image(s) from file\n+        load_output = []\n         try:\n             self.log(\"Opening
        image %s\" % self.load_path)\n             with open(self.load_path, 'rb')
        as image_tar:\n                 self.log(\"Loading image from %s\" % self.load_path)\n-
        \               self.client.load_image(image_tar)\n+                for line
        in self.client.load_image(image_tar):\n+                    self.log(line,
        pretty_print=True)\n+                    if \"stream\" in line or \"status\"
        in line:\n+                        load_line = line.get(\"stream\") or line.get(\"status\")
        or ''\n+                        load_output.append(load_line)\n         except
        EnvironmentError as exc:\n             if exc.errno == errno.ENOENT:\n-                self.fail(\"Error
        opening image %s - %s\" % (self.load_path, str(exc)))\n-            self.fail(\"Error
        loading image %s - %s\" % (self.name, str(exc)))\n+                self.client.fail(\"Error
        opening image %s - %s\" % (self.load_path, str(exc)))\n+            self.client.fail(\"Error
        loading image %s - %s\" % (self.name, str(exc)), stdout='\\n'.join(load_output))\n
        \        except Exception as exc:\n-            self.fail(\"Error loading
        image %s - %s\" % (self.name, str(exc)))\n+            self.client.fail(\"Error
        loading image %s - %s\" % (self.name, str(exc)), stdout='\\n'.join(load_output))\n+\n+
        \       # Collect loaded images\n+        loaded_images = set()\n+        for
        line in load_output:\n+            if line.startswith('Loaded image:'):\n+
        \               loaded_images.add(line[len('Loaded image:'):].strip())\n+\n+
        \       if not loaded_images:\n+            self.client.fail(\"Detected no
        loaded images. Archive potentially corrupt?\", stdout='\\n'.join(load_output))\n+\n+
        \       expected_image = '%s:%s' % (self.name, self.tag)\n+        if expected_image
        not in loaded_images:\n+            self.client.fail(\n+                \"The
        archive did not contain image '%s'. Instead, found %s.\" % (\n+                    expected_image,
        ', '.join([\"'%s'\" % image for image in sorted(loaded_images)])),\n+                stdout='\\n'.join(load_output))\n+
        \       loaded_images.remove(expected_image)\n+\n+        if loaded_images:\n+
        \           self.client.module.warn(\n+                \"The archive contained
        more images than specified: %s\" % (\n+                    ', '.join([\"'%s'\"
        % image for image in sorted(loaded_images)]), ))\n \n         return self.client.find_image(self.name,
        self.tag)\n \ndiff --git a/test/integration/targets/docker_image/tasks/tests/options.yml
        b/test/integration/targets/docker_image/tasks/tests/options.yml\nindex 5564a38c9387a..1c045b9a282c4
        100644\n--- a/test/integration/targets/docker_image/tasks/tests/options.yml\n+++
        b/test/integration/targets/docker_image/tasks/tests/options.yml\n@@ -182,6
        +182,11 @@\n     source: pull\n   register: archive_image\n \n+- name: Create
        invalid archive\n+  copy:\n+    dest: \"{{ output_dir }}/image-invalid.tar\"\n+
        \   content: \"this is not a valid image\"\n+\n - name: remove image\n   docker_image:\n
        \    name: \"quay.io/ansible/docker-test-containers:hello-world\"\n@@ -202,11
        +207,32 @@\n     source: load\n   register: load_image_1\n \n+- name: load
        image (wrong name)\n+  docker_image:\n+    name: foo:bar\n+    load_path:
        \"{{ output_dir }}/image.tar\"\n+    source: load\n+  register: load_image_2\n+
        \ ignore_errors: true\n+\n+- name: load image (invalid image)\n+  docker_image:\n+
        \   name: foo:bar\n+    load_path: \"{{ output_dir }}/image-invalid.tar\"\n+
        \   source: load\n+  register: load_image_3\n+  ignore_errors: true\n+\n -
        assert:\n     that:\n     - load_image is changed\n-    - load_image_1 is
        not changed\n     - archive_image['image']['Id'] == load_image['image']['Id']\n+
        \   - load_image_1 is not changed\n+    - load_image_2 is failed\n+    - >-\n+
        \     \"The archive did not contain image 'foo:bar'. Instead, found 'quay.io/ansible/docker-test-containers:hello-world'.\"
        == load_image_2.msg\n+    - load_image_3 is failed\n+    - '\"Detected no
        loaded images. Archive potentially corrupt?\" == load_image_3.msg'\n \n ####################################################################\n
        ## path ############################################################\n"
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com; font-src
        github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/plain; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:07:02 GMT
      Etag:
      - W/"5bb8fe511b6bc742abb231f0bc1af073"
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Set-Cookie:
      - logged_in=no; domain=.github.com; path=/; expires=Fri, 25 Feb 2022 03:07:02
        GMT; secure; HttpOnly; SameSite=Lax
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5A2:7E2A:A723CD:D0724C:60371455
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 200
      message: OK
    url: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73067.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Cookie:
      - logged_in=no
    method: GET
    uri: https://api.github.com/repos/ansible-collections/community.docker/pulls/55
  response:
    body:
      string: '{"url":"https://api.github.com/repos/ansible-collections/community.docker/pulls/55","id":544676269,"node_id":"MDExOlB1bGxSZXF1ZXN0NTQ0Njc2MjY5","html_url":"https://github.com/ansible-collections/community.docker/pull/55","diff_url":"https://github.com/ansible-collections/community.docker/pull/55.diff","patch_url":"https://github.com/ansible-collections/community.docker/pull/55.patch","issue_url":"https://api.github.com/repos/ansible-collections/community.docker/issues/55","number":55,"state":"closed","locked":false,"title":"docker_image:
        check output of load_image and react upon","user":{"login":"felixfontein","id":5781356,"node_id":"MDQ6VXNlcjU3ODEzNTY=","avatar_url":"https://avatars.githubusercontent.com/u/5781356?v=4","gravatar_id":"","url":"https://api.github.com/users/felixfontein","html_url":"https://github.com/felixfontein","followers_url":"https://api.github.com/users/felixfontein/followers","following_url":"https://api.github.com/users/felixfontein/following{/other_user}","gists_url":"https://api.github.com/users/felixfontein/gists{/gist_id}","starred_url":"https://api.github.com/users/felixfontein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felixfontein/subscriptions","organizations_url":"https://api.github.com/users/felixfontein/orgs","repos_url":"https://api.github.com/users/felixfontein/repos","events_url":"https://api.github.com/users/felixfontein/events{/privacy}","received_events_url":"https://api.github.com/users/felixfontein/received_events","type":"User","site_admin":false},"body":"#####
        SUMMARY\r\nFixes #41, fixes #46.\r\n\r\n##### ISSUE TYPE\r\n- Bugfix Pull
        Request\r\n\r\n##### COMPONENT NAME\r\ndocker_image\r\n","created_at":"2020-12-23T09:37:55Z","updated_at":"2021-02-17T15:08:36Z","closed_at":"2020-12-27T14:04:39Z","merged_at":"2020-12-27T14:04:38Z","merge_commit_sha":"5eef093e994ce4bb10529b1c5da38c4992f5b3c4","assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/ansible-collections/community.docker/pulls/55/commits","review_comments_url":"https://api.github.com/repos/ansible-collections/community.docker/pulls/55/comments","review_comment_url":"https://api.github.com/repos/ansible-collections/community.docker/pulls/comments{/number}","comments_url":"https://api.github.com/repos/ansible-collections/community.docker/issues/55/comments","statuses_url":"https://api.github.com/repos/ansible-collections/community.docker/statuses/9765947ac0af25ab95771b9745efb1a55cf6b14d","head":{"label":"felixfontein:docker_image-loading","ref":"docker_image-loading","sha":"9765947ac0af25ab95771b9745efb1a55cf6b14d","user":{"login":"felixfontein","id":5781356,"node_id":"MDQ6VXNlcjU3ODEzNTY=","avatar_url":"https://avatars.githubusercontent.com/u/5781356?v=4","gravatar_id":"","url":"https://api.github.com/users/felixfontein","html_url":"https://github.com/felixfontein","followers_url":"https://api.github.com/users/felixfontein/followers","following_url":"https://api.github.com/users/felixfontein/following{/other_user}","gists_url":"https://api.github.com/users/felixfontein/gists{/gist_id}","starred_url":"https://api.github.com/users/felixfontein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felixfontein/subscriptions","organizations_url":"https://api.github.com/users/felixfontein/orgs","repos_url":"https://api.github.com/users/felixfontein/repos","events_url":"https://api.github.com/users/felixfontein/events{/privacy}","received_events_url":"https://api.github.com/users/felixfontein/received_events","type":"User","site_admin":false},"repo":{"id":307958254,"node_id":"MDEwOlJlcG9zaXRvcnkzMDc5NTgyNTQ=","name":"community.docker","full_name":"felixfontein/community.docker","private":false,"owner":{"login":"felixfontein","id":5781356,"node_id":"MDQ6VXNlcjU3ODEzNTY=","avatar_url":"https://avatars.githubusercontent.com/u/5781356?v=4","gravatar_id":"","url":"https://api.github.com/users/felixfontein","html_url":"https://github.com/felixfontein","followers_url":"https://api.github.com/users/felixfontein/followers","following_url":"https://api.github.com/users/felixfontein/following{/other_user}","gists_url":"https://api.github.com/users/felixfontein/gists{/gist_id}","starred_url":"https://api.github.com/users/felixfontein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felixfontein/subscriptions","organizations_url":"https://api.github.com/users/felixfontein/orgs","repos_url":"https://api.github.com/users/felixfontein/repos","events_url":"https://api.github.com/users/felixfontein/events{/privacy}","received_events_url":"https://api.github.com/users/felixfontein/received_events","type":"User","site_admin":false},"html_url":"https://github.com/felixfontein/community.docker","description":null,"fork":true,"url":"https://api.github.com/repos/felixfontein/community.docker","forks_url":"https://api.github.com/repos/felixfontein/community.docker/forks","keys_url":"https://api.github.com/repos/felixfontein/community.docker/keys{/key_id}","collaborators_url":"https://api.github.com/repos/felixfontein/community.docker/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/felixfontein/community.docker/teams","hooks_url":"https://api.github.com/repos/felixfontein/community.docker/hooks","issue_events_url":"https://api.github.com/repos/felixfontein/community.docker/issues/events{/number}","events_url":"https://api.github.com/repos/felixfontein/community.docker/events","assignees_url":"https://api.github.com/repos/felixfontein/community.docker/assignees{/user}","branches_url":"https://api.github.com/repos/felixfontein/community.docker/branches{/branch}","tags_url":"https://api.github.com/repos/felixfontein/community.docker/tags","blobs_url":"https://api.github.com/repos/felixfontein/community.docker/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/felixfontein/community.docker/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/felixfontein/community.docker/git/refs{/sha}","trees_url":"https://api.github.com/repos/felixfontein/community.docker/git/trees{/sha}","statuses_url":"https://api.github.com/repos/felixfontein/community.docker/statuses/{sha}","languages_url":"https://api.github.com/repos/felixfontein/community.docker/languages","stargazers_url":"https://api.github.com/repos/felixfontein/community.docker/stargazers","contributors_url":"https://api.github.com/repos/felixfontein/community.docker/contributors","subscribers_url":"https://api.github.com/repos/felixfontein/community.docker/subscribers","subscription_url":"https://api.github.com/repos/felixfontein/community.docker/subscription","commits_url":"https://api.github.com/repos/felixfontein/community.docker/commits{/sha}","git_commits_url":"https://api.github.com/repos/felixfontein/community.docker/git/commits{/sha}","comments_url":"https://api.github.com/repos/felixfontein/community.docker/comments{/number}","issue_comment_url":"https://api.github.com/repos/felixfontein/community.docker/issues/comments{/number}","contents_url":"https://api.github.com/repos/felixfontein/community.docker/contents/{+path}","compare_url":"https://api.github.com/repos/felixfontein/community.docker/compare/{base}...{head}","merges_url":"https://api.github.com/repos/felixfontein/community.docker/merges","archive_url":"https://api.github.com/repos/felixfontein/community.docker/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/felixfontein/community.docker/downloads","issues_url":"https://api.github.com/repos/felixfontein/community.docker/issues{/number}","pulls_url":"https://api.github.com/repos/felixfontein/community.docker/pulls{/number}","milestones_url":"https://api.github.com/repos/felixfontein/community.docker/milestones{/number}","notifications_url":"https://api.github.com/repos/felixfontein/community.docker/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/felixfontein/community.docker/labels{/name}","releases_url":"https://api.github.com/repos/felixfontein/community.docker/releases{/id}","deployments_url":"https://api.github.com/repos/felixfontein/community.docker/deployments","created_at":"2020-10-28T08:55:31Z","updated_at":"2021-02-24T22:46:18Z","pushed_at":"2021-02-24T22:46:15Z","git_url":"git://github.com/felixfontein/community.docker.git","ssh_url":"git@github.com:felixfontein/community.docker.git","clone_url":"https://github.com/felixfontein/community.docker.git","svn_url":"https://github.com/felixfontein/community.docker","homepage":null,"size":575,"stargazers_count":1,"watchers_count":1,"language":"Python","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"gpl-3.0","name":"GNU
        General Public License v3.0","spdx_id":"GPL-3.0","url":"https://api.github.com/licenses/gpl-3.0","node_id":"MDc6TGljZW5zZTk="},"forks":0,"open_issues":0,"watchers":1,"default_branch":"main"}},"base":{"label":"ansible-collections:main","ref":"main","sha":"a1a7692e747bc08aeeb3130c705d1fe1e689b7ed","user":{"login":"ansible-collections","id":44586252,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ0NTg2MjUy","avatar_url":"https://avatars.githubusercontent.com/u/44586252?v=4","gravatar_id":"","url":"https://api.github.com/users/ansible-collections","html_url":"https://github.com/ansible-collections","followers_url":"https://api.github.com/users/ansible-collections/followers","following_url":"https://api.github.com/users/ansible-collections/following{/other_user}","gists_url":"https://api.github.com/users/ansible-collections/gists{/gist_id}","starred_url":"https://api.github.com/users/ansible-collections/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ansible-collections/subscriptions","organizations_url":"https://api.github.com/users/ansible-collections/orgs","repos_url":"https://api.github.com/users/ansible-collections/repos","events_url":"https://api.github.com/users/ansible-collections/events{/privacy}","received_events_url":"https://api.github.com/users/ansible-collections/received_events","type":"Organization","site_admin":false},"repo":{"id":307940262,"node_id":"MDEwOlJlcG9zaXRvcnkzMDc5NDAyNjI=","name":"community.docker","full_name":"ansible-collections/community.docker","private":false,"owner":{"login":"ansible-collections","id":44586252,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ0NTg2MjUy","avatar_url":"https://avatars.githubusercontent.com/u/44586252?v=4","gravatar_id":"","url":"https://api.github.com/users/ansible-collections","html_url":"https://github.com/ansible-collections","followers_url":"https://api.github.com/users/ansible-collections/followers","following_url":"https://api.github.com/users/ansible-collections/following{/other_user}","gists_url":"https://api.github.com/users/ansible-collections/gists{/gist_id}","starred_url":"https://api.github.com/users/ansible-collections/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ansible-collections/subscriptions","organizations_url":"https://api.github.com/users/ansible-collections/orgs","repos_url":"https://api.github.com/users/ansible-collections/repos","events_url":"https://api.github.com/users/ansible-collections/events{/privacy}","received_events_url":"https://api.github.com/users/ansible-collections/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/ansible-collections/community.docker","description":"Community
        Docker Collection for Ansible: modules and plugins for working with Docker","fork":false,"url":"https://api.github.com/repos/ansible-collections/community.docker","forks_url":"https://api.github.com/repos/ansible-collections/community.docker/forks","keys_url":"https://api.github.com/repos/ansible-collections/community.docker/keys{/key_id}","collaborators_url":"https://api.github.com/repos/ansible-collections/community.docker/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/ansible-collections/community.docker/teams","hooks_url":"https://api.github.com/repos/ansible-collections/community.docker/hooks","issue_events_url":"https://api.github.com/repos/ansible-collections/community.docker/issues/events{/number}","events_url":"https://api.github.com/repos/ansible-collections/community.docker/events","assignees_url":"https://api.github.com/repos/ansible-collections/community.docker/assignees{/user}","branches_url":"https://api.github.com/repos/ansible-collections/community.docker/branches{/branch}","tags_url":"https://api.github.com/repos/ansible-collections/community.docker/tags","blobs_url":"https://api.github.com/repos/ansible-collections/community.docker/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/ansible-collections/community.docker/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/ansible-collections/community.docker/git/refs{/sha}","trees_url":"https://api.github.com/repos/ansible-collections/community.docker/git/trees{/sha}","statuses_url":"https://api.github.com/repos/ansible-collections/community.docker/statuses/{sha}","languages_url":"https://api.github.com/repos/ansible-collections/community.docker/languages","stargazers_url":"https://api.github.com/repos/ansible-collections/community.docker/stargazers","contributors_url":"https://api.github.com/repos/ansible-collections/community.docker/contributors","subscribers_url":"https://api.github.com/repos/ansible-collections/community.docker/subscribers","subscription_url":"https://api.github.com/repos/ansible-collections/community.docker/subscription","commits_url":"https://api.github.com/repos/ansible-collections/community.docker/commits{/sha}","git_commits_url":"https://api.github.com/repos/ansible-collections/community.docker/git/commits{/sha}","comments_url":"https://api.github.com/repos/ansible-collections/community.docker/comments{/number}","issue_comment_url":"https://api.github.com/repos/ansible-collections/community.docker/issues/comments{/number}","contents_url":"https://api.github.com/repos/ansible-collections/community.docker/contents/{+path}","compare_url":"https://api.github.com/repos/ansible-collections/community.docker/compare/{base}...{head}","merges_url":"https://api.github.com/repos/ansible-collections/community.docker/merges","archive_url":"https://api.github.com/repos/ansible-collections/community.docker/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/ansible-collections/community.docker/downloads","issues_url":"https://api.github.com/repos/ansible-collections/community.docker/issues{/number}","pulls_url":"https://api.github.com/repos/ansible-collections/community.docker/pulls{/number}","milestones_url":"https://api.github.com/repos/ansible-collections/community.docker/milestones{/number}","notifications_url":"https://api.github.com/repos/ansible-collections/community.docker/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/ansible-collections/community.docker/labels{/name}","releases_url":"https://api.github.com/repos/ansible-collections/community.docker/releases{/id}","deployments_url":"https://api.github.com/repos/ansible-collections/community.docker/deployments","created_at":"2020-10-28T07:39:12Z","updated_at":"2021-02-24T22:45:37Z","pushed_at":"2021-02-24T22:45:34Z","git_url":"git://github.com/ansible-collections/community.docker.git","ssh_url":"git@github.com:ansible-collections/community.docker.git","clone_url":"https://github.com/ansible-collections/community.docker.git","svn_url":"https://github.com/ansible-collections/community.docker","homepage":"https://galaxy.ansible.com/community/docker/","size":517,"stargazers_count":12,"watchers_count":12,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":12,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":23,"license":{"key":"gpl-3.0","name":"GNU
        General Public License v3.0","spdx_id":"GPL-3.0","url":"https://api.github.com/licenses/gpl-3.0","node_id":"MDc6TGljZW5zZTk="},"forks":12,"open_issues":23,"watchers":12,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/ansible-collections/community.docker/pulls/55"},"html":{"href":"https://github.com/ansible-collections/community.docker/pull/55"},"issue":{"href":"https://api.github.com/repos/ansible-collections/community.docker/issues/55"},"comments":{"href":"https://api.github.com/repos/ansible-collections/community.docker/issues/55/comments"},"review_comments":{"href":"https://api.github.com/repos/ansible-collections/community.docker/pulls/55/comments"},"review_comment":{"href":"https://api.github.com/repos/ansible-collections/community.docker/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/ansible-collections/community.docker/pulls/55/commits"},"statuses":{"href":"https://api.github.com/repos/ansible-collections/community.docker/statuses/9765947ac0af25ab95771b9745efb1a55cf6b14d"}},"author_association":"COLLABORATOR","auto_merge":null,"active_lock_reason":null,"merged":true,"mergeable":null,"rebaseable":null,"mergeable_state":"unknown","merged_by":{"login":"felixfontein","id":5781356,"node_id":"MDQ6VXNlcjU3ODEzNTY=","avatar_url":"https://avatars.githubusercontent.com/u/5781356?v=4","gravatar_id":"","url":"https://api.github.com/users/felixfontein","html_url":"https://github.com/felixfontein","followers_url":"https://api.github.com/users/felixfontein/followers","following_url":"https://api.github.com/users/felixfontein/following{/other_user}","gists_url":"https://api.github.com/users/felixfontein/gists{/gist_id}","starred_url":"https://api.github.com/users/felixfontein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felixfontein/subscriptions","organizations_url":"https://api.github.com/users/felixfontein/orgs","repos_url":"https://api.github.com/users/felixfontein/repos","events_url":"https://api.github.com/users/felixfontein/events{/privacy}","received_events_url":"https://api.github.com/users/felixfontein/received_events","type":"User","site_admin":false},"comments":11,"review_comments":3,"maintainer_can_modify":false,"commits":1,"additions":63,"deletions":6,"changed_files":3}'
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Access-Control-Expose-Headers:
      - ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes,
        X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
      Cache-Control:
      - private, max-age=60, s-maxage=60
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - default-src 'none'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:07:03 GMT
      Etag:
      - W/"2bf64a62baa20f372c20cceab2faa60f9e0665546a3c335f6eda06c35841573d"
      Last-Modified:
      - Wed, 17 Feb 2021 15:08:36 GMT
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept, Authorization, Cookie, X-GitHub-OTP
      - Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes:
      - ''
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Media-Type:
      - github.cloak-preview, github.groot-preview; format=json
      X-GitHub-Request-Id:
      - 818A:149F:8B06BD:F05EB5:60371456
      X-OAuth-Scopes:
      - repo, workflow
      X-RateLimit-Limit:
      - '5000'
      X-RateLimit-Remaining:
      - '4195'
      X-RateLimit-Reset:
      - '1614224282'
      X-XSS-Protection:
      - 1; mode=block
      x-ratelimit-used:
      - '805'
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/ansible-collections/community.docker/pulls/55
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Cookie:
      - logged_in=no
      Host:
      - github.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://github.com/ansible-collections/community.docker/pull/55.diff
  response:
    body: {}
    headers:
      Cache-Control:
      - no-cache
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com online.visualstudio.com/api/v1/locations;
        font-src github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/html; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:07:03 GMT
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Location:
      - https://patch-diff.githubusercontent.com/raw/ansible-collections/community.docker/pull/55.diff
      Referrer-Policy:
      - no-referrer-when-downgrade
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5AE:2DD9:88CA20:A999E6:60371457
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 302
      message: Found
    url: https://github.com/ansible-collections/community.docker/pull/55.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Host:
      - patch-diff.githubusercontent.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://patch-diff.githubusercontent.com/raw/ansible-collections/community.docker/pull/55.diff
  response:
    body:
      string: "diff --git a/changelogs/fragments/55-docker_image-loading.yml b/changelogs/fragments/55-docker_image-loading.yml\nnew
        file mode 100644\nindex 0000000..c7694f0\n--- /dev/null\n+++ b/changelogs/fragments/55-docker_image-loading.yml\n@@
        -0,0 +1,3 @@\n+bugfixes:\n+- \"docker_image - report error when loading a
        broken archive that contains no image (https://github.com/ansible-collections/community.docker/issues/46,
        https://github.com/ansible-collections/community.docker/pull/55).\"\n+- \"docker_image
        - report error when the loaded archive does not contain the specified image
        (https://github.com/ansible-collections/community.docker/issues/41, https://github.com/ansible-collections/community.docker/pull/55).\"\ndiff
        --git a/plugins/modules/docker_image.py b/plugins/modules/docker_image.py\nindex
        3daf009..0ee048b 100644\n--- a/plugins/modules/docker_image.py\n+++ b/plugins/modules/docker_image.py\n@@
        -640,7 +640,7 @@ def build_image(self):\n             # line = json.loads(line)\n
        \            self.log(line, pretty_print=True)\n             if \"stream\"
        in line or \"status\" in line:\n-                build_line = line.get(\"stream\")
        or line.get(\"status\")\n+                build_line = line.get(\"stream\")
        or line.get(\"status\") or ''\n                 build_output.append(build_line)\n
        \n             if line.get('error'):\n@@ -665,17 +665,45 @@ def load_image(self):\n
        \n         :return: image dict\n         '''\n+        # Load image(s) from
        file\n+        load_output = []\n         try:\n             self.log(\"Opening
        image %s\" % self.load_path)\n             with open(self.load_path, 'rb')
        as image_tar:\n                 self.log(\"Loading image from %s\" % self.load_path)\n-
        \               self.client.load_image(image_tar)\n+                for line
        in self.client.load_image(image_tar):\n+                    self.log(line,
        pretty_print=True)\n+                    if \"stream\" in line or \"status\"
        in line:\n+                        load_line = line.get(\"stream\") or line.get(\"status\")
        or ''\n+                        load_output.append(load_line)\n         except
        EnvironmentError as exc:\n             if exc.errno == errno.ENOENT:\n-                self.fail(\"Error
        opening image %s - %s\" % (self.load_path, str(exc)))\n-            self.fail(\"Error
        loading image %s - %s\" % (self.name, str(exc)))\n+                self.client.fail(\"Error
        opening image %s - %s\" % (self.load_path, str(exc)))\n+            self.client.fail(\"Error
        loading image %s - %s\" % (self.name, str(exc)), stdout='\\n'.join(load_output))\n
        \        except Exception as exc:\n-            self.fail(\"Error loading
        image %s - %s\" % (self.name, str(exc)))\n+            self.client.fail(\"Error
        loading image %s - %s\" % (self.name, str(exc)), stdout='\\n'.join(load_output))\n+\n+
        \       # Collect loaded images\n+        loaded_images = set()\n+        for
        line in load_output:\n+            if line.startswith('Loaded image:'):\n+
        \               loaded_images.add(line[len('Loaded image:'):].strip())\n+\n+
        \       if not loaded_images:\n+            self.client.fail(\"Detected no
        loaded images. Archive potentially corrupt?\", stdout='\\n'.join(load_output))\n+\n+
        \       expected_image = '%s:%s' % (self.name, self.tag)\n+        if expected_image
        not in loaded_images:\n+            self.client.fail(\n+                \"The
        archive did not contain image '%s'. Instead, found %s.\" % (\n+                    expected_image,
        ', '.join([\"'%s'\" % image for image in sorted(loaded_images)])),\n+                stdout='\\n'.join(load_output))\n+
        \       loaded_images.remove(expected_image)\n+\n+        if loaded_images:\n+
        \           self.client.module.warn(\n+                \"The archive contained
        more images than specified: %s\" % (\n+                    ', '.join([\"'%s'\"
        % image for image in sorted(loaded_images)]), ))\n \n         return self.client.find_image(self.name,
        self.tag)\n \ndiff --git a/tests/integration/targets/docker_image/tasks/tests/options.yml
        b/tests/integration/targets/docker_image/tasks/tests/options.yml\nindex b04fa8e..576f5d4
        100644\n--- a/tests/integration/targets/docker_image/tasks/tests/options.yml\n+++
        b/tests/integration/targets/docker_image/tasks/tests/options.yml\n@@ -189,6
        +189,11 @@\n     source: pull\n   register: archive_image\n \n+- name: Create
        invalid archive\n+  copy:\n+    dest: \"{{ output_dir }}/image-invalid.tar\"\n+
        \   content: \"this is not a valid image\"\n+\n - name: remove image\n   docker_image:\n
        \    name: \"{{ docker_test_image_hello_world }}\"\n@@ -209,11 +214,32 @@\n
        \    source: load\n   register: load_image_1\n \n+- name: load image (wrong
        name)\n+  docker_image:\n+    name: foo:bar\n+    load_path: \"{{ output_dir
        }}/image.tar\"\n+    source: load\n+  register: load_image_2\n+  ignore_errors:
        true\n+\n+- name: load image (invalid image)\n+  docker_image:\n+    name:
        foo:bar\n+    load_path: \"{{ output_dir }}/image-invalid.tar\"\n+    source:
        load\n+  register: load_image_3\n+  ignore_errors: true\n+\n - assert:\n     that:\n
        \    - load_image is changed\n-    - load_image_1 is not changed\n     - archive_image['image']['Id']
        == load_image['image']['Id']\n+    - load_image_1 is not changed\n+    - load_image_2
        is failed\n+    - >-\n+      \"The archive did not contain image 'foo:bar'.
        Instead, found '\" ~ docker_test_image_hello_world ~ \"'.\" == load_image_2.msg\n+
        \   - load_image_3 is failed\n+    - '\"Detected no loaded images. Archive
        potentially corrupt?\" == load_image_3.msg'\n \n ####################################################################\n
        ## path ############################################################\n"
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com; font-src
        github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/plain; charset=utf-8
      Date:
      - Thu, 25 Feb 2021 03:07:03 GMT
      Etag:
      - W/"90824d3a346e0c47df1a07cbd7c067ed"
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Set-Cookie:
      - logged_in=no; domain=.github.com; path=/; expires=Fri, 25 Feb 2022 03:07:03
        GMT; secure; HttpOnly; SameSite=Lax
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D5A2:7E2A:A72461:D0736F:60371456
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 200
      message: OK
    url: https://patch-diff.githubusercontent.com/raw/ansible-collections/community.docker/pull/55.diff
version: 1
