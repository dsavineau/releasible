interactions:
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
    method: GET
    uri: https://api.github.com/search/commits?per_page=100&q=hash:997b2d2a1955ccb4e70f805c18dc3e227e86c678+org:ansible+org:ansible-collections+is:public
  response:
    body:
      string: '{"total_count":1,"incomplete_results":false,"items":[{"url":"https://api.github.com/repos/ansible/ansible/commits/997b2d2a1955ccb4e70f805c18dc3e227e86c678","sha":"997b2d2a1955ccb4e70f805c18dc3e227e86c678","node_id":"MDY6Q29tbWl0MzYzODk2NDo5OTdiMmQyYTE5NTVjY2I0ZTcwZjgwNWMxOGRjM2UyMjdlODZjNjc4","html_url":"https://github.com/ansible/ansible/commit/997b2d2a1955ccb4e70f805c18dc3e227e86c678","comments_url":"https://api.github.com/repos/ansible/ansible/commits/997b2d2a1955ccb4e70f805c18dc3e227e86c678/comments","commit":{"url":"https://api.github.com/repos/ansible/ansible/git/commits/997b2d2a1955ccb4e70f805c18dc3e227e86c678","author":{"date":"2021-02-03T20:34:12.000-05:00","name":"Sam
        Doran","email":"sdoran@redhat.com"},"committer":{"date":"2021-02-03T17:34:12.000-08:00","name":"GitHub","email":"noreply@github.com"},"message":"Make
        yum_repository test more reliable (#73467)\n\n* Improve setup_rpm_repo\r\n\r\n-
        add handlers to remove repos\r\n- add variable to control whethere or not
        repos are created\r\n\r\n* Use local repo for all distros\r\n* Change repo
        creation script to module","tree":{"url":"https://api.github.com/repos/ansible/ansible/git/trees/9dd8ed3252c45516fe56d9c423df41eceb019a01","sha":"9dd8ed3252c45516fe56d9c423df41eceb019a01"},"comment_count":0},"author":{"login":"samdoran","id":4047861,"node_id":"MDQ6VXNlcjQwNDc4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/4047861?v=4","gravatar_id":"","url":"https://api.github.com/users/samdoran","html_url":"https://github.com/samdoran","followers_url":"https://api.github.com/users/samdoran/followers","following_url":"https://api.github.com/users/samdoran/following{/other_user}","gists_url":"https://api.github.com/users/samdoran/gists{/gist_id}","starred_url":"https://api.github.com/users/samdoran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samdoran/subscriptions","organizations_url":"https://api.github.com/users/samdoran/orgs","repos_url":"https://api.github.com/users/samdoran/repos","events_url":"https://api.github.com/users/samdoran/events{/privacy}","received_events_url":"https://api.github.com/users/samdoran/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"url":"https://api.github.com/repos/ansible/ansible/commits/9759e0ca494de1fd5fc2df2c5d11c57adbe6007c","html_url":"https://github.com/ansible/ansible/commit/9759e0ca494de1fd5fc2df2c5d11c57adbe6007c","sha":"9759e0ca494de1fd5fc2df2c5d11c57adbe6007c"}],"repository":{"id":3638964,"node_id":"MDEwOlJlcG9zaXRvcnkzNjM4OTY0","name":"ansible","full_name":"ansible/ansible","private":false,"owner":{"login":"ansible","id":1507452,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/1507452?v=4","gravatar_id":"","url":"https://api.github.com/users/ansible","html_url":"https://github.com/ansible","followers_url":"https://api.github.com/users/ansible/followers","following_url":"https://api.github.com/users/ansible/following{/other_user}","gists_url":"https://api.github.com/users/ansible/gists{/gist_id}","starred_url":"https://api.github.com/users/ansible/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ansible/subscriptions","organizations_url":"https://api.github.com/users/ansible/orgs","repos_url":"https://api.github.com/users/ansible/repos","events_url":"https://api.github.com/users/ansible/events{/privacy}","received_events_url":"https://api.github.com/users/ansible/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/ansible/ansible","description":"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy and maintain. Automate everything from code deployment
        to network configuration to cloud management, in a language that approaches
        plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com.","fork":false,"url":"https://api.github.com/repos/ansible/ansible","forks_url":"https://api.github.com/repos/ansible/ansible/forks","keys_url":"https://api.github.com/repos/ansible/ansible/keys{/key_id}","collaborators_url":"https://api.github.com/repos/ansible/ansible/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/ansible/ansible/teams","hooks_url":"https://api.github.com/repos/ansible/ansible/hooks","issue_events_url":"https://api.github.com/repos/ansible/ansible/issues/events{/number}","events_url":"https://api.github.com/repos/ansible/ansible/events","assignees_url":"https://api.github.com/repos/ansible/ansible/assignees{/user}","branches_url":"https://api.github.com/repos/ansible/ansible/branches{/branch}","tags_url":"https://api.github.com/repos/ansible/ansible/tags","blobs_url":"https://api.github.com/repos/ansible/ansible/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/ansible/ansible/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/ansible/ansible/git/refs{/sha}","trees_url":"https://api.github.com/repos/ansible/ansible/git/trees{/sha}","statuses_url":"https://api.github.com/repos/ansible/ansible/statuses/{sha}","languages_url":"https://api.github.com/repos/ansible/ansible/languages","stargazers_url":"https://api.github.com/repos/ansible/ansible/stargazers","contributors_url":"https://api.github.com/repos/ansible/ansible/contributors","subscribers_url":"https://api.github.com/repos/ansible/ansible/subscribers","subscription_url":"https://api.github.com/repos/ansible/ansible/subscription","commits_url":"https://api.github.com/repos/ansible/ansible/commits{/sha}","git_commits_url":"https://api.github.com/repos/ansible/ansible/git/commits{/sha}","comments_url":"https://api.github.com/repos/ansible/ansible/comments{/number}","issue_comment_url":"https://api.github.com/repos/ansible/ansible/issues/comments{/number}","contents_url":"https://api.github.com/repos/ansible/ansible/contents/{+path}","compare_url":"https://api.github.com/repos/ansible/ansible/compare/{base}...{head}","merges_url":"https://api.github.com/repos/ansible/ansible/merges","archive_url":"https://api.github.com/repos/ansible/ansible/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/ansible/ansible/downloads","issues_url":"https://api.github.com/repos/ansible/ansible/issues{/number}","pulls_url":"https://api.github.com/repos/ansible/ansible/pulls{/number}","milestones_url":"https://api.github.com/repos/ansible/ansible/milestones{/number}","notifications_url":"https://api.github.com/repos/ansible/ansible/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/ansible/ansible/labels{/name}","releases_url":"https://api.github.com/repos/ansible/ansible/releases{/id}","deployments_url":"https://api.github.com/repos/ansible/ansible/deployments"},"score":1.0}]}'
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Access-Control-Expose-Headers:
      - ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes,
        X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
      Cache-Control:
      - no-cache
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - default-src 'none'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Sat, 27 Feb 2021 07:10:37 GMT
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept, Authorization, Cookie, X-GitHub-OTP
      - Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes:
      - ''
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Media-Type:
      - github.cloak-preview, github.groot-preview; format=json
      X-GitHub-Request-Id:
      - AABA:5486:458FF5:876EEE:6039F06D
      X-OAuth-Scopes:
      - repo, workflow
      X-RateLimit-Limit:
      - '30'
      X-RateLimit-Remaining:
      - '29'
      X-RateLimit-Reset:
      - '1614409897'
      X-XSS-Protection:
      - 1; mode=block
      x-ratelimit-used:
      - '1'
    status:
      code: 200
      message: OK
    url: https://api.github.com/search/commits?per_page=100&q=hash:997b2d2a1955ccb4e70f805c18dc3e227e86c678+org:ansible+org:ansible-collections+is:public
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
    method: GET
    uri: https://api.github.com/repos/ansible/ansible/commits/997b2d2a1955ccb4e70f805c18dc3e227e86c678/pulls?per_page=100
  response:
    body:
      string: "[{\"url\":\"https://api.github.com/repos/ansible/ansible/pulls/73467\",\"id\":567105430,\"node_id\":\"MDExOlB1bGxSZXF1ZXN0NTY3MTA1NDMw\",\"html_url\":\"https://github.com/ansible/ansible/pull/73467\",\"diff_url\":\"https://github.com/ansible/ansible/pull/73467.diff\",\"patch_url\":\"https://github.com/ansible/ansible/pull/73467.patch\",\"issue_url\":\"https://api.github.com/repos/ansible/ansible/issues/73467\",\"number\":73467,\"state\":\"closed\",\"locked\":false,\"title\":\"Make
        yum_repository test more reliable\",\"user\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"body\":\"#####
        SUMMARY\\r\\n<!--- Describe the change below, including rationale and design
        decisions -->\\r\\nThe `rpm-fusion` repo removed files for older Fedora versions.
        Switching to using a locally generated repository, which greatly simplifies
        this test and improves its reliability.\\r\\n\\r\\n<!--- HINT: Include \\\"Fixes
        #nnn\\\" if you are fixing an existing issue -->\\r\\n\\r\\n##### ISSUE TYPE\\r\\n<!---
        Pick one below and delete the rest -->\\r\\n\\r\\n- Test Pull Request\\r\\n\\r\\n#####
        COMPONENT NAME\\r\\n<!--- Write the short name of the module, plugin, task
        or feature below -->\\r\\n`test/integration/targets/yum_repository`\",\"created_at\":\"2021-02-03T19:58:20Z\",\"updated_at\":\"2021-02-04T15:32:52Z\",\"closed_at\":\"2021-02-04T01:34:12Z\",\"merged_at\":\"2021-02-04T01:34:12Z\",\"merge_commit_sha\":\"997b2d2a1955ccb4e70f805c18dc3e227e86c678\",\"assignee\":null,\"assignees\":[],\"requested_reviewers\":[],\"requested_teams\":[],\"labels\":[{\"id\":1742671738,\"node_id\":\"MDU6TGFiZWwxNzQyNjcxNzM4\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/affects_2.11\",\"name\":\"affects_2.11\",\"color\":\"5319e7\",\"default\":false,\"description\":\"\"},{\"id\":1285191701,\"node_id\":\"MDU6TGFiZWwxMjg1MTkxNzAx\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/collection\",\"name\":\"collection\",\"color\":\"b60205\",\"default\":false,\"description\":\"Related
        to Ansible Collections work\"},{\"id\":2279037249,\"node_id\":\"MDU6TGFiZWwyMjc5MDM3MjQ5\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/collection:ktdreyer.errata_tool_ansible\",\"name\":\"collection:ktdreyer.errata_tool_ansible\",\"color\":\"ededed\",\"default\":false,\"description\":null},{\"id\":513652538,\"node_id\":\"MDU6TGFiZWw1MTM2NTI1Mzg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/core_review\",\"name\":\"core_review\",\"color\":\"ededed\",\"default\":false,\"description\":\"In
        order to be merged, this PR must follow the core review workflow.\"},{\"id\":636327968,\"node_id\":\"MDU6TGFiZWw2MzYzMjc5Njg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:community\",\"name\":\"support:community\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible community.\"},{\"id\":636352796,\"node_id\":\"MDU6TGFiZWw2MzYzNTI3OTY=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:core\",\"name\":\"support:core\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible Engineering Team.\"}],\"milestone\":null,\"draft\":false,\"commits_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73467/commits\",\"review_comments_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73467/comments\",\"review_comment_url\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/issues/73467/comments\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/e3c500fb74d1f71242f6e0ac9b9a66eb38786aad\",\"head\":{\"label\":\"samdoran:ci/yum_repository-test-fix\",\"ref\":\"ci/yum_repository-test-fix\",\"sha\":\"e3c500fb74d1f71242f6e0ac9b9a66eb38786aad\",\"user\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"repo\":{\"id\":70726272,\"node_id\":\"MDEwOlJlcG9zaXRvcnk3MDcyNjI3Mg==\",\"name\":\"ansible\",\"full_name\":\"samdoran/ansible\",\"private\":false,\"owner\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"html_url\":\"https://github.com/samdoran/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy. Avoid writing scripts or custom code to deploy
        and update your applications\u2014 automate in a language that approaches
        plain English, using SSH, with no agents to install on remote systems.\",\"fork\":true,\"url\":\"https://api.github.com/repos/samdoran/ansible\",\"forks_url\":\"https://api.github.com/repos/samdoran/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/samdoran/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/samdoran/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/samdoran/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/samdoran/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/samdoran/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/samdoran/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/samdoran/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/samdoran/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/samdoran/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/samdoran/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/samdoran/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/samdoran/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/samdoran/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/samdoran/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/samdoran/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/samdoran/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/samdoran/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/samdoran/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/samdoran/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/samdoran/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/samdoran/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/samdoran/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/samdoran/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/samdoran/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/samdoran/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/samdoran/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/samdoran/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/samdoran/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/samdoran/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/samdoran/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/samdoran/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/samdoran/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/samdoran/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/samdoran/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/samdoran/ansible/deployments\",\"created_at\":\"2016-10-12T17:53:34Z\",\"updated_at\":\"2020-11-19T13:40:09Z\",\"pushed_at\":\"2021-02-26T15:28:41Z\",\"git_url\":\"git://github.com/samdoran/ansible.git\",\"ssh_url\":\"git@github.com:samdoran/ansible.git\",\"clone_url\":\"https://github.com/samdoran/ansible.git\",\"svn_url\":\"https://github.com/samdoran/ansible\",\"homepage\":\"http://ansible.com/\",\"size\":187311,\"stargazers_count\":1,\"watchers_count\":1,\"language\":\"Python\",\"has_issues\":false,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":1,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":0,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":1,\"open_issues\":0,\"watchers\":1,\"default_branch\":\"devel\"}},\"base\":{\"label\":\"ansible:devel\",\"ref\":\"devel\",\"sha\":\"fce22529c4f5a7293f12979e7cb45f5ed9f6e9f7\",\"user\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"repo\":{\"id\":3638964,\"node_id\":\"MDEwOlJlcG9zaXRvcnkzNjM4OTY0\",\"name\":\"ansible\",\"full_name\":\"ansible/ansible\",\"private\":false,\"owner\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"html_url\":\"https://github.com/ansible/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy and maintain. Automate everything from code deployment
        to network configuration to cloud management, in a language that approaches
        plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com.\",\"fork\":false,\"url\":\"https://api.github.com/repos/ansible/ansible\",\"forks_url\":\"https://api.github.com/repos/ansible/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/ansible/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/ansible/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/ansible/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/ansible/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/ansible/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/ansible/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/ansible/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/ansible/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/ansible/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/ansible/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/ansible/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/ansible/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/ansible/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/ansible/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/ansible/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/ansible/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/ansible/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/ansible/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/ansible/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/ansible/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/ansible/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/ansible/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/ansible/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/ansible/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/ansible/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/ansible/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/ansible/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/ansible/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/ansible/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/ansible/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/ansible/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/ansible/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/ansible/ansible/deployments\",\"created_at\":\"2012-03-06T14:58:02Z\",\"updated_at\":\"2021-02-27T02:40:42Z\",\"pushed_at\":\"2021-02-27T06:00:14Z\",\"git_url\":\"git://github.com/ansible/ansible.git\",\"ssh_url\":\"org-1507452@github.com:ansible/ansible.git\",\"clone_url\":\"https://github.com/ansible/ansible.git\",\"svn_url\":\"https://github.com/ansible/ansible\",\"homepage\":\"https://www.ansible.com/\",\"size\":194931,\"stargazers_count\":47033,\"watchers_count\":47033,\"language\":\"Python\",\"has_issues\":true,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":20311,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":1892,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":20311,\"open_issues\":1892,\"watchers\":47033,\"default_branch\":\"devel\"}},\"_links\":{\"self\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73467\"},\"html\":{\"href\":\"https://github.com/ansible/ansible/pull/73467\"},\"issue\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73467\"},\"comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73467/comments\"},\"review_comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73467/comments\"},\"review_comment\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\"},\"commits\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73467/commits\"},\"statuses\":{\"href\":\"https://api.github.com/repos/ansible/ansible/statuses/e3c500fb74d1f71242f6e0ac9b9a66eb38786aad\"}},\"author_association\":\"MEMBER\",\"auto_merge\":null,\"active_lock_reason\":null}]"
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Access-Control-Expose-Headers:
      - ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes,
        X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
      Cache-Control:
      - private, max-age=60, s-maxage=60
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - default-src 'none'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Sat, 27 Feb 2021 07:10:37 GMT
      Etag:
      - W/"1eb0939e84f744e290586b5db2db09fdbb888bfa8e3a6d5d8376620bfc87b704"
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept, Authorization, Cookie, X-GitHub-OTP
      - Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes:
      - ''
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Media-Type:
      - github.cloak-preview, github.groot-preview; format=json
      X-GitHub-Request-Id:
      - AABA:5486:459008:876F0A:6039F06D
      X-OAuth-Scopes:
      - repo, workflow
      X-RateLimit-Limit:
      - '5000'
      X-RateLimit-Remaining:
      - '4950'
      X-RateLimit-Reset:
      - '1614412319'
      X-XSS-Protection:
      - 1; mode=block
      x-ratelimit-used:
      - '50'
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/ansible/ansible/commits/997b2d2a1955ccb4e70f805c18dc3e227e86c678/pulls?per_page=100
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
    method: GET
    uri: https://api.github.com/repos/ansible/ansible/pulls/73467
  response:
    body:
      string: "{\"url\":\"https://api.github.com/repos/ansible/ansible/pulls/73467\",\"id\":567105430,\"node_id\":\"MDExOlB1bGxSZXF1ZXN0NTY3MTA1NDMw\",\"html_url\":\"https://github.com/ansible/ansible/pull/73467\",\"diff_url\":\"https://github.com/ansible/ansible/pull/73467.diff\",\"patch_url\":\"https://github.com/ansible/ansible/pull/73467.patch\",\"issue_url\":\"https://api.github.com/repos/ansible/ansible/issues/73467\",\"number\":73467,\"state\":\"closed\",\"locked\":false,\"title\":\"Make
        yum_repository test more reliable\",\"user\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"body\":\"#####
        SUMMARY\\r\\n<!--- Describe the change below, including rationale and design
        decisions -->\\r\\nThe `rpm-fusion` repo removed files for older Fedora versions.
        Switching to using a locally generated repository, which greatly simplifies
        this test and improves its reliability.\\r\\n\\r\\n<!--- HINT: Include \\\"Fixes
        #nnn\\\" if you are fixing an existing issue -->\\r\\n\\r\\n##### ISSUE TYPE\\r\\n<!---
        Pick one below and delete the rest -->\\r\\n\\r\\n- Test Pull Request\\r\\n\\r\\n#####
        COMPONENT NAME\\r\\n<!--- Write the short name of the module, plugin, task
        or feature below -->\\r\\n`test/integration/targets/yum_repository`\",\"created_at\":\"2021-02-03T19:58:20Z\",\"updated_at\":\"2021-02-04T15:32:52Z\",\"closed_at\":\"2021-02-04T01:34:12Z\",\"merged_at\":\"2021-02-04T01:34:12Z\",\"merge_commit_sha\":\"997b2d2a1955ccb4e70f805c18dc3e227e86c678\",\"assignee\":null,\"assignees\":[],\"requested_reviewers\":[],\"requested_teams\":[],\"labels\":[{\"id\":1742671738,\"node_id\":\"MDU6TGFiZWwxNzQyNjcxNzM4\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/affects_2.11\",\"name\":\"affects_2.11\",\"color\":\"5319e7\",\"default\":false,\"description\":\"\"},{\"id\":1285191701,\"node_id\":\"MDU6TGFiZWwxMjg1MTkxNzAx\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/collection\",\"name\":\"collection\",\"color\":\"b60205\",\"default\":false,\"description\":\"Related
        to Ansible Collections work\"},{\"id\":2279037249,\"node_id\":\"MDU6TGFiZWwyMjc5MDM3MjQ5\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/collection:ktdreyer.errata_tool_ansible\",\"name\":\"collection:ktdreyer.errata_tool_ansible\",\"color\":\"ededed\",\"default\":false,\"description\":null},{\"id\":513652538,\"node_id\":\"MDU6TGFiZWw1MTM2NTI1Mzg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/core_review\",\"name\":\"core_review\",\"color\":\"ededed\",\"default\":false,\"description\":\"In
        order to be merged, this PR must follow the core review workflow.\"},{\"id\":636327968,\"node_id\":\"MDU6TGFiZWw2MzYzMjc5Njg=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:community\",\"name\":\"support:community\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible community.\"},{\"id\":636352796,\"node_id\":\"MDU6TGFiZWw2MzYzNTI3OTY=\",\"url\":\"https://api.github.com/repos/ansible/ansible/labels/support:core\",\"name\":\"support:core\",\"color\":\"ededed\",\"default\":false,\"description\":\"This
        issue/PR relates to code supported by the Ansible Engineering Team.\"}],\"milestone\":null,\"draft\":false,\"commits_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73467/commits\",\"review_comments_url\":\"https://api.github.com/repos/ansible/ansible/pulls/73467/comments\",\"review_comment_url\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/issues/73467/comments\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/e3c500fb74d1f71242f6e0ac9b9a66eb38786aad\",\"head\":{\"label\":\"samdoran:ci/yum_repository-test-fix\",\"ref\":\"ci/yum_repository-test-fix\",\"sha\":\"e3c500fb74d1f71242f6e0ac9b9a66eb38786aad\",\"user\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"repo\":{\"id\":70726272,\"node_id\":\"MDEwOlJlcG9zaXRvcnk3MDcyNjI3Mg==\",\"name\":\"ansible\",\"full_name\":\"samdoran/ansible\",\"private\":false,\"owner\":{\"login\":\"samdoran\",\"id\":4047861,\"node_id\":\"MDQ6VXNlcjQwNDc4NjE=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/4047861?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/samdoran\",\"html_url\":\"https://github.com/samdoran\",\"followers_url\":\"https://api.github.com/users/samdoran/followers\",\"following_url\":\"https://api.github.com/users/samdoran/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/samdoran/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/samdoran/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/samdoran/subscriptions\",\"organizations_url\":\"https://api.github.com/users/samdoran/orgs\",\"repos_url\":\"https://api.github.com/users/samdoran/repos\",\"events_url\":\"https://api.github.com/users/samdoran/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/samdoran/received_events\",\"type\":\"User\",\"site_admin\":false},\"html_url\":\"https://github.com/samdoran/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy. Avoid writing scripts or custom code to deploy
        and update your applications\u2014 automate in a language that approaches
        plain English, using SSH, with no agents to install on remote systems.\",\"fork\":true,\"url\":\"https://api.github.com/repos/samdoran/ansible\",\"forks_url\":\"https://api.github.com/repos/samdoran/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/samdoran/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/samdoran/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/samdoran/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/samdoran/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/samdoran/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/samdoran/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/samdoran/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/samdoran/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/samdoran/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/samdoran/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/samdoran/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/samdoran/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/samdoran/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/samdoran/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/samdoran/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/samdoran/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/samdoran/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/samdoran/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/samdoran/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/samdoran/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/samdoran/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/samdoran/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/samdoran/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/samdoran/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/samdoran/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/samdoran/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/samdoran/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/samdoran/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/samdoran/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/samdoran/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/samdoran/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/samdoran/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/samdoran/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/samdoran/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/samdoran/ansible/deployments\",\"created_at\":\"2016-10-12T17:53:34Z\",\"updated_at\":\"2020-11-19T13:40:09Z\",\"pushed_at\":\"2021-02-26T15:28:41Z\",\"git_url\":\"git://github.com/samdoran/ansible.git\",\"ssh_url\":\"git@github.com:samdoran/ansible.git\",\"clone_url\":\"https://github.com/samdoran/ansible.git\",\"svn_url\":\"https://github.com/samdoran/ansible\",\"homepage\":\"http://ansible.com/\",\"size\":187311,\"stargazers_count\":1,\"watchers_count\":1,\"language\":\"Python\",\"has_issues\":false,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":1,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":0,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":1,\"open_issues\":0,\"watchers\":1,\"default_branch\":\"devel\"}},\"base\":{\"label\":\"ansible:devel\",\"ref\":\"devel\",\"sha\":\"fce22529c4f5a7293f12979e7cb45f5ed9f6e9f7\",\"user\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"repo\":{\"id\":3638964,\"node_id\":\"MDEwOlJlcG9zaXRvcnkzNjM4OTY0\",\"name\":\"ansible\",\"full_name\":\"ansible/ansible\",\"private\":false,\"owner\":{\"login\":\"ansible\",\"id\":1507452,\"node_id\":\"MDEyOk9yZ2FuaXphdGlvbjE1MDc0NTI=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/1507452?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/ansible\",\"html_url\":\"https://github.com/ansible\",\"followers_url\":\"https://api.github.com/users/ansible/followers\",\"following_url\":\"https://api.github.com/users/ansible/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/ansible/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/ansible/subscriptions\",\"organizations_url\":\"https://api.github.com/users/ansible/orgs\",\"repos_url\":\"https://api.github.com/users/ansible/repos\",\"events_url\":\"https://api.github.com/users/ansible/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/ansible/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"html_url\":\"https://github.com/ansible/ansible\",\"description\":\"Ansible
        is a radically simple IT automation platform that makes your applications
        and systems easier to deploy and maintain. Automate everything from code deployment
        to network configuration to cloud management, in a language that approaches
        plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com.\",\"fork\":false,\"url\":\"https://api.github.com/repos/ansible/ansible\",\"forks_url\":\"https://api.github.com/repos/ansible/ansible/forks\",\"keys_url\":\"https://api.github.com/repos/ansible/ansible/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/ansible/ansible/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/ansible/ansible/teams\",\"hooks_url\":\"https://api.github.com/repos/ansible/ansible/hooks\",\"issue_events_url\":\"https://api.github.com/repos/ansible/ansible/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/ansible/ansible/events\",\"assignees_url\":\"https://api.github.com/repos/ansible/ansible/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/ansible/ansible/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/ansible/ansible/tags\",\"blobs_url\":\"https://api.github.com/repos/ansible/ansible/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/ansible/ansible/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/ansible/ansible/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/ansible/ansible/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/ansible/ansible/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/ansible/ansible/languages\",\"stargazers_url\":\"https://api.github.com/repos/ansible/ansible/stargazers\",\"contributors_url\":\"https://api.github.com/repos/ansible/ansible/contributors\",\"subscribers_url\":\"https://api.github.com/repos/ansible/ansible/subscribers\",\"subscription_url\":\"https://api.github.com/repos/ansible/ansible/subscription\",\"commits_url\":\"https://api.github.com/repos/ansible/ansible/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/ansible/ansible/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/ansible/ansible/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/ansible/ansible/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/ansible/ansible/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/ansible/ansible/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/ansible/ansible/merges\",\"archive_url\":\"https://api.github.com/repos/ansible/ansible/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/ansible/ansible/downloads\",\"issues_url\":\"https://api.github.com/repos/ansible/ansible/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/ansible/ansible/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/ansible/ansible/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/ansible/ansible/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/ansible/ansible/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/ansible/ansible/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/ansible/ansible/deployments\",\"created_at\":\"2012-03-06T14:58:02Z\",\"updated_at\":\"2021-02-27T02:40:42Z\",\"pushed_at\":\"2021-02-27T06:00:14Z\",\"git_url\":\"git://github.com/ansible/ansible.git\",\"ssh_url\":\"org-1507452@github.com:ansible/ansible.git\",\"clone_url\":\"https://github.com/ansible/ansible.git\",\"svn_url\":\"https://github.com/ansible/ansible\",\"homepage\":\"https://www.ansible.com/\",\"size\":194931,\"stargazers_count\":47033,\"watchers_count\":47033,\"language\":\"Python\",\"has_issues\":true,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":false,\"forks_count\":20311,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":1892,\"license\":{\"key\":\"gpl-3.0\",\"name\":\"GNU
        General Public License v3.0\",\"spdx_id\":\"GPL-3.0\",\"url\":\"https://api.github.com/licenses/gpl-3.0\",\"node_id\":\"MDc6TGljZW5zZTk=\"},\"forks\":20311,\"open_issues\":1892,\"watchers\":47033,\"default_branch\":\"devel\"}},\"_links\":{\"self\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73467\"},\"html\":{\"href\":\"https://github.com/ansible/ansible/pull/73467\"},\"issue\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73467\"},\"comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/issues/73467/comments\"},\"review_comments\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73467/comments\"},\"review_comment\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/comments{/number}\"},\"commits\":{\"href\":\"https://api.github.com/repos/ansible/ansible/pulls/73467/commits\"},\"statuses\":{\"href\":\"https://api.github.com/repos/ansible/ansible/statuses/e3c500fb74d1f71242f6e0ac9b9a66eb38786aad\"}},\"author_association\":\"MEMBER\",\"auto_merge\":null,\"active_lock_reason\":null,\"merged\":true,\"mergeable\":null,\"rebaseable\":null,\"mergeable_state\":\"unknown\",\"merged_by\":{\"login\":\"mattclay\",\"id\":806360,\"node_id\":\"MDQ6VXNlcjgwNjM2MA==\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/806360?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/mattclay\",\"html_url\":\"https://github.com/mattclay\",\"followers_url\":\"https://api.github.com/users/mattclay/followers\",\"following_url\":\"https://api.github.com/users/mattclay/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/mattclay/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/mattclay/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/mattclay/subscriptions\",\"organizations_url\":\"https://api.github.com/users/mattclay/orgs\",\"repos_url\":\"https://api.github.com/users/mattclay/repos\",\"events_url\":\"https://api.github.com/users/mattclay/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/mattclay/received_events\",\"type\":\"User\",\"site_admin\":false},\"comments\":0,\"review_comments\":1,\"maintainer_can_modify\":false,\"commits\":7,\"additions\":138,\"deletions\":84,\"changed_files\":14}"
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Access-Control-Expose-Headers:
      - ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes,
        X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
      Cache-Control:
      - private, max-age=60, s-maxage=60
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - default-src 'none'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Sat, 27 Feb 2021 07:10:37 GMT
      Etag:
      - W/"2232aecec05c7068d2b44ace2f7fb449829a134c3a12ff64e76e707b2d8f2db1"
      Last-Modified:
      - Thu, 25 Feb 2021 15:44:45 GMT
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept, Authorization, Cookie, X-GitHub-OTP
      - Accept-Encoding, Accept, X-Requested-With
      X-Accepted-OAuth-Scopes:
      - ''
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Media-Type:
      - github.cloak-preview, github.groot-preview; format=json
      X-GitHub-Request-Id:
      - AABA:5486:459020:876F31:6039F06D
      X-OAuth-Scopes:
      - repo, workflow
      X-RateLimit-Limit:
      - '5000'
      X-RateLimit-Remaining:
      - '4949'
      X-RateLimit-Reset:
      - '1614412319'
      X-XSS-Protection:
      - 1; mode=block
      x-ratelimit-used:
      - '51'
    status:
      code: 200
      message: OK
    url: https://api.github.com/repos/ansible/ansible/pulls/73467
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Host:
      - github.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://github.com/ansible/ansible/pull/73467.diff
  response:
    body: {}
    headers:
      Cache-Control:
      - no-cache
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com online.visualstudio.com/api/v1/locations;
        font-src github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/html; charset=utf-8
      Date:
      - Sat, 27 Feb 2021 07:10:37 GMT
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Location:
      - https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73467.diff
      Referrer-Policy:
      - no-referrer-when-downgrade
      Server:
      - GitHub.com
      Set-Cookie:
      - logged_in=no; domain=.github.com; path=/; expires=Sun, 27 Feb 2022 07:10:37
        GMT; secure; HttpOnly; SameSite=Lax
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - CCB4:2B51:92BA93:B403A5:6039F06D
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 302
      message: Found
    url: https://github.com/ansible/ansible/pull/73467.diff
- request:
    body: null
    headers:
      Accept:
      - application/vnd.github.cloak-preview, application/vnd.github.groot-preview+json,
        application/vnd.github.v3+json
      Accept-Encoding:
      - gzip, deflate
      Host:
      - patch-diff.githubusercontent.com
      User-Agent:
      - Python/3.8 aiohttp/3.7.3
    method: GET
    uri: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73467.diff
  response:
    body:
      string: "diff --git a/test/integration/targets/setup_rpm_repo/defaults/main.yml
        b/test/integration/targets/setup_rpm_repo/defaults/main.yml\nindex e69de29bb2d1d..19c033b92964b
        100644\n--- a/test/integration/targets/setup_rpm_repo/defaults/main.yml\n+++
        b/test/integration/targets/setup_rpm_repo/defaults/main.yml\n@@ -0,0 +1 @@\n+install_repos:
        yes\ndiff --git a/test/integration/targets/setup_rpm_repo/handlers/main.yml
        b/test/integration/targets/setup_rpm_repo/handlers/main.yml\nnew file mode
        100644\nindex 0000000000000..a0af3c92d7594\n--- /dev/null\n+++ b/test/integration/targets/setup_rpm_repo/handlers/main.yml\n@@
        -0,0 +1,5 @@\n+- name: remove repos\n+  yum_repository:\n+    state: absent\n+
        \   name: \"{{ item }}\"\n+  loop: \"{{ repos }}\"\ndiff --git a/test/integration/targets/setup_rpm_repo/library/create_repo.py
        b/test/integration/targets/setup_rpm_repo/library/create_repo.py\nnew file
        mode 100644\nindex 0000000000000..6dc1e457c5567\n--- /dev/null\n+++ b/test/integration/targets/setup_rpm_repo/library/create_repo.py\n@@
        -0,0 +1,94 @@\n+#!/usr/bin/python\n+\n+from __future__ import (absolute_import,
        division, print_function)\n+__metaclass__ = type\n+\n+import os\n+import sys\n+import
        tempfile\n+\n+from collections import namedtuple\n+\n+from ansible.module_utils.basic
        import AnsibleModule\n+\n+try:\n+    from rpmfluff import SimpleRpmBuild\n+
        \   from rpmfluff import YumRepoBuild\n+except ImportError:\n+    from rpmfluff.rpmbuild
        import SimpleRpmBuild\n+    from rpmfluff.yumrepobuild import YumRepoBuild\n+\n+try:\n+
        \   from rpmfluff import can_use_rpm_weak_deps\n+except ImportError:\n+    try:\n+
        \       from rpmfluff.utils import can_use_rpm_weak_deps\n+    except ImportError:\n+
        \       can_use_rpm_weak_deps = None\n+\n+RPM = namedtuple('RPM', ['name',
        'version', 'release', 'epoch', 'recommends'])\n+\n+\n+SPECS = [\n+    RPM('dinginessentail',
        '1.0', '1', None, None),\n+    RPM('dinginessentail', '1.0', '2', '1', None),\n+
        \   RPM('dinginessentail', '1.1', '1', '1', None),\n+    RPM('dinginessentail-olive',
        '1.0', '1', None, None),\n+    RPM('dinginessentail-olive', '1.1', '1', None,
        None),\n+    RPM('landsidescalping', '1.0', '1', None, None),\n+    RPM('landsidescalping',
        '1.1', '1', None, None),\n+    RPM('dinginessentail-with-weak-dep', '1.0',
        '1', None, ['dinginessentail-weak-dep']),\n+    RPM('dinginessentail-weak-dep',
        '1.0', '1', None, None),\n+]\n+\n+\n+def create_repo(arch='x86_64'):\n+    pkgs
        = []\n+    for spec in SPECS:\n+        pkg = SimpleRpmBuild(spec.name, spec.version,
        spec.release, [arch])\n+        pkg.epoch = spec.epoch\n+\n+        if spec.recommends:\n+
        \           # Skip packages that require weak deps but an older version of
        RPM is being used\n+            if not can_use_rpm_weak_deps or not can_use_rpm_weak_deps():\n+
        \               continue\n+\n+            for recommend in spec.recommends:\n+
        \               pkg.add_recommends(recommend)\n+\n+        pkgs.append(pkg)\n+\n+
        \   repo = YumRepoBuild(pkgs)\n+    repo.make(arch)\n+\n+    for pkg in pkgs:\n+
        \       pkg.clean()\n+\n+    return repo.repoDir\n+\n+\n+def main():\n+    module
        = AnsibleModule(\n+        argument_spec={\n+            'arch': {'required':
        True},\n+            'tempdir': {'type': 'path'},\n+        }\n+    )\n+\n+
        \   arch = module.params['arch']\n+    tempdir = module.params['tempdir']\n+\n+
        \   # Save current temp dir so we can set it back later\n+    original_tempdir
        = tempfile.tempdir\n+    tempfile.tempdir = tempdir\n+\n+    try:\n+        repo_dir
        = create_repo(arch)\n+    finally:\n+        tempfile.tempdir = original_tempdir\n+\n+
        \   module.exit_json(repo_dir=repo_dir, tmpfile=tempfile.gettempdir())\n+\n+\n+if
        __name__ == \"__main__\":\n+    main()\ndiff --git a/test/integration/targets/setup_rpm_repo/meta/main.yml
        b/test/integration/targets/setup_rpm_repo/meta/main.yml\nnew file mode 100644\nindex
        0000000000000..1810d4bec988c\n--- /dev/null\n+++ b/test/integration/targets/setup_rpm_repo/meta/main.yml\n@@
        -0,0 +1,2 @@\n+dependencies:\n+  - setup_remote_tmp_dir\ndiff --git a/test/integration/targets/setup_rpm_repo/tasks/main.yml
        b/test/integration/targets/setup_rpm_repo/tasks/main.yml\nindex 14addf79a831d..a6766f2053cbd
        100644\n--- a/test/integration/targets/setup_rpm_repo/tasks/main.yml\n+++
        b/test/integration/targets/setup_rpm_repo/tasks/main.yml\n@@ -31,18 +31,22
        @@\n       - ansible_facts.distribution in ['RedHat', 'CentOS']\n       -
        ansible_facts.distribution_major_version is version('8', '>=')\n \n-  - name:
        Copy script for creating a repo\n-    copy:\n-      src: create-repo.py\n-
        \     dest: /tmp/create-repo.py\n-      mode: 0755\n+  - set_fact:\n+      repos:\n+
        \       - \"fake-{{ ansible_architecture }}\"\n+        - \"fake-i686\"\n+
        \       - \"fake-ppc64\"\n+    changed_when: yes\n+    notify: remove repos\n
        \n   - name: Create RPMs and put them into a repo\n-    shell: \"{{ansible_python_interpreter}}
        /tmp/create-repo.py {{ ansible_architecture }}\"\n+    create_repo:\n+      arch:
        \"{{ ansible_architecture }}\"\n+      tempdir: \"{{ remote_tmp_dir }}\"\n
        \    register: repo\n \n   - set_fact:\n-      repodir: \"{{ repo.stdout_lines[-1]
        }}\"\n+      repodir: \"{{ repo.repo_dir }}\"\n \n   - name: Install the repo\n
        \    yum_repository:\n@@ -50,6 +54,7 @@\n       description: \"fake-{{ ansible_architecture
        }}\"\n       baseurl: \"file://{{ repodir }}\"\n       gpgcheck: no\n+    when:
        install_repos | bool\n \n   - name: Copy comps.xml file\n     copy:\n@@ -61,11
        +66,13 @@\n     command: createrepo -g {{ repodir_comps.dest | quote }} {{
        repodir | quote }}\n \n   - name: Create RPMs and put them into a repo (i686)\n-
        \   shell: \"{{ansible_python_interpreter}} /tmp/create-repo.py i686\"\n+
        \   create_repo:\n+      arch: i686\n+      tempdir: \"{{ remote_tmp_dir }}\"\n
        \    register: repo_i686\n \n   - set_fact:\n-      repodir_i686: \"{{ repo_i686.stdout_lines[-1]
        }}\"\n+      repodir_i686: \"{{ repo_i686.repo_dir }}\"\n \n   - name: Install
        the repo (i686)\n     yum_repository:\n@@ -73,13 +80,16 @@\n       description:
        \"fake-i686\"\n       baseurl: \"file://{{ repodir_i686 }}\"\n       gpgcheck:
        no\n+    when: install_repos | bool\n \n   - name: Create RPMs and put them
        into a repo (ppc64)\n-    shell: \"{{ansible_python_interpreter}} /tmp/create-repo.py
        ppc64\"\n+    create_repo:\n+      arch: ppc64\n+      tempdir: \"{{ remote_tmp_dir
        }}\"\n     register: repo_ppc64\n \n   - set_fact:\n-      repodir_ppc64:
        \"{{ repo_ppc64.stdout_lines[-1] }}\"\n+      repodir_ppc64: \"{{ repo_ppc64.repo_dir
        }}\"\n \n   - name: Install the repo (ppc64)\n     yum_repository:\n@@ -87,11
        +97,6 @@\n       description: \"fake-ppc64\"\n       baseurl: \"file://{{
        repodir_ppc64 }}\"\n       gpgcheck: no\n-\n-  - set_fact:\n-      repos:\n-
        \       - \"fake-{{ ansible_architecture }}\"\n-        - \"fake-i686\"\n-
        \       - \"fake-ppc64\"\n+    when: install_repos | bool\n \n   when: ansible_distribution
        in ['RedHat', 'CentOS', 'ScientificLinux', 'Fedora']\ndiff --git a/test/integration/targets/yum_repository/defaults/main.yml
        b/test/integration/targets/yum_repository/defaults/main.yml\nnew file mode
        100644\nindex 0000000000000..4c1fbc652e643\n--- /dev/null\n+++ b/test/integration/targets/yum_repository/defaults/main.yml\n@@
        -0,0 +1,5 @@\n+yum_repository_test_package: dinginessentail\n+yum_repository_test_repo:\n+
        \ name: fakerepo\n+  description: Fake Repo\n+  baseurl: \"file://{{ repodir
        }}\"\ndiff --git a/test/integration/targets/yum_repository/handlers/main.yml
        b/test/integration/targets/yum_repository/handlers/main.yml\nnew file mode
        100644\nindex 0000000000000..f96c23917b7ae\n--- /dev/null\n+++ b/test/integration/targets/yum_repository/handlers/main.yml\n@@
        -0,0 +1,4 @@\n+- name: remove listtest repo\n+  yum_repository:\n+    name:
        listtest\n+    state: absent\ndiff --git a/test/integration/targets/yum_repository/meta/main.yml
        b/test/integration/targets/yum_repository/meta/main.yml\nnew file mode 100644\nindex
        0000000000000..56539a4f55716\n--- /dev/null\n+++ b/test/integration/targets/yum_repository/meta/main.yml\n@@
        -0,0 +1,4 @@\n+dependencies:\n+  - role: setup_rpm_repo\n+    vars:\n+      install_repos:
        no\ndiff --git a/test/integration/targets/yum_repository/tasks/main.yml b/test/integration/targets/yum_repository/tasks/main.yml\nindex
        1eabf51b032b8..d81957755c273 100644\n--- a/test/integration/targets/yum_repository/tasks/main.yml\n+++
        b/test/integration/targets/yum_repository/tasks/main.yml\n@@ -1,17 +1,6 @@\n
        - name: Run tests\n   when: ansible_facts.distribution in ['CentOS', 'Fedora']\n
        \  block:\n-    - name: Include distribution specific variables\n-      include_vars:
        \"{{ lookup('first_found', params) }}\"\n-      vars:\n-        params:\n-
        \         files:\n-            - \"{{ ansible_facts.distribution }}-{{ ansible_facts.distribution_major_version
        }}.yml\"\n-            - \"{{ ansible_facts.distribution }}.yml\"\n-            -
        default.yml\n-          paths:\n-            - vars\n-\n     - name: ensure
        {{ yum_repository_test_package }} is uninstalled to begin with\n       action:
        \"{{ ansible_facts.pkg_mgr }}\"\n       args:\n@@ -184,6 +173,7 @@\n         includepkgs:\n
        \          - ccc\n           - ddd\n+      notify: remove listtest repo\n
        \n     - name: Assert that lists were properly inserted\n       assert:\n@@
        -198,24 +188,3 @@\n         repofile: \"{{ lookup('file', '/etc/yum.repos.d/listtest.repo')
        }}\"\n         url_hostname: \"{{ yum_repository_test_repo.baseurl | urlsplit('hostname')
        }}\"\n         url_hostname2: \"{{ url_hostname | replace('download[0-9]?\\\\.',
        'download2\\\\.', 1) }}\"\n-\n-    - name: CLEANUP | Remove list test repo\n-
        \     yum_repository:\n-        name: listtest\n-        state: absent\n-\n-
        \   - name: CLEANUP | Remove {{ yum_repository_test_repo.name }}\n-      yum_repository:\n-
        \       name: \"{{ yum_repository_test_repo.name }}\"\n-        state: absent\n-\n-
        \   - name: CLEANUP | Enable EPEL\n-      yum_repository:\n-        name:
        epel\n-        state: present\n-        description: \"{{ yum_repository_epel.description
        | default(omit) }}\"\n-        metalink: \"{{ yum_repository_epel.metalink
        | default(omit) }}\"\n-        mirrorlist: \"{{ yum_repository_epel.mirrorlist
        | default(omit) }}\"\n-        gpgkey: \"{{ yum_repository_epel.gpgkey }}\"\n-
        \       gpgcheck: yes\n-      when: ansible_facts.distribution == 'CentOS'\ndiff
        --git a/test/integration/targets/yum_repository/vars/CentOS-6.yml b/test/integration/targets/yum_repository/vars/CentOS-6.yml\ndeleted
        file mode 100644\nindex db9947d5ea3a0..0000000000000\n--- a/test/integration/targets/yum_repository/vars/CentOS-6.yml\n+++
        /dev/null\n@@ -1,10 +0,0 @@\n-yum_repository_test_package: sl\n-yum_repository_test_repo:\n-
        \ name: epel\n-  description: EPEL yum repo\n-  baseurl: https://archives.fedoraproject.org/pub/archive/epel/{{
        ansible_facts.distribution_major_version }}/$basearch\n-\n-yum_repository_epel:\n-
        \ description: Extra Packages for Enterprise Linux {{ ansible_facts.distribution_major_version
        }} - $basearch\n-  mirrorlist: https://mirrors.fedoraproject.org/metalink?repo=epel-{{
        ansible_facts.distribution_major_version }}&arch=$basearch\n-  gpgkey: file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-{{
        ansible_facts.distribution_major_version }}\ndiff --git a/test/integration/targets/yum_repository/vars/CentOS-8.yml
        b/test/integration/targets/yum_repository/vars/CentOS-8.yml\ndeleted file
        mode 100644\nindex 22d4d13e722cc..0000000000000\n--- a/test/integration/targets/yum_repository/vars/CentOS-8.yml\n+++
        /dev/null\n@@ -1,10 +0,0 @@\n-yum_repository_test_package: sshpass\n-yum_repository_test_repo:\n-
        \ name: epel\n-  description: EPEL yum repo\n-  baseurl: https://download.fedoraproject.org/pub/epel/$releasever/Everything/$basearch\n-\n-yum_repository_epel:\n-
        \ description: Extra Packages for Enterprise Linux $releasever - $basearch\n-
        \ metalink: https://mirrors.fedoraproject.org/metalink?repo=epel-$releasever&arch=$basearch&infra=$infra&content=$contentdir\n-
        \ gpgkey: file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-{{ ansible_facts.distribution_major_version
        }}\ndiff --git a/test/integration/targets/yum_repository/vars/CentOS.yml b/test/integration/targets/yum_repository/vars/CentOS.yml\ndeleted
        file mode 100644\nindex 542b722f7a2aa..0000000000000\n--- a/test/integration/targets/yum_repository/vars/CentOS.yml\n+++
        /dev/null\n@@ -1,10 +0,0 @@\n-yum_repository_test_package: sl\n-yum_repository_test_repo:\n-
        \ name: epel\n-  description: EPEL yum repo\n-  baseurl: http://download.fedoraproject.org/pub/epel/{{
        ansible_facts.distribution_major_version }}/$basearch\n-\n-yum_repository_epel:\n-
        \ description: Extra Packages for Enterprise Linux {{ ansible_facts.distribution_major_version
        }} - $basearch\n-  mirrorlist: https://mirrors.fedoraproject.org/metalink?repo=epel-{{
        ansible_facts.distribution_major_version }}&arch=$basearch\n-  gpgkey: file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-{{
        ansible_facts.distribution_major_version }}\ndiff --git a/test/integration/targets/yum_repository/vars/Fedora.yml
        b/test/integration/targets/yum_repository/vars/Fedora.yml\ndeleted file mode
        100644\nindex 8c37eaa1076fd..0000000000000\n--- a/test/integration/targets/yum_repository/vars/Fedora.yml\n+++
        /dev/null\n@@ -1,5 +0,0 @@\n-yum_repository_test_package: libbdplus\n-yum_repository_test_repo:\n-
        \ name: rpmfusion-free\n-  description: RPM Fusion for Fedora {{ ansible_distribution_major_version
        }} - Free\n-  baseurl: http://download1.rpmfusion.org/free/fedora/releases/{{
        ansible_distribution_major_version }}/Everything/{{ ansible_architecture }}/os/\ndiff
        --git a/test/integration/targets/yum_repository/vars/default.yml b/test/integration/targets/yum_repository/vars/default.yml\ndeleted
        file mode 100644\nindex e69de29bb2d1d..0000000000000\n"
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Encoding:
      - gzip
      Content-Security-Policy:
      - 'default-src ''none''; base-uri ''self''; block-all-mixed-content; connect-src
        ''self'' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com
        github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com
        github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com
        cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com; font-src
        github.githubassets.com; form-action ''self'' github.com gist.github.com;
        frame-ancestors ''none''; frame-src render.githubusercontent.com; img-src
        ''self'' data: github.githubassets.com identicons.github.com collector.githubapp.com
        github-cloud.s3.amazonaws.com user-images.githubusercontent.com/ *.githubusercontent.com;
        manifest-src ''self''; media-src ''none''; script-src github.githubassets.com;
        style-src ''unsafe-inline'' github.githubassets.com; worker-src github.com/socket-worker-5029ae85.js
        gist.github.com/socket-worker-5029ae85.js'
      Content-Type:
      - text/plain; charset=utf-8
      Date:
      - Sat, 27 Feb 2021 07:10:38 GMT
      Etag:
      - W/"066363666a8d7f22e09a19b474a7b5ef"
      Expect-CT:
      - max-age=2592000, report-uri="https://api.github.com/_private/browser/errors"
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Server:
      - GitHub.com
      Set-Cookie:
      - logged_in=no; domain=.github.com; path=/; expires=Sun, 27 Feb 2022 07:10:38
        GMT; secure; HttpOnly; SameSite=Lax
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      Transfer-Encoding:
      - chunked
      Vary:
      - X-PJAX
      - Accept-Encoding, Accept, X-Requested-With
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - deny
      X-GitHub-Request-Id:
      - D356:6BEB:937DF5:B6B050:6039F06D
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 200
      message: OK
    url: https://patch-diff.githubusercontent.com/raw/ansible/ansible/pull/73467.diff
version: 1
